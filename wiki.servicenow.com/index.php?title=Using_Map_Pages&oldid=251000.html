<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8"/>
<title>Using Map Pages - ServiceNow Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Using_Map_Pages","wgTitle":"Using Map Pages","wgCurRevisionId":251000,"wgRevisionId":251000,"wgArticleId":3816,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Navigation and UI Configuration"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Using_Map_Pages","wgRelevantArticleId":3816,"wgRequestId":"a55ab380385bbce90e5823c2","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgCategoryTreePageCategoryOptions":"{\"mode\":20,\"hideprefix\":20,\"showcount\":true,\"namespaces\":false}"});mw.loader.implement("user.options",function($,jQuery,require,module){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function ( $, jQuery, require, module ) {
mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});/*@nomin*/;

});mw.loader.load(["mediawiki.page.startup","ext.voteNY"]);});</script>
<link rel="stylesheet" href="http://wiki.servicenow.com/load.php?debug=false&amp;lang=en&amp;modules=ext.pygments%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.content.externallinks%7Cmediawiki.skinning.interface%7Cskins.monobook.styles&amp;only=styles&amp;skin=monobook"/>
<!--[if IE 6]><link rel="stylesheet" href="/skins/MonoBook/IE60Fixes.css?303" media="screen"/><![endif]--><!--[if IE 7]><link rel="stylesheet" href="/skins/MonoBook/IE70Fixes.css?303" media="screen"/><![endif]-->
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=monobook.css"/>
<script async="" src="load.php%3Fdebug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=monobook"></script>
<meta name="generator" content="MediaWiki 1.27.3"/>
<meta name="robots" content="noindex,nofollow"/>
<meta name="robots" content="index,follow,noarchive"/>
<meta name="copyright" content="ServiceNow"/>
<meta http-equiv="content-language" content="en"/>
<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
<meta name="modified" content="20170913163355"/>
<meta name="canonical" content="//wiki.servicenow.com/index.php?title=Using_Map_Pages"/>
<meta name="author" content="ServiceNow"/>
<meta name="twitter:card" content="@NOWsupport"/>
<meta name="twitter:title" content="Using Map Pages"/>
<meta name="twitter:creator" content="@NOWsupport"/>
<meta name="twitter:domain" content="servicenow.com"/>
<meta name="keywords" content="Navigation and UI Configuration"/>
<meta name="category" content="Navigation and UI Configuration"/>
<link rel="shortcut icon" href="favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php" title="ServiceNow Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="api.php%3Faction=rsd"/>
<link rel="alternate" type="application/atom+xml" title="ServiceNow Wiki Atom feed" href="index.php%3Ftitle=Special:RecentChanges&amp;feed=atom.html"/>
<script type="text/javascript">window.tamBaseUrl='/extensions/TreeAndMenu'</script>

<script type="text/javascript" src="extensions/TreeAndMenu/dtree.js"></script>

<link rel="canonical" href="index.php%3Ftitle=Using_Map_Pages.html" />

	<meta property="og:title" content="ServiceNow Wiki:Using Map Pages"/>

	<meta property="og:type" content="article"/>

	<meta property="og:site_name" content="ServiceNow Wiki"/>

	<meta property="modified" content="20170913163355"/>

	<meta property="article:published_time" content="20170913163355"/>

	<meta property="article:modified_time" content="20170913163355"/>

	<meta property="article:author" content="ServiceNow"/>

	<meta property="article:tag" content="Navigation and UI Configuration"/>

	<meta property="og:url" content="//wiki.servicenow.com/index.php?title=Using_Map_Pages"/>

</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Using_Map_Pages rootpage-Using_Map_Pages skin-monobook action-view">
<div id="header">
	<div id="snc_top_toolbar" >
	<ul class="inline" id="sites">
		<li><a href="index.html">Wiki home</a></li>
		<li><a href="http://community.servicenow.com">Community</a></li>
		<li><a href="http://www.servicenow.com/services/training-and-certification.html">Training</a></li>
		<li><a href="https://www.servicenow.com/support.html">Support home</a></li>
		<li><a href="http://www.servicenow.com">Company home</a></li>
		<li><a href="http://info.servicenow.com/demonow/">Demo</a></li>
	</ul>

<!-- Start Adobe analytics staging -->
<script src="http://assets.adobedtm.com/43c21e31f00ba1c49c16c9c6a5acf67ef1e8dfa8/satelliteLib-c41330e93f48feef745e6ecb4b425db9d5da2dea.js"></script>

<!--Begin Google analytics -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-29210697-1']);
  _gaq.push(['_setDomainName', 'servicenow.com']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  _gaq.push(['_trackPageLoadTime']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<!-- End Google analytics, begin other analytics -->

<!--<script type="text/javascript" language="javascript">llactid=11051</script>
<script type="text/javascript" language="javascript" src="https://trackalyzer.com/trackalyze_secure.js"></script>
-->
<!--End analytics-->

	</div>
</div>
<div id="snc_toolbar" >
	<a href="index.html">
	<img src="https://wiki.service-now.com/images/CustomWikiLogoFixed.png" height="64px">
	</a>
<div id="googleSearchBox"> <!--Google Search box -->
<div id='cse-search-form' style='width: 100%;'>Loading</div>
<script src='http://www.google.com/jsapi' type='text/javascript'></script>


<script type='text/javascript'>

google.load('search', '1', {language: 'en', style: google.loader.themes.V2_DEFAULT, callback:loadCSE});

window.onhashchange = function() {
	var url = window.location.href;
	if(url.indexOf("gsc.q") == -1) //call only when not browsing search results.
	{
		resetUI();
	}
}

function resetUI() {
	//reset UI to standard layout. Hide search, restore page content/controls.
	var cactions = document.getElementById('p-cactions');
	var cont = document.getElementById('content');
	var sr = document.getElementById('cse');

	cactions.style.display = 'block';
	sr.style.display = 'none';
	cont.style.display = 'block';
};

function onSubmit() {
	//hide page elements when searching.
	var cactions = document.getElementById('p-cactions');
	cactions.style.display = 'none';
	var sr = document.getElementById('cse');
	sr.style.display = 'block';
	var cont = document.getElementById('content');
	cont.style.display = 'none';
};

function loadCSE() {
	var customSearchOptions = {};
	var orderByOptions = {};
	orderByOptions['keys'] = [{label: 'Relevance', key: ''} , {label: 'Date', key: 'date'}];
	customSearchOptions['enableOrderBy'] = true;
	customSearchOptions['orderByOptions'] = orderByOptions;

	var customSearchControl = new google.search.CustomSearchControl('005409823165138974380:bltnnmgfoek', customSearchOptions);
	customSearchControl.setResultSetSize(google.search.Search.FILTERED_CSE_RESULTSET);
	customSearchControl.setSearchCompleteCallback(this,onSubmit);//set onSubmit script to run when searching

	var options = new google.search.DrawOptions();
	options.setSearchFormRoot('cse-search-form');
	options.setAutoComplete(true);
	customSearchControl.draw('cse', options);
	var historyStarted = customSearchControl.startHistoryManagement();
	if(historyStarted) customSearchControl.setLinkTarget(google.search.Search.LINK_TARGET_SELF);
};

</script>

</div> <!--end Google search box-->
</div>

<div id="globalWrapper">
		<div id="column-content">
			<div id="cse"></div>
			<div id="content" class="mw-body" role="main">
				<a id="top"></a>
									<div id="siteNotice"><div class="collection-creatorbox"><img src="extensions/Collection/images/Open_book.png%3F9" alt="" width="80" height="45" class="collection-creatorbox-book" /><div class="collection-creatorbox-row"><div><a href="index.php%3Ftitle=Help:Books.html" title="Show help about creating books" rel="nofollow"><img src="extensions/Collection/images/silk-help.png" alt="" width="16" height="16" />&#160;Help</a></div><span class="collection-creatorbox-title">Book creator</span> (<a href="index.php%3Ftitle=Special:Book&amp;bookcmd=stop_book_creator&amp;referer=Using+Map+Pages.html" title="Stop using the book creator" rel="nofollow">disable</a>)</div><div id="coll-book_creator_box" class="collection-creatorbox-row"><a href="index.php%3Ftitle=Special:Book&amp;bookcmd=add_article&amp;arttitle=Using+Map+Pages&amp;oldid=0.html" title="Add the current wiki page to your book" id="coll-add_article" rel="nofollow" onclick="collectionCall('AddArticle', ['removearticle', wgNamespaceNumber, wgTitle, 0]); return false;"><img src="extensions/Collection/images/silk-add.png" alt="" width="16" height="16" />&#160;Add this page to your book</a><a href="index.php%3Ftitle=Special:Book%252Fload_collection%252F&amp;colltitle=Book:Introduction_to_ServiceNow_Part_1.html" title="Click to edit/download/order your book" rel="nofollow" class="collection-creatorbox-iconlink"><img src="extensions/Collection/images/silk-book_open.png" alt="" width="16" height="16" />&#160;Show book (31 pages)</a><a href="index.php%3Ftitle=Special:Book&amp;bookcmd=suggest.html" title="Show suggestions based on the pages in your book" rel="nofollow" class="collection-creatorbox-iconlink"><img src="extensions/Collection/images/silk-wand.png" alt="" width="16" height="16" style="vertical-align: text-bottom" />&#160;Suggest pages</a></div></div></div>
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">Using Map Pages</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="siteSub">From ServiceNow Wiki</div>
					<div id="contentSub"><!-- Text for discussion pages-->
Using Map Pages</div>
										<div id="jump-to-nav" class="mw-jump">Jump to: <a href="index.php%3Ftitle=Using_Map_Pages&amp;oldid=251000.html#column-one">navigation</a>, <a href="index.php%3Ftitle=Using_Map_Pages&amp;oldid=251000.html#searchInput">search</a></div>

					<!-- start content -->
					<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><table cellspacing="5" cellpadding="5" class="reproduce">

<tr>
<td scope="row" style="vertical-align:middle;"> <div class="floatleft"><a href="index.php%3Ftitle=File:Warning.gif.html" class="image" title="Note"><img alt="Note" src="images/thumb/c/c2/Warning.gif/16px-Warning.gif.png" width="16" height="16" srcset="/images/thumb/c/c2/Warning.gif/24px-Warning.gif.png 1.5x, /images/thumb/c/c2/Warning.gif/32px-Warning.gif.png 2x" /></a></div>
</td>
<td scope="row" style="vertical-align:top"> <b>Note:</b> <i>This article applies to Fuji and earlier releases. For more current information, see <a target="_blank" rel="nofollow noreferrer noopener" class="external text" href="https://docs.servicenow.com/bundle/jakarta-servicenow-platform/page/administer/navigation-and-ui/concept/c_MapPages.html">Map Pages</a> at <a target="_blank" rel="nofollow noreferrer noopener" class="external free" href="http://docs.servicenow.com">http://docs.servicenow.com</a></i>
<p><b>The ServiceNow Wiki is no longer being updated. Visit <a target="_blank" rel="nofollow noreferrer noopener" class="external free" href="http://docs.servicenow.com">http://docs.servicenow.com</a> for the latest product documentation.</b>
</p>
</td></tr></table>
<p><br />
</p>
<div class="noprint">
<table class="topicbox">

<tr>
<th> Navigation and UI Configuration
</th></tr>
<tr>
<td> <div class='dtree' id='5a20f8c8d1525t'></div><script type="text/javascript">window.tamOnload_tam5a20f8c8d1525t=[];tree = new dTree('tam5a20f8c8d1525t');
                                               for (i in tree.icon) tree.icon[i] = '/extensions/TreeAndMenu/'+tree.icon[i];
                                               tree.config.useLines = false;
                                               tree.add(0,-1,'');
                                               tam5a20f8c8d1525t = tree;
                                               tam5a20f8c8d1525t.add(1, 0, '<b>Navigation</b> ');

tam5a20f8c8d1525t.add(2, 1, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Administering_Application_Menus_and_Modules\&quot;" title=\"Administering Application Menus and Modules\">Administering Application Menus and Modules</a>');
tam5a20f8c8d1525t.add(3, 1, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Modifying_Menu_Lists\&quot;" title=\"Modifying Menu Lists\">Modifying Menu Lists</a>');
tam5a20f8c8d1525t.add(4, 1, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Module_Icons\&quot;" title=\"Module Icons\">Module Icons</a>');
tam5a20f8c8d1525t.add(5, 1, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Creating_and_Using_Tags\&quot;" title=\"Creating and Using Tags\">Creating and Using Tags</a>');
tam5a20f8c8d1525t.add(6, 1, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Navigation_Stack\&quot;" title=\"Navigation Stack\">Navigation Stack</a>');
tam5a20f8c8d1525t.add(7, 1, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Canceling_Navigation_Actions\&quot;" title=\"Canceling Navigation Actions\">Canceling Navigation Actions</a>');
tam5a20f8c8d1525t.add(8, 0, '<b>UI Control</b>');
tam5a20f8c8d1525t.add(9, 8, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Context-Sensitive_Help\&quot;" title=\"Context-Sensitive Help\">Context-Sensitive Help</a>');
tam5a20f8c8d1525t.add(10, 8, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Field_Label_Help\&quot;" title=\"Field Label Help\">Field Label Help</a>');
tam5a20f8c8d1525t.add(11, 8, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Creating_a_Change_Password_Module\&quot;" title=\"Creating a Change Password Module\">Creating a Change Password Module</a>');
tam5a20f8c8d1525t.add(12, 8, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Defining_Locations\&quot;" title=\"Defining Locations\">Defining Locations</a>');
tam5a20f8c8d1525t.add(13, 8, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Navigation_and_the_User_Interface\&quot;" title=\"Navigation and the User Interface\">Navigation and the User Interface</a>');
tam5a20f8c8d1525t.add(14, 8, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Administering_the_User_Interface\&quot;" title=\"Administering the User Interface\">Administering the User Interface</a>');
tam5a20f8c8d1525t.add(15, 8, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Storing_Audio_Files_in_the_Database\&quot;" title=\"Storing Audio Files in the Database\">Storing Audio Files in the Database</a>');
tam5a20f8c8d1525t.add(16, 8, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Storing_Images_in_the_Database\&quot;" title=\"Storing Images in the Database\">Storing Images in the Database</a>');
tam5a20f8c8d1525t.add(17, 8, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=User_Preferences\&quot;" title=\"User Preferences\">User Preferences</a>');
tam5a20f8c8d1525t.add(18, 8, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=User_Preference_Settings\&quot;" title=\"User Preference Settings\">User Preference Settings</a>');
tam5a20f8c8d1525t.add(19, 8, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=View_Management\&quot;" title=\"View Management\">View Management</a>');
tam5a20f8c8d1525t.add(20, 8, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Welcome_Page_Content\&quot;" title=\"Welcome Page Content\">Welcome Page Content</a>');
tam5a20f8c8d1525t.add(21, 8, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Google_Maps_Support\&quot;" title=\"Google Maps Support\">Google Maps Support</a>');
tam5a20f8c8d1525t.add(22, 8, '<strong class=\"selflink\">Using Map Pages</strong>');
tam5a20f8c8d1525t.add(23, 0, '<b>UI Themes</b>');
tam5a20f8c8d1525t.add(24, 23, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Theming_an_Instance\&quot;" title=\"Theming an Instance\">Theming an Instance</a>');
tam5a20f8c8d1525t.add(25, 23, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Customizing_the_UI_Appearance\&quot;" title=\"Customizing the UI Appearance\">Customizing the UI Appearance</a>');
tam5a20f8c8d1525t.add(26, 23, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=CSS_Theme_Support\&quot;" title=\"CSS Theme Support\">CSS Theme Support</a>');
tam5a20f8c8d1525t.add(27, 23, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Defining_Field_Styles\&quot;" title=\"Defining Field Styles\">Defining Field Styles</a>');
tam5a20f8c8d1525t.add(28, 23, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Modifying_the_Banner\&quot;" title=\"Modifying the Banner\">Modifying the Banner</a>');
tam5a20f8c8d1525t.add(29, 23, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Creating_a_Company_Profile\&quot;" title=\"Creating a Company Profile\">Creating a Company Profile</a>');

                                               document.getElementById('5a20f8c8d1525t').innerHTML = tam5a20f8c8d1525t.toString();
                                               
                                               for(i in window.tamOnload_tam5a20f8c8d1525t) { window.tamOnload_tam5a20f8c8d1525t[i](); }</script>


</td></tr>
<tr>
<th> Related Topics
</th></tr>
<tr>
<td>
<ul><li><a href="index.php%3Ftitle=Geolocation.html" title="Geolocation">Geolocation</a></li>
<li><a href="index.php%3Ftitle=Special:Book&amp;bookcmd=add_article&amp;arttitle=Content+Management+Overview&amp;oldid=0.html" title="Content Management Overview" class="mw-redirect">Content Management</a></li>
<li><a href="index.php%3Ftitle=UI_Scripts.html" title="UI Scripts">UI Scripts</a></li>
<li><a href="index.php%3Ftitle=Creating_a_UI_Policy.html" title="Creating a UI Policy">UI Policies</a></li>
<li><a href="index.php%3Ftitle=UI_Actions.html" title="UI Actions">UI Actions</a></li>
<li><a href="index.php%3Ftitle=UI_Macros.html" title="UI Macros">UI Macros</a></li>
<li><a href="index.php%3Ftitle=UI_Pages.html" title="UI Pages">UI Pages</a></li></ul>
</td></tr></table>
</div>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="index.php%3Ftitle=Using_Map_Pages&amp;oldid=251000.html#Overview"><span class="tocnumber">1</span> <span class="toctext">Overview</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="index.php%3Ftitle=Using_Map_Pages&amp;oldid=251000.html#Creating_a_Map_Page"><span class="tocnumber">2</span> <span class="toctext">Creating a Map Page</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="index.php%3Ftitle=Using_Map_Pages&amp;oldid=251000.html#Creating_Map_Page_Modules"><span class="tocnumber">3</span> <span class="toctext">Creating Map Page Modules</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="index.php%3Ftitle=Using_Map_Pages&amp;oldid=251000.html#Desktop_Modules"><span class="tocnumber">3.1</span> <span class="toctext">Desktop Modules</span></a>
<ul>
<li class="toclevel-3 tocsection-5"><a href="index.php%3Ftitle=Using_Map_Pages&amp;oldid=251000.html#Linking_Directly_to_the_Map_Page"><span class="tocnumber">3.1.1</span> <span class="toctext">Linking Directly to the Map Page</span></a></li>
<li class="toclevel-3 tocsection-6"><a href="index.php%3Ftitle=Using_Map_Pages&amp;oldid=251000.html#Linking_to_a_URL"><span class="tocnumber">3.1.2</span> <span class="toctext">Linking to a URL</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-7"><a href="index.php%3Ftitle=Using_Map_Pages&amp;oldid=251000.html#Smartphone_Modules"><span class="tocnumber">3.2</span> <span class="toctext">Smartphone Modules</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-8"><a href="index.php%3Ftitle=Using_Map_Pages&amp;oldid=251000.html#Scripting_for_Map_Pages"><span class="tocnumber">4</span> <span class="toctext">Scripting for Map Pages</span></a>
<ul>
<li class="toclevel-2 tocsection-9"><a href="index.php%3Ftitle=Using_Map_Pages&amp;oldid=251000.html#Scripting_Map_Item_Attributes"><span class="tocnumber">4.1</span> <span class="toctext">Scripting Map Item Attributes</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="index.php%3Ftitle=Using_Map_Pages&amp;oldid=251000.html#Scripting_Custom_Behavior_for_Smartphone_Interfaces"><span class="tocnumber">4.2</span> <span class="toctext">Scripting Custom Behavior for Smartphone Interfaces</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="index.php%3Ftitle=Using_Map_Pages&amp;oldid=251000.html#Sample_Scripts"><span class="tocnumber">4.3</span> <span class="toctext">Sample Scripts</span></a>
<ul>
<li class="toclevel-3 tocsection-12"><a href="index.php%3Ftitle=Using_Map_Pages&amp;oldid=251000.html#Basic_Sample"><span class="tocnumber">4.3.1</span> <span class="toctext">Basic Sample</span></a></li>
<li class="toclevel-3 tocsection-13"><a href="index.php%3Ftitle=Using_Map_Pages&amp;oldid=251000.html#Basic_Sample_-_isMobile"><span class="tocnumber">4.3.2</span> <span class="toctext">Basic Sample - isMobile</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="index.php%3Ftitle=Using_Map_Pages&amp;oldid=251000.html#Advanced_Sample"><span class="tocnumber">4.3.3</span> <span class="toctext">Advanced Sample</span></a></li>
<li class="toclevel-3 tocsection-15"><a href="index.php%3Ftitle=Using_Map_Pages&amp;oldid=251000.html#Marker_Label_Sample"><span class="tocnumber">4.3.4</span> <span class="toctext">Marker Label Sample</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>

<h1><span class="mw-headline" id="Overview"><span class="mw-headline-number">1</span> Overview</span></h1>
<p>Map pages display ServiceNow data graphically on a Google map, based on location data that you provide. You can create as many map pages as needed to define the types of data to display, the links to show, and the appearance of the map. After creating the map pages, you can <a href="index.php%3Ftitle=Using_Map_Pages&amp;oldid=251000.html#Creating_Map_Page_Modules">create new modules</a> to display the map pages.
</p>
<table cellspacing="5" cellpadding="5" class="reproduce">

<tr>
<td scope="row" style="vertical-align:middle;"> <div class="floatleft"><a href="index.php%3Ftitle=File:Warning.gif.html" class="image" title="Note"><img alt="Note" src="images/thumb/c/c2/Warning.gif/16px-Warning.gif.png" width="16" height="16" srcset="/images/thumb/c/c2/Warning.gif/24px-Warning.gif.png 1.5x, /images/thumb/c/c2/Warning.gif/32px-Warning.gif.png 2x" /></a></div>
</td>
<td scope="row" style="vertical-align:top"> <b>Note:</b> <i>Map pages are subject to the non-production access limitations. See <a href="index.php%3Ftitle=Google_Maps_Support.html" title="Google Maps Support">Google Maps Support</a>.</i>
</td></tr></table>
<p><br />
</p>
<h1><span class="mw-headline" id="Creating_a_Map_Page"><span class="mw-headline-number">2</span> Creating a Map Page</span></h1>
<p>ServiceNow provides several default map pages. You can also create custom map pages with the script examples in this page. 
</p><p>To create a map page:
</p>
<ol><li> Navigate to <b>System UI &gt; Map Pages</b>.</li>
<li> Click <b>New</b>.</li>
<li> Fill in the fields, as appropriate (see table).</li>
<li> Save the record. </li></ol>
<p>This image shows the default map page record that displays critical incidents on a Google map. 
</p><p><a href="index.php%3Ftitle=File:Google_Map_Page.gif.html" class="image" title="Google_Map_Page.gif"><img alt="Google_Map_Page.gif" src="images/thumb/8/84/Google_Map_Page.gif/750px-Google_Map_Page.gif" width="750" height="370" srcset="/images/8/84/Google_Map_Page.gif 1.5x, /images/8/84/Google_Map_Page.gif 2x" /></a>  <br style="clear:both;" />
</p>
<table class="standard">

<tr>
<th> Field
</th>
<th> Description
</th></tr>
<tr>
<td>  Name
</td>
<td>  Enter a unique name to identify the map.
</td></tr>
<tr>
<td>  Center map on
</td>
<td>  Enter the the location for centering the map using the decimal form of latitude and longitude. For example, to center the map on the statue of liberty, enter <b>40.689865, -74.045235</b>.
</td></tr>
<tr>
<td>  Initial zoom
</td>
<td>  Set the map's zoom level on opening.
</td></tr>
<tr>
<td>  Controls size
</td>
<td>  Select whether the Google navigation icons on the map should be large or small.
</td></tr>
<tr>
<td>  Type
</td>
<td>  Select a map background style:  <b>Satellite</b>, <b>Hybrid</b>, <b>Normal</b>, or <b>Terrain</b>.
</td></tr>
<tr>
<td>  Type selection
</td>
<td>  Select which type of Google icons to display on the map: <b>Buttons</b> or <b>Menu</b>.
</td></tr>
<tr>
<td>  Map overview
</td>
<td>  Enable or disable a wide view map window for navigation.
</td></tr>
<tr>
<td>  Script
</td>
<td>  Create a script to define the type of ServiceNow data to display on this map. For more information, see <a href="index.php%3Ftitle=Using_Map_Pages&amp;oldid=251000.html#Scripting_for_Map_Pages">Scripting for Map Pages</a>.
</td></tr>
<tr>
<td bgcolor="#dfdbdc" align="center" colspan="3"> <i>Fields that can be added by <a href="index.php%3Ftitle=Special:Book&amp;bookcmd=remove_article&amp;arttitle=Configuring+Forms&amp;oldid=0.html#Configuring_Forms" title="Configuring Forms">configuring the form</a>:</i>
</td></tr>
<tr>
<td>  Center latitude
</td>
<td>  The latitude the map page will center on. This field is populated by the business rule <b>Geocode Address</b>.
</td></tr>
<tr>
<td>  Center longitude
</td>
<td>  The longitude the map page will center on. This field is populated by the business rule <b>Geocode Address</b>.
</td></tr></table>
<h1><span class="mw-headline" id="Creating_Map_Page_Modules"><span class="mw-headline-number">3</span> Creating Map Page Modules</span></h1>
<p>To display a Google map defined by a map page, you can create a new application module for desktop or smartphone users.
</p>
<h2><span class="mw-headline" id="Desktop_Modules"><span class="mw-headline-number">3.1</span> Desktop Modules</span></h2>
<p>You can create a <a href="index.php%3Ftitle=Administering_Applications_and_Modules.html" title="Administering Applications and Modules" class="mw-redirect">desktop application module</a> for a Google map using either of the following methods:
</p>
<ul><li>Map page link </li>
<li>URL link</li></ul>
<h3><span class="mw-headline" id="Linking_Directly_to_the_Map_Page"><span class="mw-headline-number">3.1.1</span> Linking Directly to the Map Page</span></h3>
<p>To create a custom desktop application module that links directly to a map page:
</p>
<ol><li>Select the appropriate application for the module. 
<dl><dd>For example, if you are planning to display critical incidents, add a module to the Incident application menu. </dd></dl></li>
<li>Right-click the application menu in the application navigator and select <b>Edit Application Menu</b>. </li>
<li>In the <b>Modules</b> related list, click <b>New</b>. </li>
<li>Fill in the fields, as appropriate (see table).</li>
<li>Click <b>Submit</b>.</li></ol>
<p><a href="index.php%3Ftitle=File:Google_Map_Module.gif.html" class="image" title="Google_Map_Module.gif"><img alt="Google_Map_Module.gif" src="images/thumb/6/67/Google_Map_Module.gif/850px-Google_Map_Module.gif" width="850" height="224" srcset="/images/6/67/Google_Map_Module.gif 1.5x, /images/6/67/Google_Map_Module.gif 2x" /></a> <br style="clear:both;" />
</p>
<table class="standard">
<tr>
<th> Field
</th>
<th> Description
</th></tr>
<tr>
<td>  Title
</td>
<td>  Enter a name for the module in the application navigator.
</td></tr>
<tr>
<td>  Order
</td>
<td>  Enter a number to define the sequence this condition should be evaluated if more than one matching condition exists. The order is evaluated from the lowest value to the highest value.
</td></tr>
<tr>
<td>  Application menu
</td>
<td>  Select the application menu where you want this module to appear. By default, this field displays the application menu that you opened to create the module.
</td></tr>
<tr>
<td>  Hint
</td>
<td>  Enter a brief description to display when a user points to the module name in the application navigator.
</td></tr>
<tr>
<td>  Active
</td>
<td>  Select the check box to activate this module. Only active modules appear in the application menu.
</td></tr>
<tr>
<td>  Image
</td>
<td>  Select an icon to display with this module in the application navigator. If this field is blank, a default icon is used.
</td></tr>
<tr>
<td>  Link type
</td>
<td>  Select <b>Map Page</b> from the list. This selection changes the available fields in the form.
</td></tr>
<tr>
<td>  Map page
</td>
<td>  Select the pre-configured map page to use for this module. For example, <b>Critical Incidents</b>.
</td></tr>
<tr>
<td>  Roles
</td>
<td>  Select the roles that are permitted to access this module. If this field is blank, all roles can access the module.
</td></tr></table>
<h3><span class="mw-headline" id="Linking_to_a_URL"><span class="mw-headline-number">3.1.2</span> Linking to a URL</span></h3>
<p>You can also create a desktop module that links to a map page via a URL. 
</p><p>In the module record, select a <b>Link type</b> of <b>URL (from Arguments:)</b>. This selection displays the <b>Arguments</b> field. Enter the sample a URL in this format: 
</p>
<dl><dd><b>map_page.do?sysparm_name=&lt;map page name&gt;</b></dd></dl>
<table cellspacing="5" cellpadding="5" class="reproduce">

<tr>
<td scope="row" style="vertical-align:middle;"> <div class="floatleft"><a href="index.php%3Ftitle=File:Warning.gif.html" class="image" title="Note"><img alt="Note" src="images/thumb/c/c2/Warning.gif/16px-Warning.gif.png" width="16" height="16" srcset="/images/thumb/c/c2/Warning.gif/24px-Warning.gif.png 1.5x, /images/thumb/c/c2/Warning.gif/32px-Warning.gif.png 2x" /></a></div>
</td>
<td scope="row" style="vertical-align:top"> <b>Note:</b> <i>If the map page title has a space in it, replace the space with <b>%20</b> for the correct syntax. For example, a map page called <b>Critical Incidents</b> becomes <b>Critical%20Incidents%20</b> in a URL.</i>
</td></tr></table>
<p><br />
<a href="index.php%3Ftitle=File:Google_Map_Module2.gif.html" class="image" title="Google_Map_Module2.gif"><img alt="Google_Map_Module2.gif" src="images/6/67/Google_Map_Module2.gif" width="850" height="337" /></a>
</p>
<h2><span class="mw-headline" id="Smartphone_Modules"><span class="mw-headline-number">3.2</span> Smartphone Modules</span></h2>
<p>Smartphone map modules are supported starting with the <a href="index.php%3Ftitle=Eureka_Release_Notes.html" title="Eureka Release Notes">Eureka release</a>. 
</p><p>To create a custom smartphone module that links directly to a map page:
</p>
<ol><li> Obtain the <a href="index.php%3Ftitle=Unique_Record_Identifier.html#Getting_the_sys_id" title="Unique Record Identifier">sys_id</a> of the map page.
<dl><dd> The sys_id is required when you create the module.</dd></dl></li>
<li> Navigate to <b>System Mobile UI &gt; Navigator Apps</b>.</li>
<li> Open the application menu where you want the new module to appear.</li>
<li> In the <b>Modules</b> related list, click <b>New</b>.
<dl><dd> The Module form appears.</dd></dl></li>
<li> Fill in the fields, as appropriate (see table).</li>
<li> Click <b>Submit</b>.</li></ol>
<table class="standard">
<tr>
<th>Field
</th>
<th>Description
</th></tr>
<tr>
<td> Name
</td>
<td> Enter a name for the module.
</td></tr>
<tr>
<td> Order
</td>
<td> Enter a number to specify the order of the module within the application menu. For example, an entry of <b>100</b> would place this module before one with an <b>Order</b> entry of <b>200</b>.
</td></tr>
<tr>
<td> Application menu
</td>
<td> Select the application menu where you want this module to appear. By default, this field displays the application menu that you opened to create the module.
</td></tr>
<tr>
<td> Table
</td>
<td> Do not select a table.
</td></tr>
<tr>
<td> Updated
</td>
<td> Displays the date and time when the module record is updated.
</td></tr>
<tr>
<td> Roles
</td>
<td> Select the roles that are permitted to access this module. If this field is blank, all roles can access the module.
</td></tr>
<tr>
<td> Active
</td>
<td> Select the check box to activate this module. Only active modules appear in the application menu.
</td></tr>
<tr>
<td> Filter
</td>
<td> Do not add a filter condition.
</td></tr>
<tr>
<td> Path
</td>
<td> Enter <b>map/</b> followed by the <a href="index.php%3Ftitle=Unique_Record_Identifier.html#Getting_the_sys_id" title="Unique Record Identifier">sys_id</a> of the map page. For example: <b>map/c86c5feac0a80a6600706f0102968196</b>
</td></tr></table>
<h1><span class="mw-headline" id="Scripting_for_Map_Pages"><span class="mw-headline-number">4</span> Scripting for Map Pages</span></h1>
<p>In the <b>Script</b> field on the Map Page form, use the available attributes or custom code to define map characteristics, such as marker appearance for items on the map, what information to display when someone clicks a marker, and more. You can use the <tt>isMobile</tt> variable to set custom behavior for the smartphone view of the map (starting with the Eureka release). 
</p>
<h2><span class="mw-headline" id="Scripting_Map_Item_Attributes"><span class="mw-headline-number">4.1</span> Scripting Map Item Attributes</span></h2>
<p>To create an item on the map, use the <tt>map.addItem(glideRecord)</tt> method. You must pass a valid GlideRecord to <tt>addItem()</tt>. The following attributes are available. 
</p>
<table class="standard">
<tr>
<th> Attribute
</th>
<th> Description
</th></tr>
<tr>
<td>  name
</td>
<td>  Name used for identification.
</td></tr>
<tr>
<td>  latitude
</td>
<td>  Latitude is not necessary if you define an address.
</td></tr>
<tr>
<td>  longitude
</td>
<td>  Longitude is not necessary if you define an address.
</td></tr>
<tr>
<td>  icon
</td>
<td>  URL of the icon to display for the marker. The default Google marker is used if a custom icon is not specified.
</td></tr>
<tr>
<td>  icon_width
</td>
<td>  Width of the icon. The default is 32.
</td></tr>
<tr>
<td>  icon_height
</td>
<td>  Height of the icon. The default is 32.
</td></tr>
<tr>
<td>  table_name
</td>
<td>  Table whose records display when the marker icon is clicked. Used in conjunction with the <tt>sys_id</tt> attribute.
</td></tr>
<tr>
<td>  sys_id
</td>
<td>  Sys_id of the record that will display when the marker icon is clicked. Used in conjunction with the <tt>table_name</tt> attribute.
</td></tr>
<tr>
<td>  view
</td>
<td>  View of the form displayed in the dialog box when the marker icon is clicked.
</td></tr>
<tr>
<td>  dialog_title
</td>
<td>  Title of the dialog box containing the record information.
</td></tr>
<tr>
<td>  html
</td>
<td>  Arbitrary HTML code for the pop-up window. If used, this value overrides the dialog box.
</td></tr>
<tr>
<td>  marker_label
</td>
<td>  Optional marker icon label text. For an example, see <a href="index.php%3Ftitle=Using_Map_Pages&amp;oldid=251000.html#Marker_Label_Sample">Marker Label Sample</a>.
</td></tr>
<tr>
<td>  label_offset_left
</td>
<td>  Optional attribute that is used with <tt>marker_label</tt> to define the horizontal position of the marker label. The default is 0.
</td></tr>
<tr>
<td>  label_offset_top
</td>
<td>  Optional attribute that is used with <tt>marker_label</tt> to define the vertical position of the marker label. The default is 0.
</td></tr></table>
<h2><span class="mw-headline" id="Scripting_Custom_Behavior_for_Smartphone_Interfaces"><span class="mw-headline-number">4.2</span> Scripting Custom Behavior for Smartphone Interfaces</span></h2>
<p>If you plan to access the map page from a smartphone, you may want to set custom smartphone interface behavior using the <tt>isMobile</tt> variable. For example, you might set different values for the <tt>icon_width</tt> and <tt>icon_height</tt> attributes when <tt>isMobile</tt> is true.
</p>
<h2><span class="mw-headline" id="Sample_Scripts"><span class="mw-headline-number">4.3</span> Sample Scripts</span></h2>
<h3><span class="mw-headline" id="Basic_Sample"><span class="mw-headline-number">4.3.1</span> Basic Sample</span></h3>
<p>Display all active, critical incident locations. 
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="c1">//setup new GlideRecord query on the incident table</span>
<span class="kd">var</span> <span class="nx">gr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GlideRecord</span><span class="p">(</span><span class="s2">&quot;incident&quot;</span><span class="p">);</span>
<span class="c1">//add condition for priority 1</span>
<span class="nx">gr</span><span class="p">.</span><span class="nx">addQuery</span><span class="p">(</span><span class="s1">&#39;priority&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">);</span>
<span class="c1">//add condition for active incidents</span>
<span class="nx">gr</span><span class="p">.</span><span class="nx">addActiveQuery</span><span class="p">();</span>
<span class="c1">//execute the query</span>
<span class="nx">gr</span><span class="p">.</span><span class="nx">query</span><span class="p">();</span>

<span class="c1">//loop through the list of incidents returned by the query</span>
<span class="k">while</span> <span class="p">(</span><span class="nx">gr</span><span class="p">.</span><span class="nx">next</span><span class="p">())</span> <span class="p">{</span>

 <span class="c1">//create a new map item to display - linked to the current incident record</span>
 <span class="kd">var</span> <span class="nx">item</span> <span class="o">=</span> <span class="nx">map</span><span class="p">.</span><span class="nx">addItem</span><span class="p">(</span><span class="nx">gr</span><span class="p">);</span>
 <span class="c1">//add the latitude value from the incident&#39;s location</span>
 <span class="nx">item</span><span class="p">.</span><span class="nx">latitude</span> <span class="o">=</span> <span class="nx">gr</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">latitude</span><span class="p">;</span>
 <span class="c1">//add the longitude value from the incident&#39;s location</span>
 <span class="nx">item</span><span class="p">.</span><span class="nx">longitude</span> <span class="o">=</span> <span class="nx">gr</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">longitude</span><span class="p">;</span>
 <span class="c1">//add the incident number to the dialog title</span>
 <span class="nx">item</span><span class="p">.</span><span class="nx">dialog_title</span> <span class="o">=</span> <span class="nx">gr</span><span class="p">.</span><span class="nx">getDisplayValue</span><span class="p">();</span>
 <span class="c1">//link to the icon image</span>
 <span class="nx">item</span><span class="p">.</span><span class="nx">icon</span> <span class="o">=</span> <span class="s2">&quot;http://maps.google.com/mapfiles/kml/pal3/icon51.png&quot;</span><span class="p">;</span>
 <span class="c1">//set the icon size</span>
 <span class="nx">item</span><span class="p">.</span><span class="nx">icon_width</span> <span class="o">=</span> <span class="s2">&quot;16&quot;</span><span class="p">;</span>
 <span class="nx">item</span><span class="p">.</span><span class="nx">icon_height</span> <span class="o">=</span> <span class="s2">&quot;16&quot;</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<h3><span class="mw-headline" id="Basic_Sample_-_isMobile"><span class="mw-headline-number">4.3.2</span> Basic Sample - isMobile</span></h3>
<p>Display all active, critical incident locations with custom settings for smartphone users. The <tt>isMobile</tt> variable is available starting with the Eureka release.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="c1">//setup new GlideRecord query on the incident table</span>
<span class="kd">var</span> <span class="nx">gr</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GlideRecord</span><span class="p">(</span><span class="s2">&quot;incident&quot;</span><span class="p">);</span>
<span class="c1">//add condition for priority 1</span>
<span class="nx">gr</span><span class="p">.</span><span class="nx">addQuery</span><span class="p">(</span><span class="s1">&#39;priority&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">);</span>
<span class="c1">//add condition for active incidents</span>
<span class="nx">gr</span><span class="p">.</span><span class="nx">addActiveQuery</span><span class="p">();</span>
<span class="c1">//execute the query</span>
<span class="nx">gr</span><span class="p">.</span><span class="nx">query</span><span class="p">();</span>
 
<span class="c1">//loop through the list of incidents returned by the query</span>
<span class="k">while</span> <span class="p">(</span><span class="nx">gr</span><span class="p">.</span><span class="nx">next</span><span class="p">())</span> <span class="p">{</span>
 
 <span class="c1">//create a new map item to display - linked to the current incident record</span>
 <span class="kd">var</span> <span class="nx">item</span> <span class="o">=</span> <span class="nx">map</span><span class="p">.</span><span class="nx">addItem</span><span class="p">(</span><span class="nx">gr</span><span class="p">);</span>
 <span class="c1">//add the latitude value from the incident&#39;s location</span>
 <span class="nx">item</span><span class="p">.</span><span class="nx">latitude</span> <span class="o">=</span> <span class="nx">gr</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">latitude</span><span class="p">;</span>
 <span class="c1">//add the longitude value from the incident&#39;s location</span>
 <span class="nx">item</span><span class="p">.</span><span class="nx">longitude</span> <span class="o">=</span> <span class="nx">gr</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">longitude</span><span class="p">;</span>
 <span class="c1">//add the incident number to the dialog title</span>
 <span class="nx">item</span><span class="p">.</span><span class="nx">dialog_title</span> <span class="o">=</span> <span class="nx">gr</span><span class="p">.</span><span class="nx">getDisplayValue</span><span class="p">();</span>
 <span class="c1">//link to the icon image</span>
 <span class="nx">item</span><span class="p">.</span><span class="nx">icon</span> <span class="o">=</span> <span class="s2">&quot;http://maps.google.com/mapfiles/kml/pal3/icon51.png&quot;</span><span class="p">;</span>
 
 <span class="c1">//set the icon size (use smaller icons for smartphone users)</span>
 <span class="k">if</span> <span class="p">(</span><span class="nx">isMobile</span><span class="p">)</span> <span class="p">{</span>
   <span class="nx">item</span><span class="p">.</span><span class="nx">icon_width</span> <span class="o">=</span> <span class="s2">&quot;12&quot;</span><span class="p">;</span>
   <span class="nx">item</span><span class="p">.</span><span class="nx">icon_height</span> <span class="o">=</span> <span class="s2">&quot;12&quot;</span><span class="p">;</span>
 <span class="p">}</span>
 <span class="k">else</span> <span class="p">{</span> 
   <span class="nx">item</span><span class="p">.</span><span class="nx">icon_width</span> <span class="o">=</span> <span class="s2">&quot;16&quot;</span><span class="p">;</span>
   <span class="nx">item</span><span class="p">.</span><span class="nx">icon_height</span> <span class="o">=</span> <span class="s2">&quot;16&quot;</span><span class="p">;</span>
 <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<h3><span class="mw-headline" id="Advanced_Sample"><span class="mw-headline-number">4.3.3</span> Advanced Sample</span></h3>
<p>Display the number of open incidents by location. This script varies the size of the icon based on the number of open incidents for the location. Using the <tt>html</tt> parameter, it also displays the location name and number of incidents, as well as a link to the list of related incidents. 
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="c1">//get the instances url so we can link back to it</span>
<span class="kd">var</span> <span class="nx">uri</span> <span class="o">=</span> <span class="nx">gs</span><span class="p">.</span><span class="nx">getProperty</span><span class="p">(</span><span class="s2">&quot;glide.servlet.uri&quot;</span><span class="p">);</span>
<span class="c1">//create an aggregate query on the incident table</span>
<span class="kd">var</span> <span class="nx">count</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GlideAggregate</span><span class="p">(</span><span class="s1">&#39;incident&#39;</span><span class="p">);</span>
<span class="c1">//set condition for active incidents</span>
<span class="nx">count</span><span class="p">.</span><span class="nx">addQuery</span><span class="p">(</span><span class="s1">&#39;active&#39;</span><span class="p">,</span> <span class="s1">&#39;true&#39;</span><span class="p">);</span>
<span class="c1">//set aggregate field to location to get count by location</span>
<span class="nx">count</span><span class="p">.</span><span class="nx">addAggregate</span><span class="p">(</span><span class="s1">&#39;COUNT&#39;</span><span class="p">,</span> <span class="s1">&#39;location&#39;</span><span class="p">);</span>
<span class="c1">//execute the query</span>
<span class="nx">count</span><span class="p">.</span><span class="nx">query</span><span class="p">();</span>

<span class="c1">//loop through the results</span>
<span class="k">while</span> <span class="p">(</span><span class="nx">count</span><span class="p">.</span><span class="nx">next</span><span class="p">())</span> <span class="p">{</span>

 <span class="c1">//get the current record&#39;s location</span>
 <span class="kd">var</span> <span class="nx">loc</span> <span class="o">=</span> <span class="nx">count</span><span class="p">.</span><span class="nx">location</span><span class="p">;</span>
 <span class="c1">//get the count of incidents for this location</span>
 <span class="kd">var</span> <span class="nx">locCount</span> <span class="o">=</span> <span class="nx">count</span><span class="p">.</span><span class="nx">getAggregate</span><span class="p">(</span><span class="s1">&#39;COUNT&#39;</span><span class="p">,</span> <span class="s1">&#39;location&#39;</span><span class="p">);</span>
 <span class="c1">//only display location is there are active incidents</span>
 <span class="k">if</span> <span class="p">(</span><span class="nx">locCount</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
 <span class="c1">//create new new map item for this location</span>
 <span class="kd">var</span> <span class="nx">item</span> <span class="o">=</span> <span class="nx">map</span><span class="p">.</span><span class="nx">addItem</span><span class="p">(</span><span class="nx">count</span><span class="p">);</span>
 <span class="c1">//set lat/long from the location record</span>
 <span class="nx">item</span><span class="p">.</span><span class="nx">latitude</span> <span class="o">=</span> <span class="nx">loc</span><span class="p">.</span><span class="nx">latitude</span><span class="p">;</span>
 <span class="nx">item</span><span class="p">.</span><span class="nx">longitude</span> <span class="o">=</span> <span class="nx">loc</span><span class="p">.</span><span class="nx">longitude</span><span class="p">;</span>
 <span class="c1">//build the link to the list of incidents for the location</span>
 <span class="kd">var</span> <span class="nx">link</span> <span class="o">=</span> <span class="s1">&#39;href=&#39;</span> <span class="o">+</span> <span class="nx">uri</span> <span class="o">+</span> <span class="s1">&#39;incident_list.do?sysparm_query=active%3Dtrue^location%3D&#39;</span> <span class="o">+</span> <span class="nx">loc</span><span class="p">;</span>
 <span class="c1">//build the html value to be displayed when you click the map icon</span>
 <span class="nx">item</span><span class="p">.</span><span class="nx">html</span><span class="o">=</span><span class="s1">&#39;&lt;a &#39;</span> <span class="o">+</span> <span class="nx">link</span> <span class="o">+</span> <span class="s1">&#39;&gt;&#39;</span> <span class="o">+</span> <span class="nx">loc</span><span class="p">.</span><span class="nx">getDisplayValue</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39; (&#39;</span> <span class="o">+</span> <span class="nx">locCount</span> <span class="o">+</span> <span class="s1">&#39;)&lt;/a&gt;&#39;</span><span class="p">;</span>
 <span class="c1">//link to the icon image</span>
 <span class="nx">item</span><span class="p">.</span><span class="nx">icon</span> <span class="o">=</span> <span class="s2">&quot;http://maps.google.com/mapfiles/kml/pal3/icon51.png&quot;</span><span class="p">;</span>
 <span class="c1">//set the size of the icon based on the number of active incidents</span>
 <span class="k">if</span> <span class="p">(</span><span class="nx">locCount</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">)</span> <span class="p">{</span>
 <span class="nx">item</span><span class="p">.</span><span class="nx">icon_width</span> <span class="o">=</span> <span class="s2">&quot;12&quot;</span><span class="p">;</span>
 <span class="nx">item</span><span class="p">.</span><span class="nx">icon_height</span> <span class="o">=</span> <span class="s2">&quot;12&quot;</span><span class="p">;</span>
 <span class="p">}</span>
 <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">locCount</span> <span class="o">&lt;</span> <span class="mi">15</span><span class="p">)</span> <span class="p">{</span>
 <span class="nx">item</span><span class="p">.</span><span class="nx">icon_width</span> <span class="o">=</span> <span class="s2">&quot;16&quot;</span><span class="p">;</span>
 <span class="nx">item</span><span class="p">.</span><span class="nx">icon_height</span> <span class="o">=</span> <span class="s2">&quot;16&quot;</span><span class="p">;</span>
 <span class="p">}</span>
 <span class="k">else</span> <span class="p">{</span>
 <span class="nx">item</span><span class="p">.</span><span class="nx">icon_width</span> <span class="o">=</span> <span class="s2">&quot;32&quot;</span><span class="p">;</span>
 <span class="nx">item</span><span class="p">.</span><span class="nx">icon_height</span> <span class="o">=</span> <span class="s2">&quot;32&quot;</span><span class="p">;</span>
 <span class="p">}</span>
 <span class="p">}</span>
<span class="p">}</span>
</pre></div> 
<h3><span class="mw-headline" id="Marker_Label_Sample"><span class="mw-headline-number">4.3.4</span> Marker Label Sample</span></h3>
<p>Marker labels allow you to add dynamic text to markers. This example displays the active incident count at each location. 
</p><p><a href="index.php%3Ftitle=File:Map_marker_labels.jpg.html" class="image" title="Image:Map_marker_labels.jpg"><img alt="Image:Map_marker_labels.jpg" src="images/2/22/Map_marker_labels.jpg" width="330" height="163" /></a> 
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="c1">//get the instances url so we can link back to it</span>
<span class="kd">var</span> <span class="nx">uri</span> <span class="o">=</span> <span class="nx">gs</span><span class="p">.</span><span class="nx">getProperty</span><span class="p">(</span><span class="s2">&quot;glide.servlet.uri&quot;</span><span class="p">);</span>
<span class="c1">//create an aggregate query on the incident table</span>
<span class="kd">var</span> <span class="nx">count</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GlideAggregate</span><span class="p">(</span><span class="s1">&#39;incident&#39;</span><span class="p">);</span>
<span class="c1">//set condition for active incidents</span>
<span class="nx">count</span><span class="p">.</span><span class="nx">addQuery</span><span class="p">(</span><span class="s1">&#39;active&#39;</span><span class="p">,</span> <span class="s1">&#39;true&#39;</span><span class="p">);</span>
<span class="c1">//set aggregate field to location to get count by location</span>
<span class="nx">count</span><span class="p">.</span><span class="nx">addAggregate</span><span class="p">(</span><span class="s1">&#39;COUNT&#39;</span><span class="p">,</span> <span class="s1">&#39;location&#39;</span><span class="p">);</span>
<span class="c1">//execute the query</span>
<span class="nx">count</span><span class="p">.</span><span class="nx">query</span><span class="p">();</span>

<span class="c1">//loop through the results</span>
<span class="k">while</span> <span class="p">(</span><span class="nx">count</span><span class="p">.</span><span class="nx">next</span><span class="p">())</span> <span class="p">{</span>

 <span class="c1">//get the current record&#39;s location</span>
 <span class="kd">var</span> <span class="nx">loc</span> <span class="o">=</span> <span class="nx">count</span><span class="p">.</span><span class="nx">location</span><span class="p">;</span>
 <span class="c1">//get the count of incidents for this location</span>
 <span class="kd">var</span> <span class="nx">locCount</span> <span class="o">=</span> <span class="nx">count</span><span class="p">.</span><span class="nx">getAggregate</span><span class="p">(</span><span class="s1">&#39;COUNT&#39;</span><span class="p">,</span> <span class="s1">&#39;location&#39;</span><span class="p">);</span>
 <span class="c1">//only display location is there are active incidents</span>
 <span class="k">if</span> <span class="p">(</span><span class="nx">locCount</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
 <span class="c1">//create new new map item for this location</span>
 <span class="kd">var</span> <span class="nx">item</span> <span class="o">=</span> <span class="nx">map</span><span class="p">.</span><span class="nx">addItem</span><span class="p">(</span><span class="nx">count</span><span class="p">);</span>
 <span class="c1">//set lat/long from the location record</span>
 <span class="nx">item</span><span class="p">.</span><span class="nx">latitude</span> <span class="o">=</span> <span class="nx">loc</span><span class="p">.</span><span class="nx">latitude</span><span class="p">;</span>
 <span class="nx">item</span><span class="p">.</span><span class="nx">longitude</span> <span class="o">=</span> <span class="nx">loc</span><span class="p">.</span><span class="nx">longitude</span><span class="p">;</span> 
 
 <span class="c1">//create a marker label with the count</span>
 <span class="nx">item</span><span class="p">.</span><span class="nx">marker_label</span> <span class="o">=</span> <span class="nx">locCount</span><span class="p">;</span>
 <span class="c1">//define label offset for proper position</span>
 <span class="nx">item</span><span class="p">.</span><span class="nx">label_offset_left</span> <span class="o">=</span> <span class="o">-</span><span class="mi">4</span><span class="p">;</span>
 <span class="nx">item</span><span class="p">.</span><span class="nx">label_offset_top</span> <span class="o">=</span> <span class="o">-</span><span class="mi">20</span><span class="p">;</span>
 
 <span class="c1">//option to define table and record for label hyperlink</span>
 <span class="c1">//setting table and sys_id will override the use of html parameter</span>
 <span class="c1">//item.table = &#39;cmn_location&#39;;</span>
 <span class="c1">//item.sys_id = loc;</span>
 
 <span class="c1">//build the link to the list of incidents for the location</span>
 <span class="kd">var</span> <span class="nx">link</span> <span class="o">=</span> <span class="s1">&#39;href=&#39;</span> <span class="o">+</span> <span class="nx">uri</span> <span class="o">+</span> <span class="s1">&#39;incident_list.do?sysparm_query=active%3Dtrue^location%3D&#39;</span> <span class="o">+</span> <span class="nx">loc</span><span class="p">;</span>
 <span class="c1">//build the html value to be displayed when you click the map icon</span>
 <span class="nx">item</span><span class="p">.</span><span class="nx">html</span><span class="o">=</span><span class="s1">&#39;&lt;a &#39;</span> <span class="o">+</span> <span class="nx">link</span> <span class="o">+</span> <span class="s1">&#39;&gt;&#39;</span> <span class="o">+</span> <span class="nx">loc</span><span class="p">.</span><span class="nx">getDisplayValue</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39; (&#39;</span> <span class="o">+</span> <span class="nx">locCount</span> <span class="o">+</span> <span class="s1">&#39;)&lt;/a&gt;&#39;</span><span class="p">;</span>
 
 <span class="c1">//link to the icon image</span>
 <span class="nx">item</span><span class="p">.</span><span class="nx">icon</span> <span class="o">=</span> <span class="s2">&quot;images/red_marker.png&quot;</span><span class="p">;</span>
 <span class="c1">//set the size of the icon based on the number of active incidents</span>
 <span class="nx">item</span><span class="p">.</span><span class="nx">icon_width</span> <span class="o">=</span> <span class="mi">24</span><span class="p">;</span>
 <span class="nx">item</span><span class="p">.</span><span class="nx">icon_height</span> <span class="o">=</span> <span class="mi">24</span><span class="p">;</span>

 <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<!-- 
NewPP limit report
Cached time: 20171201063802
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.389 seconds
Real time usage: 1.861 seconds
Preprocessor visited node count: 138/1000000
Preprocessor generated node count: 382/1000000
Post‐expand include size: 3210/2097152 bytes
Template argument size: 1135/2097152 bytes
Highest expansion depth: 5/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%   99.684      1 - -total
 90.76%   90.470      1 - Template:Navigation_and_UI_Configuration
 84.26%   83.990      1 - Template:Topic
  8.80%    8.768      1 - Embedded:Navigation_and_UI_Configuration
  6.87%    6.852      3 - Template:Note
  5.33%    5.317      2 - Template:T
-->

<!-- Saved in parser cache with key wikidb:pcache:idhash:3816-0!*!0!1!en!5!* and timestamp 20171201063800 and revision id 251000
 -->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="index.php%3Ftitle=Using_Map_Pages&amp;oldid=251000.html">http://wiki.servicenow.com/index.php?title=Using_Map_Pages&amp;oldid=251000</a>"</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="index.php%3Ftitle=Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="index.php%3Ftitle=Special:Book&amp;bookcmd=add_category&amp;cattitle=Navigation+and+UI+Configuration.html" title="Category:Navigation and UI Configuration">Navigation and UI Configuration</a></li></ul></div><br /><hr /><a href="index.php%3Ftitle=Category:Contents.html" title="Category:Contents">Contents</a> &gt; <a href="index.php%3Ftitle=Special:Book&amp;bookcmd=add_category&amp;cattitle=Administer.html" title="Category:Administer">Administer</a> &gt; <a href="index.php%3Ftitle=Special:Book&amp;bookcmd=add_category&amp;cattitle=Core+Configuration.html" title="Category:Core Configuration">Core Configuration</a> &gt; <a href="index.php%3Ftitle=Special:Book&amp;bookcmd=add_category&amp;cattitle=Navigation+and+UI+Configuration.html" title="Category:Navigation and UI Configuration">Navigation and UI Configuration</a></div>					<!-- end content -->
					<div id='mw-data-after-content'>
	<div id="rating_3816"><div class="voting-title">Was this article helpful?</div><div class="voting-box"><div class="vote-up " data-vote-id="3816" data-vote-the-vote="5" data-vote-id="3816" data-vote-action="5" data-vote-rating="5.00" data-vote-voted="0" id="rating_3816_5"><span>Yes, I found what I needed</span></div><div class="vote-down " data-vote-id="3816" data-vote-the-vote="1" data-vote-id="3816" data-vote-action="5" data-vote-rating="5.00" data-vote-voted="0" id="rating_3816_1"><span>No, I need more assistance</span></div></div></div>
</div>
					<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div id="column-one">
					<div id="p-cactions" class="portlet" role="navigation">
			<h5>Views</h5>

			<div class="pBody">
				<ul>
				<li id="ca-nstab-main" class="selected"><a href="index.php%3Ftitle=Using_Map_Pages.html" title="View the content page [c]" accesskey="c">Page</a></li>
				</ul>
							</div>
		</div>
				<div class="portlet" id="p-personal" role="navigation">
				<h5>Personal tools</h5>

				<div class="pBody">
					<ul>
													<li id="pt-createaccount"><a href="http://wiki.servicenow.com/index.php?title=Special:CreateAccount&amp;returnto=Using+Map+Pages&amp;returntoquery=oldid%3D251000" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li>
													<li id="pt-login"><a href="http://wiki.servicenow.com/index.php?title=Special:UserLogin&amp;returnto=Using+Map+Pages&amp;returntoquery=oldid%3D251000" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
											</ul>
				</div>
			</div>
			<div class="portlet" id="p-logo" role="banner">
				<a href="index.html" class="mw-wiki-logo" title="Visit the main page"></a>
			</div>
				<div class="generated-sidebar portlet" id="p-" role="navigation">
		<h3></h3>
		<div class='pBody'>
			<div class="portlet">
<h5><span class="mw-headline" id="Categories">Categories</span></h5>
<div class="pBody">
<div class="sidebarcat">
<ul><li><a href="index.php%3Ftitle=Get_Started.html" title="Get Started">Get Started</a></li>
<li><a href="index.php%3Ftitle=Special:Book&amp;bookcmd=remove_article&amp;arttitle=Use+ServiceNow&amp;oldid=0.html" title="Use ServiceNow">Use</a></li>
<li><a href="index.php%3Ftitle=Administer_ServiceNow.html" title="Administer ServiceNow">Administer</a></li>
<li><a href="index.php%3Ftitle=Script_in_ServiceNow.html" title="Script in ServiceNow">Script</a></li>
<li><a href="index.php%3Ftitle=Build.html" title="Build">Build</a></li>
<li><a href="index.php%3Ftitle=Deliver_ServiceNow.html" title="Deliver ServiceNow">Deliver</a></li>
<li><a href="index.php%3Ftitle=Integration_Overview.html" title="Integration Overview">Integrate</a></li>
<li><a href="index.php%3Ftitle=Release_Notes.html" title="Release Notes">Release Notes</a></li>
<li><a href="index.php%3Ftitle=Special:Book&amp;bookcmd=remove_article&amp;arttitle=Customer+Support&amp;oldid=0.html" title="Customer Support">Customer Support</a></li>
<li><a href="index.php%3Ftitle=Books.html" title="Books">Books</a></li>
<li><a href="index.php%3Ftitle=Special:Book&amp;bookcmd=remove_article&amp;arttitle=Video+Tutorials&amp;oldid=0.html" title="Video Tutorials">Video Tutorials</a></li>
<li><a target="_blank" rel="nofollow noreferrer noopener" class="external text" href="http://express.servicenow.com/support/">ServiceNow Express</a></li></ul>
</div>
</div>
</div>
<div class="portlet">
<h5><span class="mw-headline" id="Resources">Resources</span></h5>
<div class="pBody">
<ul><li><a href="index.php%3Ftitle=Category:Contents.html" title="Category:Contents">Site Map &#8211; Tree View</a><br /></li>
<li><a href="index.php%3Ftitle=Special:RecentChanges.html" title="Special:RecentChanges">Recent Changes</a><br /></li>
<li><a href="index.php%3Ftitle=Glossary_of_Terms.html" title="Glossary of Terms">Glossary</a><br /></li>
<li><a href="index.php%3Ftitle=Help:Getting_Started_on_the_ServiceNow_Wiki.html" title="Help:Getting Started on the ServiceNow Wiki">Wiki Help</a></li></ul>
</div>
</div>
<div class="portlet">
<h5><span class="mw-headline" id="Print">Print</span></h5>
<div class="pBody">
<ul><li><a target="_blank" rel="nofollow noreferrer noopener" class="external text" href="index.php%3Ftitle=Special:Book&amp;bookcmd=book_creator.html">Create a Book</a></li>
<li><a href="index.php%3Ftitle=Help:Books.html" title="Help:Books">Book Help</a></li>
<li><a target="_blank" rel="nofollow noreferrer noopener" class="external text" href="index.php%3Ftitle=Special:Book%252Frender_article%252F&amp;arttitle=Using_Map_Pages.html">Download Page as PDF</a></li>
<li><a target="_blank" rel="nofollow noreferrer noopener" class="external text" href="index.php%3Ftitle=Using_Map_Pages&amp;printable=yes.html">Printable Version</a></li></ul>
</div>
</div>
		</div>
		</div>
		<div class="generated-sidebar portlet" id="p-coll-print_export" role="navigation">
		<h3>Print/export</h3>
		<div class='pBody'>
							<ul>
											<li id="coll-book_creator_disable"><a href="index.php%3Ftitle=Special:Book&amp;bookcmd=stop_book_creator&amp;referer=Using+Map+Pages.html">Disable book creator</a></li>
											<li id="coll-download-as-rl"><a href="index.php%3Ftitle=Special:Book&amp;bookcmd=render_article&amp;arttitle=Using+Map+Pages&amp;returnto=Using+Map+Pages&amp;oldid=251000&amp;writer=rl.html">Download as PDF</a></li>
											<li id="t-print"><a href="index.php%3Ftitle=Using_Map_Pages&amp;printable=yes.html" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
									</ul>
					</div>
		</div>
			<div id="p-search" class="portlet" role="search">
			<h3><label for="searchInput">Search</label></h3>

			<div id="searchBody" class="pBody">
				<form action="http://wiki.servicenow.com/index.php" id="searchform">
					<input type='hidden' name="title" value="Special:Search"/>
					<input type="search" name="search" placeholder="Search" title="Search ServiceNow Wiki [f]" accesskey="f" id="searchInput"/>
					<input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchGoButton" class="searchButton"/>&#160;
						<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton"/>
				</form>

							</div>
		</div>
			<div class="portlet" id="p-tb" role="navigation">
			<h3>Toolbox</h3>

			<div class="pBody">
				<ul>
											<li id="t-whatlinkshere"><a href="index.php%3Ftitle=Special:WhatLinksHere%252FUsing_Map_Pages.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here?</a></li>
											<li id="t-recentchangeslinked"><a href="http://wiki.servicenow.com/index.php?title=Special:RecentChangesLinked/Using_Map_Pages" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
											<li id="t-specialpages"><a href="index.php%3Ftitle=Special:SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
											<li id="t-permalink"><a href="index.php%3Ftitle=Using_Map_Pages&amp;oldid=251000.html" title="Permanent link to this revision of the page">Permanent link</a></li>
											<li id="t-info"><a href="index.php%3Ftitle=Using_Map_Pages&amp;action=info.html" title="More information about this page">Page information</a></li>
									</ul>
							</div>
		</div>
			</div><!-- end of the left (by default at least) column -->
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
						<div id="f-poweredbyico">
									<a href="http://www.mediawiki.org/"><img src="resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a>
							</div>
					<ul id="f-list">
									<li id="lastmod"> This page was last modified 16:33, 13 September 2017.</li>
									<li id="privacy"><a href="index.php%3Ftitle=ServiceNow_Wiki:Privacy_policy.html" title="ServiceNow Wiki:Privacy policy">Privacy policy</a></li>
									<li id="about"><a href="index.php%3Ftitle=ServiceNow_Wiki:About.html" title="ServiceNow Wiki:About">About ServiceNow Wiki</a></li>
									<li id="disclaimer"><a href="index.php%3Ftitle=ServiceNow_Wiki:General_disclaimer.html" title="ServiceNow Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
		</div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.loader.state({"user":"ready","user.groups":"ready"});mw.loader.load(["ext.treeandmenu","mediawiki.toc","mediawiki.action.view.postEdit","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.collection.bookcreator"]);});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":1256});});</script></body></html>
