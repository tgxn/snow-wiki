<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8"/>
<title>Setting up the LDAP Import Map - ServiceNow Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Setting_up_the_LDAP_Import_Map","wgTitle":"Setting up the LDAP Import Map","wgCurRevisionId":250890,"wgRevisionId":250890,"wgArticleId":3993,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["LDAP"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Setting_up_the_LDAP_Import_Map","wgRelevantArticleId":3993,"wgRequestId":"21743eefa96b3d8af279d9e8","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgCategoryTreePageCategoryOptions":"{\"mode\":20,\"hideprefix\":20,\"showcount\":true,\"namespaces\":false}"});mw.loader.implement("user.options",function($,jQuery,require,module){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function ( $, jQuery, require, module ) {
mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});/*@nomin*/;

});mw.loader.load(["mediawiki.page.startup","ext.voteNY"]);});</script>
<link rel="stylesheet" href="http://wiki.servicenow.com/load.php?debug=false&amp;lang=en&amp;modules=ext.pygments%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.content.externallinks%7Cmediawiki.skinning.interface%7Cskins.monobook.styles&amp;only=styles&amp;skin=monobook"/>
<!--[if IE 6]><link rel="stylesheet" href="/skins/MonoBook/IE60Fixes.css?303" media="screen"/><![endif]--><!--[if IE 7]><link rel="stylesheet" href="/skins/MonoBook/IE70Fixes.css?303" media="screen"/><![endif]-->
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=monobook.css"/>
<script async="" src="load.php%3Fdebug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=monobook"></script>
<meta name="generator" content="MediaWiki 1.27.3"/>
<meta name="robots" content="index,follow,noarchive"/>
<meta name="copyright" content="ServiceNow"/>
<meta http-equiv="content-language" content="en"/>
<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
<meta name="modified" content="20170911183319"/>
<meta name="canonical" content="//wiki.servicenow.com/index.php?title=Setting_up_the_LDAP_Import_Map"/>
<meta name="author" content="ServiceNow"/>
<meta name="twitter:card" content="@NOWsupport"/>
<meta name="twitter:title" content="Setting up the LDAP Import Map"/>
<meta name="twitter:creator" content="@NOWsupport"/>
<meta name="twitter:domain" content="servicenow.com"/>
<meta name="keywords" content="LDAP"/>
<meta name="category" content="LDAP"/>
<link rel="shortcut icon" href="favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php" title="ServiceNow Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="api.php%3Faction=rsd"/>
<link rel="alternate" type="application/atom+xml" title="ServiceNow Wiki Atom feed" href="index.php%3Ftitle=Special:RecentChanges&amp;feed=atom.html"/>
<script type="text/javascript">window.tamBaseUrl='/extensions/TreeAndMenu'</script>

<script type="text/javascript" src="extensions/TreeAndMenu/dtree.js"></script>

<link rel="canonical" href="index.php%3Ftitle=Setting_up_the_LDAP_Import_Map.html" />

	<meta property="og:title" content="ServiceNow Wiki:Setting up the LDAP Import Map"/>

	<meta property="og:type" content="article"/>

	<meta property="og:site_name" content="ServiceNow Wiki"/>

	<meta property="modified" content="20170911183319"/>

	<meta property="article:published_time" content="20170911183319"/>

	<meta property="article:modified_time" content="20170911183319"/>

	<meta property="article:author" content="ServiceNow"/>

	<meta property="article:tag" content="LDAP"/>

	<meta property="og:url" content="//wiki.servicenow.com/index.php?title=Setting_up_the_LDAP_Import_Map"/>

</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Setting_up_the_LDAP_Import_Map rootpage-Setting_up_the_LDAP_Import_Map skin-monobook action-view">
<div id="header">
	<div id="snc_top_toolbar" >
	<ul class="inline" id="sites">
		<li><a href="index.html">Wiki home</a></li>
		<li><a href="http://community.servicenow.com">Community</a></li>
		<li><a href="http://www.servicenow.com/services/training-and-certification.html">Training</a></li>
		<li><a href="https://www.servicenow.com/support.html">Support home</a></li>
		<li><a href="http://www.servicenow.com">Company home</a></li>
		<li><a href="http://info.servicenow.com/demonow/">Demo</a></li>
	</ul>

<!-- Start Adobe analytics staging -->
<script src="http://assets.adobedtm.com/43c21e31f00ba1c49c16c9c6a5acf67ef1e8dfa8/satelliteLib-c41330e93f48feef745e6ecb4b425db9d5da2dea.js"></script>

<!--Begin Google analytics -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-29210697-1']);
  _gaq.push(['_setDomainName', 'servicenow.com']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  _gaq.push(['_trackPageLoadTime']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<!-- End Google analytics, begin other analytics -->

<!--<script type="text/javascript" language="javascript">llactid=11051</script>
<script type="text/javascript" language="javascript" src="https://trackalyzer.com/trackalyze_secure.js"></script>
-->
<!--End analytics-->

	</div>
</div>
<div id="snc_toolbar" >
	<a href="index.html">
	<img src="https://wiki.service-now.com/images/CustomWikiLogoFixed.png" height="64px">
	</a>
<div id="googleSearchBox"> <!--Google Search box -->
<div id='cse-search-form' style='width: 100%;'>Loading</div>
<script src='http://www.google.com/jsapi' type='text/javascript'></script>


<script type='text/javascript'>

google.load('search', '1', {language: 'en', style: google.loader.themes.V2_DEFAULT, callback:loadCSE});

window.onhashchange = function() {
	var url = window.location.href;
	if(url.indexOf("gsc.q") == -1) //call only when not browsing search results.
	{
		resetUI();
	}
}

function resetUI() {
	//reset UI to standard layout. Hide search, restore page content/controls.
	var cactions = document.getElementById('p-cactions');
	var cont = document.getElementById('content');
	var sr = document.getElementById('cse');

	cactions.style.display = 'block';
	sr.style.display = 'none';
	cont.style.display = 'block';
};

function onSubmit() {
	//hide page elements when searching.
	var cactions = document.getElementById('p-cactions');
	cactions.style.display = 'none';
	var sr = document.getElementById('cse');
	sr.style.display = 'block';
	var cont = document.getElementById('content');
	cont.style.display = 'none';
};

function loadCSE() {
	var customSearchOptions = {};
	var orderByOptions = {};
	orderByOptions['keys'] = [{label: 'Relevance', key: ''} , {label: 'Date', key: 'date'}];
	customSearchOptions['enableOrderBy'] = true;
	customSearchOptions['orderByOptions'] = orderByOptions;

	var customSearchControl = new google.search.CustomSearchControl('005409823165138974380:bltnnmgfoek', customSearchOptions);
	customSearchControl.setResultSetSize(google.search.Search.FILTERED_CSE_RESULTSET);
	customSearchControl.setSearchCompleteCallback(this,onSubmit);//set onSubmit script to run when searching

	var options = new google.search.DrawOptions();
	options.setSearchFormRoot('cse-search-form');
	options.setAutoComplete(true);
	customSearchControl.draw('cse', options);
	var historyStarted = customSearchControl.startHistoryManagement();
	if(historyStarted) customSearchControl.setLinkTarget(google.search.Search.LINK_TARGET_SELF);
};

</script>

</div> <!--end Google search box-->
</div>

<div id="globalWrapper">
		<div id="column-content">
			<div id="cse"></div>
			<div id="content" class="mw-body" role="main">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">Setting up the LDAP Import Map</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="siteSub">From ServiceNow Wiki</div>
					<div id="contentSub"><!-- Text for discussion pages-->
<a href="index.html" title="Main Page">Home</a> &gt; <a href="index.php%3Ftitle=Integration_Overview.html" title="Integration Overview">Integrate</a> &gt; <a href="index.php%3Ftitle=External_Authentication_(Single_Sign-On_-_SSO).html" title="External Authentication (Single Sign-On - SSO)">Single Sign-On</a> &gt; <a href="index.php%3Ftitle=Special:Book&amp;bookcmd=remove_article&amp;arttitle=LDAP+Integration&amp;oldid=0.html" title="LDAP Integration">LDAP</a> &gt; Setting up the LDAP Import Map</div>
										<div id="jump-to-nav" class="mw-jump">Jump to: <a href="index.php%3Ftitle=Setting_up_the_LDAP_Import_Map.html#column-one">navigation</a>, <a href="index.php%3Ftitle=Setting_up_the_LDAP_Import_Map.html#searchInput">search</a></div>

					<!-- start content -->
					<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><table cellspacing="5" cellpadding="5" class="reproduce">

<tr>
<td scope="row" style="vertical-align:middle;"> <div class="floatleft"><a href="index.php%3Ftitle=File:Warning.gif.html" class="image" title="Note"><img alt="Note" src="images/thumb/c/c2/Warning.gif/16px-Warning.gif.png" width="16" height="16" srcset="/images/thumb/c/c2/Warning.gif/24px-Warning.gif.png 1.5x, /images/thumb/c/c2/Warning.gif/32px-Warning.gif.png 2x" /></a></div>
</td>
<td scope="row" style="vertical-align:top"> <b>Note:</b> <i>This article applies to Fuji and earlier releases. For more current information, see <a target="_blank" rel="nofollow noreferrer noopener" class="external text" href="https://docs.servicenow.com/bundle/jakarta-servicenow-platform/page/integrate/ldap/concept/c_LDAPImportMaps.html">LDAP Import Maps</a> at <a target="_blank" rel="nofollow noreferrer noopener" class="external free" href="http://docs.servicenow.com">http://docs.servicenow.com</a></i>
<p><b>The ServiceNow Wiki is no longer being updated. Visit <a target="_blank" rel="nofollow noreferrer noopener" class="external free" href="http://docs.servicenow.com">http://docs.servicenow.com</a> for the latest product documentation.</b>
</p>
</td></tr></table>
<p><br />
</p>
<div class="noprint">
<table class="topicbox">

<tr>
<th> <a href="index.php%3Ftitle=Special:Book&amp;bookcmd=remove_article&amp;arttitle=LDAP+Integration&amp;oldid=0.html" title="LDAP Integration">LDAP Integration</a>
</th></tr>
<tr>
<td>
<ul><li><a href="index.php%3Ftitle=LDAP_Integration_Setup.html" title="LDAP Integration Setup">LDAP Integration Setup</a> 
<ul><li><a href="index.php%3Ftitle=Getting_Started_with_LDAP_Integration.html" title="Getting Started with LDAP Integration">Getting Started with LDAP Integration</a></li>
<li><a href="index.php%3Ftitle=Uploading_a_Certificate.html" title="Uploading a Certificate">Uploading a Certificate</a></li>
<li><strong class="selflink">Setting Up the LDAP Transform Map</strong></li>
<li><a href="index.php%3Ftitle=Record_Creation_Options_During_an_LDAP_Transform.html" title="Record Creation Options During an LDAP Transform">Record Creation Options During an LDAP Transform</a></li>
<li><a href="index.php%3Ftitle=LDAP_Integration_via_MID_Server_Setup.html" title="LDAP Integration via MID Server Setup">Setting up LDAP integration via a MID Server</a></li></ul></li>
<li><a href="index.php%3Ftitle=LDAP_Integration_Troubleshooting.html" title="LDAP Integration Troubleshooting">LDAP Integration Troubleshooting</a>
<ul><li><a href="index.php%3Ftitle=LDAP_Error_Codes.html" title="LDAP Error Codes">LDAP Error Codes</a></li></ul></li>
<li><a href="index.php%3Ftitle=Active_Directory_Application_Mode_(ADAM).html" title="Active Directory Application Mode (ADAM)">Active Directory (AD) Topics</a>
<ul><li><a href="index.php%3Ftitle=Configuring_Microsoft_Active_Directory_for_SSL_Access.html" title="Configuring Microsoft Active Directory for SSL Access">Configuring Microsoft Active Directory for SSL Access</a></li>
<li><a href="index.php%3Ftitle=Using_ADAMSync_To_Populate_ADAM.html" title="Using ADAMSync To Populate ADAM">Using ADAMSync To Populate ADAM</a></li>
<li><a href="index.php%3Ftitle=LDAP_Using_Global_Catalog.html" title="LDAP Using Global Catalog">LDAP Using Global Catalog</a></li></ul></li>
<li><a href="index.php%3Ftitle=OpenLDAP_Minor_Schema_Modification.html" title="OpenLDAP Minor Schema Modification">OpenLDAP Minor Schema Modification</a></li>
<li><a href="index.php%3Ftitle=LDAP_Monitor.html" title="LDAP Monitor">LDAP Monitor</a></li></ul>
</td></tr>
<tr>
<th> Related Topics
</th></tr>
<tr>
<td>
<ul><li><a href="index.php%3Ftitle=Integration_Overview.html" title="Integration Overview">Integration Overview</a></li></ul>
</td></tr>
<tr>
<th> Get the Book
</th></tr>
<tr>
<td> <center><b><a href="index.php%3Ftitle=Book:LDAP.html" title="Book:LDAP"><img alt="Knowledge.gif" src="images/d/dd/Knowledge.gif" width="16" height="16" /></a> <a href="index.php%3Ftitle=Book:LDAP.html" title="Book:LDAP">Get the Book</a></b></center>
</td></tr></table>
</div>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="index.php%3Ftitle=Setting_up_the_LDAP_Import_Map.html#Overview"><span class="tocnumber">1</span> <span class="toctext">Overview</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="index.php%3Ftitle=Setting_up_the_LDAP_Import_Map.html#Setting_Up_a_Transform_Map_for_LDAP"><span class="tocnumber">2</span> <span class="toctext">Setting Up a Transform Map for LDAP</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="index.php%3Ftitle=Setting_up_the_LDAP_Import_Map.html#Differences_between_Transform_Maps_and_Legacy_Import_Maps"><span class="tocnumber">2.1</span> <span class="toctext">Differences between Transform Maps and Legacy Import Maps</span></a>
<ul>
<li class="toclevel-3 tocsection-4"><a href="index.php%3Ftitle=Setting_up_the_LDAP_Import_Map.html#Transitioning_from_Legacy_Maps_to_Transform_Maps"><span class="tocnumber">2.1.1</span> <span class="toctext">Transitioning from Legacy Maps to Transform Maps</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-5"><a href="index.php%3Ftitle=Setting_up_the_LDAP_Import_Map.html#Using_the_Default_LDAP_Import_Map_Settings"><span class="tocnumber">2.2</span> <span class="toctext">Using the Default LDAP Import Map Settings</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6"><a href="index.php%3Ftitle=Setting_up_the_LDAP_Import_Map.html#LDAP_Scripting"><span class="tocnumber">3</span> <span class="toctext">LDAP Scripting</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="index.php%3Ftitle=Setting_up_the_LDAP_Import_Map.html#Set_Disabled_Active_Directory_Users_to_Inactive"><span class="tocnumber">3.1</span> <span class="toctext">Set Disabled Active Directory Users to Inactive</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="index.php%3Ftitle=Setting_up_the_LDAP_Import_Map.html#Assign_Field_Values"><span class="tocnumber">3.2</span> <span class="toctext">Assign Field Values</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="index.php%3Ftitle=Setting_up_the_LDAP_Import_Map.html#Skip_Particular_Users"><span class="tocnumber">3.3</span> <span class="toctext">Skip Particular Users</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-10"><a href="index.php%3Ftitle=Setting_up_the_LDAP_Import_Map.html#Verify_LDAP_Mapping"><span class="tocnumber">4</span> <span class="toctext">Verify LDAP Mapping</span></a></li>
</ul>
</div>

<h1><span class="mw-headline" id="Overview"><span class="mw-headline-number">1</span> Overview</span></h1>
<p>LDAP Mapping is the process of matching fields in your LDAP database to fields in your ServiceNow instance. Since this process has a performance effect, ServiceNow recommend scheduling processing during off-peak hours, or processing a few records at a time to maintain system availability.
</p>
<h1><span class="mw-headline" id="Setting_Up_a_Transform_Map_for_LDAP"><span class="mw-headline-number">2</span> Setting Up a Transform Map for LDAP</span></h1>
<p>The best practice is to define a transform map that only imports the needed or required attributes. Depending on the version of ServiceNow you are using, the method for specifying LDAP mapping relationships varies. The easiest way to know whether or not you are running a version which uses the <b>System LDAP</b> application for the LDAP integration is to find the application from the application navigator.
</p><p>If you <b>do</b> have the <b>System LDAP</b> application: use a transform map to specify your mapping. See <a href="index.php%3Ftitle=Creating_New_Transform_Maps.html" title="Creating New Transform Maps">Creating New Transform Maps</a> for complete instructions. 
</p><p>If you do <b>not </b>have the <b>System LDAP</b> application: use a LDAP legacy import map to specify your mapping, or the default LDAP transform that is included in baseline instances. Remember to adjust the <b>Coalesce</b> field to match against the correct fields. For more information, see <a href="index.php%3Ftitle=Using_the_Coalesce_Field.html" title="Using the Coalesce Field">Using the Coalesce Field</a>. 
</p>
<table cellspacing="5" cellpadding="5" class="reproduce">

<tr>
<td scope="row" style="vertical-align:middle;"> <div class="floatleft"><a href="index.php%3Ftitle=File:Warning.gif.html" class="image" title="Note"><img alt="Note" src="images/thumb/c/c2/Warning.gif/16px-Warning.gif.png" width="16" height="16" srcset="/images/thumb/c/c2/Warning.gif/24px-Warning.gif.png 1.5x, /images/thumb/c/c2/Warning.gif/32px-Warning.gif.png 2x" /></a></div>
</td>
<td scope="row" style="vertical-align:top"> <b>Note:</b> <i>The <b>Run Business Rules</b> option is applied only for the target table. Only transform maps associated to the target table run the business rules associated with different tables. If you are updating a user group and have business rules running on a user group table, the group must have roles define.</i>
</td></tr></table>
<p><br />
</p>
<div class="thumb tleft"><div class="thumbinner" style="width:802px;"><a href="index.php%3Ftitle=File:LDAPTableTransformMap.png.html" class="image"><img alt="" src="images/thumb/5/58/LDAPTableTransformMap.png/800px-LDAPTableTransformMap.png" width="800" height="195" class="thumbimage" srcset="/images/5/58/LDAPTableTransformMap.png 1.5x, /images/5/58/LDAPTableTransformMap.png 2x" /></a>  <div class="thumbcaption"><div class="magnify"><a href="index.php%3Ftitle=File:LDAPTableTransformMap.png.html" class="internal" title="Enlarge"></a></div>The Table Transform Map form</div></div></div> <br style="clear:both;" />
<div class="thumb tleft"><div class="thumbinner" style="width:802px;"><a href="index.php%3Ftitle=File:FieldMapsLDAP.png.html" class="image"><img alt="" src="images/thumb/f/f7/FieldMapsLDAP.png/800px-FieldMapsLDAP.png" width="800" height="257" class="thumbimage" srcset="/images/f/f7/FieldMapsLDAP.png 1.5x, /images/f/f7/FieldMapsLDAP.png 2x" /></a>  <div class="thumbcaption"><div class="magnify"><a href="index.php%3Ftitle=File:FieldMapsLDAP.png.html" class="internal" title="Enlarge"></a></div>LDAP field maps</div></div></div><br style="clear:both;" />
<h2><span class="mw-headline" id="Differences_between_Transform_Maps_and_Legacy_Import_Maps"><span class="mw-headline-number">2.1</span> Differences between Transform Maps and Legacy Import Maps</span></h2>
<p>When specifying LDAP mapping relationships using transform maps there is a major difference in how reference fields are set for manager and department. When using transform maps it is necessary to use a transform script to create references. This is because the value associated with an LDAP attribute like manager is the distinguished name of the manager. Without some extra logic in place the result is the creation of a ServiceNow user record with a manager name that is the distinguished name of that user in LDAP. The integration includes a transform script to facilitate the creation of these references. The default transform map "LDAP User Import" includes transform scripts for these references.  
</p>
<div class="thumb tleft"><div class="thumbinner" style="width:248px;"><a href="index.php%3Ftitle=File:System_ldap.png.html" class="image"><img alt="" src="images/2/27/System_ldap.png" width="246" height="253" class="thumbimage" /></a>  <div class="thumbcaption"><div class="magnify"><a href="index.php%3Ftitle=File:System_ldap.png.html" class="internal" title="Enlarge"></a></div>The System LDAP menu</div></div></div><br style="clear:both;" />
<h3><span class="mw-headline" id="Transitioning_from_Legacy_Maps_to_Transform_Maps"><span class="mw-headline-number">2.1.1</span> Transitioning from Legacy Maps to Transform Maps</span></h3>
<p>In order to retain the LDAP mapping relationships that existed prior to the addition of the <b>System LDAP</b> application, clear the reference field for your LDAP server (which is associated with your old Legacy Import Map). The LDAP Server has a <b>Map</b> field that is a reference to the the Legacy Import Map. By default, this field is hidden so you will have to <a href="index.php%3Ftitle=Special:Book&amp;bookcmd=remove_article&amp;arttitle=Configuring+Forms&amp;oldid=0.html#Configuring_Forms" title="Configuring Forms">configure the form</a> to display it. If you want to transition to using a Transform Map then you should clear the reference specified in this field. 
</p>
<h2><span class="mw-headline" id="Using_the_Default_LDAP_Import_Map_Settings"><span class="mw-headline-number">2.2</span> Using the Default LDAP Import Map Settings</span></h2>
<p>Verify and use attributes to limit the fields the integration imports from the LDAP source. Additionally, it is important to map the <b>user_name</b> field to the LDAP attribute that contains the user's login ID. For Active Directory this is usually the <tt>sAMAccountName</tt> attribute. If you would like to import and coalesce on a binary attribute (such as objectSID or objectGUID), you have to create a custom transform script. Review <a href="index.php%3Ftitle=Additional_Glide_Properties.html" title="Additional Glide Properties" class="mw-redirect">Glide Properties</a>. Note that any value mapped to the <b>user_name</b> field must be unique. 
</p><p>If you do not specify a transform map (such as <b>LDAP User Import</b>), the integration uses the following default mappings: 
</p>
<table class="standard">

<tr>
<th> ServiceNow User field or variable
</th>
<th> LDAP attribute
</th></tr>
<tr>
<td> user_name
</td>
<td> sAMAccountName
</td></tr>
<tr>
<td> email
</td>
<td> mail
</td></tr>
<tr>
<td> phone
</td>
<td> telephoneNumber
</td></tr>
<tr>
<td> home_phone
</td>
<td> homePhone
</td></tr>
<tr>
<td> mobile_phone
</td>
<td> mobile
</td></tr>
<tr>
<td> first_name
</td>
<td> givenName
</td></tr>
<tr>
<td> last_name
</td>
<td> sn
</td></tr>
<tr>
<td> title
</td>
<td> title
</td></tr>
<tr>
<td> department
</td>
<td> department
</td></tr>
<tr>
<td> manager
</td>
<td> manager
</td></tr>
<tr>
<td> middle_name
</td>
<td> initials
</td></tr>
<tr>
<td> u_memberof
</td>
<td> groups
</td></tr>
<tr>
<td> u_member
</td>
<td> members
</td></tr>
<tr>
<td> u_manager
</td>
<td> manager
</td></tr></table>
<h1><span class="mw-headline" id="LDAP_Scripting"><span class="mw-headline-number">3</span> LDAP Scripting</span></h1>
<p>These sample scripts automate common LDAP tasks.
</p>
<ul><li> <a href="index.php%3Ftitle=Setting_up_the_LDAP_Import_Map.html#Set_Disabled_Active_Directory_Users_to_Inactive">Set Disabled Active Directory Users to Inactive</a></li>
<li> <a href="index.php%3Ftitle=Setting_up_the_LDAP_Import_Map.html#Assign_Field_Values">Assign Field Values</a></li>
<li> <a href="index.php%3Ftitle=Setting_up_the_LDAP_Import_Map.html#Skip_Particular_Users">Skip Particular Users</a></li></ul>
<h2><span class="mw-headline" id="Set_Disabled_Active_Directory_Users_to_Inactive"><span class="mw-headline-number">3.1</span> Set Disabled Active Directory Users to Inactive</span></h2>
<p>You can identify disabled Active Directory users by checking the value of the <tt>userAccountControl</tt> attribute. Use the following script to automatically disable ServiceNow users when the associated AD user is disabled. This rule executes whenever the User Account Control value changes and disables user accounts if the User Account Control signifies a disabled AD account. 
</p>
<ol><li><a href="index.php%3Ftitle=Special:Book&amp;bookcmd=remove_article&amp;arttitle=Configuring+Forms&amp;oldid=0.html#Configuring_Forms" title="Configuring Forms">Configure</a> the User form and create a new integer field called <b>User Account Control</b>. </li>
<li>Add mapping for userAccountControl (external) to the new field.</li>
<li>Create a new business rule with the following properties:</li></ol>
<table class="standard">

<tr>
<th> Business Rule field
</th>
<th> Value
</th></tr>
<tr>
<td> <b>Name</b>
</td>
<td> Disable AD Users
</td></tr>
<tr>
<td> <b>Table</b>
</td>
<td> User [sys_user]
</td></tr>
<tr>
<td> <b>When</b>
</td>
<td> Before
</td></tr>
<tr>
<td> <b>Condition</b>
</td>
<td> current.u_user_account_control.changes()
</td></tr>
<tr>
<td> <b>Script</b>
</td>
<td>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="kd">var</span> <span class="nx">disabledFlag</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="c1">//perform a bitwise comparison on userAccountControl to see if the 2 bit flag is enabled</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">current</span><span class="p">.</span><span class="nx">u_user_account_control</span> <span class="o">&amp;</span> <span class="nx">disabledFlag</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">gs</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Disabling user: &#39;</span> <span class="o">+</span> <span class="nx">current</span><span class="p">.</span><span class="nx">user_name</span> <span class="o">+</span> <span class="s1">&#39;userAccountControl=&#39;</span> <span class="o">+</span> <span class="nx">current</span><span class="p">.</span><span class="nx">u_user_account_control</span><span class="p">);</span>
  <span class="nx">current</span><span class="p">.</span><span class="nx">active</span><span class="o">=</span><span class="s1">&#39;false&#39;</span><span class="p">;</span>
  <span class="nx">current</span><span class="p">.</span><span class="nx">locked_out</span><span class="o">=</span><span class="s1">&#39;true&#39;</span><span class="p">;</span>
<span class="p">}</span>
</pre></div> 
</td></tr></table>
<h2><span class="mw-headline" id="Assign_Field_Values"><span class="mw-headline-number">3.2</span> Assign Field Values</span></h2>
<p>You can use a script to assign a value to any field for which there is a field mapping. For example, to assign a value to the <b>sys_user.company</b> field, create a field map for the company field and add a transform script of: 
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nx">company</span> <span class="o">=</span> <span class="s2">&quot;Don&#39;s Sporting Goods&quot;</span><span class="p">;</span>
</pre></div>
<h2><span class="mw-headline" id="Skip_Particular_Users"><span class="mw-headline-number">3.3</span> Skip Particular Users</span></h2>
<p>If you cannot completely filter the LDAP user list using LDAP filter properties, you can exclude users with a map script. Once you have run the logic to identify a user that should not be imported, set the user_name field to an empty string and this user will not be imported.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nx">user_name</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">;</span>
</pre></div> 
<p>One way to identify users to filter out is to look for a string in the <tt>distinguishedName</tt> attribute. For example, this script excludes accounts that are not in a Users OU. You might use this script if you have too many Users OU to include in the target OU LDAP Option. 
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="c1">//vdn is a variable mapped to distinguishedName</span>
<span class="nx">gs</span><span class="p">.</span><span class="nx">include</span><span class="p">(</span><span class="s2">&quot;LDAPUtils&quot;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">vdn</span> <span class="o">=</span> <span class="nx">source</span><span class="p">.</span><span class="nx">getElement</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">distinguishedName</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">vdn</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">&#39;OU=Users&#39;</span><span class="p">)</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">user_name</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">;</span>
  <span class="nx">gs</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;LDAP Import Skipping User: &#39;</span> <span class="o">+</span> <span class="nx">vdn</span><span class="p">);</span>
<span class="p">}</span>
</pre></div> 
<p>A more complex method of filtering is to use Regular Expressions. 
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="c1">//vcn is a variable mapped to cn</span>
<span class="c1">//vdn is a variable mapped to distinguishedName</span>
<span class="c1">//c is the regular expression string</span>
<span class="nx">gs</span><span class="p">.</span><span class="nx">include</span><span class="p">(</span><span class="s2">&quot;LDAPUtils&quot;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">vdn</span> <span class="o">=</span> <span class="nx">source</span><span class="p">.</span><span class="nx">getElement</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">distinguishedName</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">vcn</span> <span class="o">=</span> <span class="nx">source</span><span class="p">.</span><span class="nx">getElement</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">cn</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="sr">/^[a-z][a-z][a-z][0-9][0-9][0-9]$/</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">nvcn</span> <span class="o">=</span> <span class="nx">vcn</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>
<span class="c1">//test to see if the cn is in the form of 3 letters followed by 3 numbers, only import these</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">nvcn</span><span class="p">))</span> <span class="p">{</span>
	<span class="nx">user_name</span> <span class="o">=</span> <span class="nx">nvcn</span><span class="p">;</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
	<span class="nx">gs</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;LDAP import rejected username: &quot;</span> <span class="o">+</span> <span class="nx">vcn</span> <span class="o">+</span> <span class="s2">&quot; for DN: &quot;</span> <span class="o">+</span> <span class="nx">vdn</span><span class="p">);</span>
	<span class="nx">user_name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
<span class="p">}</span>
</pre></div> 
<h1><span class="mw-headline" id="Verify_LDAP_Mapping"><span class="mw-headline-number">4</span> Verify LDAP Mapping</span></h1>
<p>After creating an LDAP transform map, refresh the LDAP data to verify the transform map works as expected.
</p>
<ol><li>Navigate to <b>System LDAP &gt; Scheduled Loads</b>.</li>
<li>Click on your LDAP import job.</li>
<li>Click <b>Execute Now</b>.</li></ol>

<!-- 
NewPP limit report
Cached time: 20171201091445
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.301 seconds
Real time usage: 1.830 seconds
Preprocessor visited node count: 138/1000000
Preprocessor generated node count: 372/1000000
Post‐expand include size: 4747/2097152 bytes
Template argument size: 1905/2097152 bytes
Highest expansion depth: 6/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%   60.525      1 - -total
 81.38%   49.258      1 - Template:LDAP
 69.80%   42.246      1 - Template:Topic
 16.23%    9.822      2 - Template:Note
 15.30%    9.259      1 - Embedded:LDAP
  9.48%    5.739      4 - Template:T
-->

<!-- Saved in parser cache with key wikidb:pcache:idhash:3993-0!*!0!1!en!5!* and timestamp 20171201091444 and revision id 250890
 -->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="index.php%3Ftitle=Setting_up_the_LDAP_Import_Map&amp;oldid=250890.html">http://wiki.servicenow.com/index.php?title=Setting_up_the_LDAP_Import_Map&amp;oldid=250890</a>"</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="index.php%3Ftitle=Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="index.php%3Ftitle=Special:Book&amp;bookcmd=add_category&amp;cattitle=LDAP.html" title="Category:LDAP">LDAP</a></li></ul></div><br /><hr /><a href="index.php%3Ftitle=Category:Contents.html" title="Category:Contents">Contents</a> &gt; <a href="index.php%3Ftitle=Special:Book&amp;bookcmd=add_category&amp;cattitle=Integrate.html" title="Category:Integrate">Integrate</a> &gt; <a href="index.php%3Ftitle=Special:Book&amp;bookcmd=add_category&amp;cattitle=Single+Sign-On.html" title="Category:Single Sign-On">Single Sign-On</a> &gt; <a href="index.php%3Ftitle=Special:Book&amp;bookcmd=add_category&amp;cattitle=LDAP.html" title="Category:LDAP">LDAP</a></div>					<!-- end content -->
					<div id='mw-data-after-content'>
	<div id="rating_3993"><div class="voting-title">Was this article helpful?</div><div class="voting-box"><div class="vote-up " data-vote-id="3993" data-vote-the-vote="5" data-vote-id="3993" data-vote-action="5" data-vote-rating="5.00" data-vote-voted="0" id="rating_3993_5"><span>Yes, I found what I needed</span></div><div class="vote-down " data-vote-id="3993" data-vote-the-vote="1" data-vote-id="3993" data-vote-action="5" data-vote-rating="5.00" data-vote-voted="0" id="rating_3993_1"><span>No, I need more assistance</span></div></div></div>
</div>
					<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div id="column-one">
					<div id="p-cactions" class="portlet" role="navigation">
			<h5>Views</h5>

			<div class="pBody">
				<ul>
				<li id="ca-nstab-main" class="selected"><a href="index.php%3Ftitle=Setting_up_the_LDAP_Import_Map.html" title="View the content page [c]" accesskey="c">Page</a></li>
				</ul>
							</div>
		</div>
				<div class="portlet" id="p-personal" role="navigation">
				<h5>Personal tools</h5>

				<div class="pBody">
					<ul>
													<li id="pt-createaccount"><a href="index.php%3Ftitle=Special:CreateAccount&amp;returnto=Setting+up+the+LDAP+Import+Map.html" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li>
													<li id="pt-login"><a href="index.php%3Ftitle=Special:UserLogin&amp;returnto=Setting+up+the+LDAP+Import+Map.html" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
											</ul>
				</div>
			</div>
			<div class="portlet" id="p-logo" role="banner">
				<a href="index.html" class="mw-wiki-logo" title="Visit the main page"></a>
			</div>
				<div class="generated-sidebar portlet" id="p-" role="navigation">
		<h3></h3>
		<div class='pBody'>
			<div class="portlet">
<h5><span class="mw-headline" id="Categories">Categories</span></h5>
<div class="pBody">
<div class="sidebarcat">
<ul><li><a href="index.php%3Ftitle=Get_Started.html" title="Get Started">Get Started</a></li>
<li><a href="index.php%3Ftitle=Special:Book&amp;bookcmd=remove_article&amp;arttitle=Use+ServiceNow&amp;oldid=0.html" title="Use ServiceNow">Use</a></li>
<li><a href="index.php%3Ftitle=Administer_ServiceNow.html" title="Administer ServiceNow">Administer</a></li>
<li><a href="index.php%3Ftitle=Script_in_ServiceNow.html" title="Script in ServiceNow">Script</a></li>
<li><a href="index.php%3Ftitle=Build.html" title="Build">Build</a></li>
<li><a href="index.php%3Ftitle=Deliver_ServiceNow.html" title="Deliver ServiceNow">Deliver</a></li>
<li><a href="index.php%3Ftitle=Integration_Overview.html" title="Integration Overview">Integrate</a></li>
<li><a href="index.php%3Ftitle=Release_Notes.html" title="Release Notes">Release Notes</a></li>
<li><a href="index.php%3Ftitle=Special:Book&amp;bookcmd=remove_article&amp;arttitle=Customer+Support&amp;oldid=0.html" title="Customer Support">Customer Support</a></li>
<li><a href="index.php%3Ftitle=Books.html" title="Books">Books</a></li>
<li><a href="index.php%3Ftitle=Special:Book&amp;bookcmd=remove_article&amp;arttitle=Video+Tutorials&amp;oldid=0.html" title="Video Tutorials">Video Tutorials</a></li>
<li><a target="_blank" rel="nofollow noreferrer noopener" class="external text" href="http://express.servicenow.com/support/">ServiceNow Express</a></li></ul>
</div>
</div>
</div>
<div class="portlet">
<h5><span class="mw-headline" id="Resources">Resources</span></h5>
<div class="pBody">
<ul><li><a href="index.php%3Ftitle=Category:Contents.html" title="Category:Contents">Site Map &#8211; Tree View</a><br /></li>
<li><a href="index.php%3Ftitle=Special:RecentChanges.html" title="Special:RecentChanges">Recent Changes</a><br /></li>
<li><a href="index.php%3Ftitle=Glossary_of_Terms.html" title="Glossary of Terms">Glossary</a><br /></li>
<li><a href="index.php%3Ftitle=Help:Getting_Started_on_the_ServiceNow_Wiki.html" title="Help:Getting Started on the ServiceNow Wiki">Wiki Help</a></li></ul>
</div>
</div>
<div class="portlet">
<h5><span class="mw-headline" id="Print">Print</span></h5>
<div class="pBody">
<ul><li><a target="_blank" rel="nofollow noreferrer noopener" class="external text" href="index.php%3Ftitle=Special:Book&amp;bookcmd=book_creator.html">Create a Book</a></li>
<li><a href="index.php%3Ftitle=Help:Books.html" title="Help:Books">Book Help</a></li>
<li><a target="_blank" rel="nofollow noreferrer noopener" class="external text" href="index.php%3Ftitle=Special:Book%252Frender_article%252F&amp;arttitle=Setting_up_the_LDAP_Import_Map.html">Download Page as PDF</a></li>
<li><a target="_blank" rel="nofollow noreferrer noopener" class="external text" href="index.php%3Ftitle=Setting_up_the_LDAP_Import_Map&amp;printable=yes.html">Printable Version</a></li></ul>
</div>
</div>
		</div>
		</div>
		<div class="generated-sidebar portlet" id="p-coll-print_export" role="navigation">
		<h3>Print/export</h3>
		<div class='pBody'>
							<ul>
											<li id="coll-create_a_book"><a href="index.php%3Ftitle=Special:Book&amp;bookcmd=book_creator&amp;referer=Setting+up+the+LDAP+Import+Map.html">Create a book</a></li>
											<li id="coll-download-as-rl"><a href="index.php%3Ftitle=Special:Book&amp;bookcmd=render_article&amp;arttitle=Setting+up+the+LDAP+Import+Map&amp;returnto=Setting+up+the+LDAP+Import+Map&amp;oldid=250890&amp;writer=rl.html">Download as PDF</a></li>
											<li id="t-print"><a href="index.php%3Ftitle=Setting_up_the_LDAP_Import_Map&amp;printable=yes.html" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
									</ul>
					</div>
		</div>
			<div id="p-search" class="portlet" role="search">
			<h3><label for="searchInput">Search</label></h3>

			<div id="searchBody" class="pBody">
				<form action="http://wiki.servicenow.com/index.php" id="searchform">
					<input type='hidden' name="title" value="Special:Search"/>
					<input type="search" name="search" placeholder="Search" title="Search ServiceNow Wiki [f]" accesskey="f" id="searchInput"/>
					<input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchGoButton" class="searchButton"/>&#160;
						<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton"/>
				</form>

							</div>
		</div>
			<div class="portlet" id="p-tb" role="navigation">
			<h3>Toolbox</h3>

			<div class="pBody">
				<ul>
											<li id="t-whatlinkshere"><a href="index.php%3Ftitle=Special:WhatLinksHere%252FSetting_up_the_LDAP_Import_Map.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here?</a></li>
											<li id="t-recentchangeslinked"><a href="http://wiki.servicenow.com/index.php?title=Special:RecentChangesLinked/Setting_up_the_LDAP_Import_Map" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
											<li id="t-specialpages"><a href="index.php%3Ftitle=Special:SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
											<li id="t-permalink"><a href="index.php%3Ftitle=Setting_up_the_LDAP_Import_Map&amp;oldid=250890.html" title="Permanent link to this revision of the page">Permanent link</a></li>
											<li id="t-info"><a href="index.php%3Ftitle=Setting_up_the_LDAP_Import_Map&amp;action=info.html" title="More information about this page">Page information</a></li>
									</ul>
							</div>
		</div>
			</div><!-- end of the left (by default at least) column -->
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
						<div id="f-poweredbyico">
									<a href="http://www.mediawiki.org/"><img src="resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a>
							</div>
					<ul id="f-list">
									<li id="lastmod"> This page was last modified 18:33, 11 September 2017.</li>
									<li id="privacy"><a href="index.php%3Ftitle=ServiceNow_Wiki:Privacy_policy.html" title="ServiceNow Wiki:Privacy policy">Privacy policy</a></li>
									<li id="about"><a href="index.php%3Ftitle=ServiceNow_Wiki:About.html" title="ServiceNow Wiki:About">About ServiceNow Wiki</a></li>
									<li id="disclaimer"><a href="index.php%3Ftitle=ServiceNow_Wiki:General_disclaimer.html" title="ServiceNow Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
		</div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.loader.state({"user":"ready","user.groups":"ready"});mw.loader.load(["ext.treeandmenu","mediawiki.toc","mediawiki.action.view.postEdit","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"]);});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":1184});});</script></body></html>
