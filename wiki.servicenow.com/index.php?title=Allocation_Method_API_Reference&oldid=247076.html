<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8"/>
<title>Allocation Method API Reference - ServiceNow Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Allocation_Method_API_Reference","wgTitle":"Allocation Method API Reference","wgCurRevisionId":247076,"wgRevisionId":247076,"wgArticleId":23667,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Financial Management"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Allocation_Method_API_Reference","wgRelevantArticleId":23667,"wgRequestId":"7bf350101857152ff875ab1b","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgCategoryTreePageCategoryOptions":"{\"mode\":20,\"hideprefix\":20,\"showcount\":true,\"namespaces\":false}"});mw.loader.implement("user.options",function($,jQuery,require,module){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function ( $, jQuery, require, module ) {
mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});/*@nomin*/;

});mw.loader.load(["mediawiki.page.startup","ext.voteNY"]);});</script>
<link rel="stylesheet" href="http://wiki.servicenow.com/load.php?debug=false&amp;lang=en&amp;modules=ext.pygments%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.content.externallinks%7Cmediawiki.skinning.interface%7Cskins.monobook.styles&amp;only=styles&amp;skin=monobook"/>
<!--[if IE 6]><link rel="stylesheet" href="/skins/MonoBook/IE60Fixes.css?303" media="screen"/><![endif]--><!--[if IE 7]><link rel="stylesheet" href="/skins/MonoBook/IE70Fixes.css?303" media="screen"/><![endif]-->
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=monobook.css"/>
<script async="" src="load.php%3Fdebug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=monobook"></script>
<meta name="generator" content="MediaWiki 1.27.3"/>
<meta name="robots" content="noindex,nofollow"/>
<meta name="robots" content="index,follow,noarchive"/>
<meta name="copyright" content="ServiceNow"/>
<meta http-equiv="content-language" content="en"/>
<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
<meta name="modified" content="20150618192619"/>
<meta name="canonical" content="//wiki.servicenow.com/index.php?title=Allocation_Method_API_Reference"/>
<meta name="author" content="ServiceNow"/>
<meta name="twitter:card" content="@NOWsupport"/>
<meta name="twitter:title" content="Allocation Method API Reference"/>
<meta name="twitter:creator" content="@NOWsupport"/>
<meta name="twitter:domain" content="servicenow.com"/>
<meta name="keywords" content="Financial Management"/>
<meta name="category" content="Financial Management"/>
<link rel="shortcut icon" href="favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php" title="ServiceNow Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="api.php%3Faction=rsd"/>
<link rel="alternate" type="application/atom+xml" title="ServiceNow Wiki Atom feed" href="index.php%3Ftitle=Special:RecentChanges&amp;feed=atom.html"/>
<script type="text/javascript">window.tamBaseUrl='/extensions/TreeAndMenu'</script>

<script type="text/javascript" src="extensions/TreeAndMenu/dtree.js"></script>

<link rel="canonical" href="index.php%3Ftitle=Allocation_Method_API_Reference.html" />

	<meta property="og:title" content="ServiceNow Wiki:Allocation Method API Reference"/>

	<meta property="og:type" content="article"/>

	<meta property="og:site_name" content="ServiceNow Wiki"/>

	<meta property="modified" content="20150618192619"/>

	<meta property="article:published_time" content="20150618192619"/>

	<meta property="article:modified_time" content="20150618192619"/>

	<meta property="article:author" content="ServiceNow"/>

	<meta property="article:tag" content="Financial Management"/>

	<meta property="og:url" content="//wiki.servicenow.com/index.php?title=Allocation_Method_API_Reference"/>

</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Allocation_Method_API_Reference rootpage-Allocation_Method_API_Reference skin-monobook action-view">
<div id="header">
	<div id="snc_top_toolbar" >
	<ul class="inline" id="sites">
		<li><a href="index.html">Wiki home</a></li>
		<li><a href="http://community.servicenow.com">Community</a></li>
		<li><a href="http://www.servicenow.com/services/training-and-certification.html">Training</a></li>
		<li><a href="https://www.servicenow.com/support.html">Support home</a></li>
		<li><a href="http://www.servicenow.com">Company home</a></li>
		<li><a href="http://info.servicenow.com/demonow/">Demo</a></li>
	</ul>

<!-- Start Adobe analytics staging -->
<script src="http://assets.adobedtm.com/43c21e31f00ba1c49c16c9c6a5acf67ef1e8dfa8/satelliteLib-c41330e93f48feef745e6ecb4b425db9d5da2dea.js"></script>

<!--Begin Google analytics -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-29210697-1']);
  _gaq.push(['_setDomainName', 'servicenow.com']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  _gaq.push(['_trackPageLoadTime']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<!-- End Google analytics, begin other analytics -->

<!--<script type="text/javascript" language="javascript">llactid=11051</script>
<script type="text/javascript" language="javascript" src="https://trackalyzer.com/trackalyze_secure.js"></script>
-->
<!--End analytics-->

	</div>
</div>
<div id="snc_toolbar" >
	<a href="index.html">
	<img src="https://wiki.service-now.com/images/CustomWikiLogoFixed.png" height="64px">
	</a>
<div id="googleSearchBox"> <!--Google Search box -->
<div id='cse-search-form' style='width: 100%;'>Loading</div>
<script src='http://www.google.com/jsapi' type='text/javascript'></script>


<script type='text/javascript'>

google.load('search', '1', {language: 'en', style: google.loader.themes.V2_DEFAULT, callback:loadCSE});

window.onhashchange = function() {
	var url = window.location.href;
	if(url.indexOf("gsc.q") == -1) //call only when not browsing search results.
	{
		resetUI();
	}
}

function resetUI() {
	//reset UI to standard layout. Hide search, restore page content/controls.
	var cactions = document.getElementById('p-cactions');
	var cont = document.getElementById('content');
	var sr = document.getElementById('cse');

	cactions.style.display = 'block';
	sr.style.display = 'none';
	cont.style.display = 'block';
};

function onSubmit() {
	//hide page elements when searching.
	var cactions = document.getElementById('p-cactions');
	cactions.style.display = 'none';
	var sr = document.getElementById('cse');
	sr.style.display = 'block';
	var cont = document.getElementById('content');
	cont.style.display = 'none';
};

function loadCSE() {
	var customSearchOptions = {};
	var orderByOptions = {};
	orderByOptions['keys'] = [{label: 'Relevance', key: ''} , {label: 'Date', key: 'date'}];
	customSearchOptions['enableOrderBy'] = true;
	customSearchOptions['orderByOptions'] = orderByOptions;

	var customSearchControl = new google.search.CustomSearchControl('005409823165138974380:bltnnmgfoek', customSearchOptions);
	customSearchControl.setResultSetSize(google.search.Search.FILTERED_CSE_RESULTSET);
	customSearchControl.setSearchCompleteCallback(this,onSubmit);//set onSubmit script to run when searching

	var options = new google.search.DrawOptions();
	options.setSearchFormRoot('cse-search-form');
	options.setAutoComplete(true);
	customSearchControl.draw('cse', options);
	var historyStarted = customSearchControl.startHistoryManagement();
	if(historyStarted) customSearchControl.setLinkTarget(google.search.Search.LINK_TARGET_SELF);
};

</script>

</div> <!--end Google search box-->
</div>

<div id="globalWrapper">
		<div id="column-content">
			<div id="cse"></div>
			<div id="content" class="mw-body" role="main">
				<a id="top"></a>
									<div id="siteNotice"><div class="collection-creatorbox"><img src="extensions/Collection/images/Open_book.png%3F9" alt="" width="80" height="45" class="collection-creatorbox-book" /><div class="collection-creatorbox-row"><div><a href="index.php%3Ftitle=Help:Books.html" title="Show help about creating books" rel="nofollow"><img src="extensions/Collection/images/silk-help.png" alt="" width="16" height="16" />&#160;Help</a></div><span class="collection-creatorbox-title">Book creator</span> (<a href="index.php%3Ftitle=Special:Book&amp;bookcmd=stop_book_creator&amp;referer=Allocation+Method+API+Reference.html" title="Stop using the book creator" rel="nofollow">disable</a>)</div><div id="coll-book_creator_box" class="collection-creatorbox-row"><a href="index.php%3Ftitle=Special:Book&amp;bookcmd=add_article&amp;arttitle=Allocation+Method+API+Reference&amp;oldid=0.html" title="Add the current wiki page to your book" id="coll-add_article" rel="nofollow" onclick="collectionCall('AddArticle', ['removearticle', wgNamespaceNumber, wgTitle, 0]); return false;"><img src="extensions/Collection/images/silk-add.png" alt="" width="16" height="16" />&#160;Add this page to your book</a><a href="index.php%3Ftitle=Special:Book%252Fload_collection%252F&amp;colltitle=Book:Introduction_to_ServiceNow_Part_1.html" title="Click to edit/download/order your book" rel="nofollow" class="collection-creatorbox-iconlink"><img src="extensions/Collection/images/silk-book_open.png" alt="" width="16" height="16" />&#160;Show book (500 pages)</a><a href="index.php%3Ftitle=Special:Book&amp;bookcmd=suggest.html" title="Show suggestions based on the pages in your book" rel="nofollow" class="collection-creatorbox-iconlink"><img src="extensions/Collection/images/silk-wand.png" alt="" width="16" height="16" style="vertical-align: text-bottom" />&#160;Suggest pages</a></div></div></div>
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">Allocation Method API Reference</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="siteSub">From ServiceNow Wiki</div>
					<div id="contentSub"><!-- Text for discussion pages-->
Allocation Method API Reference</div>
										<div id="jump-to-nav" class="mw-jump">Jump to: <a href="index.php%3Ftitle=Allocation_Method_API_Reference&amp;oldid=247076.html#column-one">navigation</a>, <a href="index.php%3Ftitle=Allocation_Method_API_Reference&amp;oldid=247076.html#searchInput">search</a></div>

					<!-- start content -->
					<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="noprint">
<table class="topicbox">

<tr>
<th> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<a href="index.php%3Ftitle=Special:Book&amp;bookcmd=remove_article&amp;arttitle=Financial+Management&amp;oldid=0.html" title="Financial Management">Financial Management</a>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;
</th></tr>
<tr>
<td> <div class='dtree' id='5a246ab800c86t'></div><script type="text/javascript">window.tamOnload_tam5a246ab800c86t=[];tree = new dTree('tam5a246ab800c86t');
                                               for (i in tree.icon) tree.icon[i] = '/extensions/TreeAndMenu/'+tree.icon[i];
                                               tree.config.useLines = false;
                                               tree.add(0,-1,'');
                                               tam5a246ab800c86t = tree;
                                               tam5a246ab800c86t.add(1, 0, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Installed_with_Financial_Management\&quot;" title=\"Installed with Financial Management\">Installed Components</a>');

tam5a246ab800c86t.add(2, 0, 'Application Setup');
tam5a246ab800c86t.add(3, 2, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Administering_the_Financial_Management_Data_Mart\&quot;" title=\"Administering the Financial Management Data Mart\">The Data Mart</a>');
tam5a246ab800c86t.add(4, 2, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Setting_Up_the_Fiscal_Calendar\&quot;" title=\"Setting Up the Fiscal Calendar\">The Fiscal Calendar</a>');
tam5a246ab800c86t.add(5, 2, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Administering_the_General_Ledger\&quot;" title=\"Administering the General Ledger\">The General Ledger</a>');
tam5a246ab800c86t.add(6, 2, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Administering_the_Chart_of_Accounts\&quot;" title=\"Administering the Chart of Accounts\">The Chart of Accounts</a>');
tam5a246ab800c86t.add(7, 2, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Creating_Business_Units\&quot;" title=\"Creating Business Units\">Creating Business Units</a>');
tam5a246ab800c86t.add(8, 2, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Creating_IT_Shared_Services\&quot;" title=\"Creating IT Shared Services\">Creating IT Shared Services</a>');
tam5a246ab800c86t.add(9, 0, 'The Workbench');
tam5a246ab800c86t.add(10, 9, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Using_the_Workbench\&quot;" title=\"Using the Workbench\">Using the Workbench</a>');
tam5a246ab800c86t.add(11, 9, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Reviewing_the_Data_Definition\&quot;" title=\"Reviewing the Data Definition\">Reviewing the Data Definition</a>');
tam5a246ab800c86t.add(12, 9, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Cleansing_Financial_Data\&quot;" title=\"Cleansing Financial Data\">Cleansing Financial Data</a>');
tam5a246ab800c86t.add(13, 9, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Putting_Data_into_Buckets\&quot;" title=\"Putting Data into Buckets\">Putting Data into Buckets</a>');
tam5a246ab800c86t.add(14, 9, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Setting_up_Allocations_with_the_Workbench\&quot;" title=\"Setting up Allocations with the Workbench\">Setting up Allocations</a>');
tam5a246ab800c86t.add(15, 9, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Allocating_Expenses_with_the_Workbench\&quot;" title=\"Allocating Expenses with the Workbench\">Allocating Expenses</a>');
tam5a246ab800c86t.add(16, 0, 'Lists and Forms');
tam5a246ab800c86t.add(17, 16, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Administering_the_Segment_Hierarchy\&quot;" title=\"Administering the Segment Hierarchy\">The Segment Hierarchy</a>');
tam5a246ab800c86t.add(18, 16, 'Administering Allocations');
tam5a246ab800c86t.add(19, 18, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Administering_Allocations\&quot;" title=\"Administering Allocations\">Allocations</a>');
tam5a246ab800c86t.add(20, 18, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Creating_Allocation_Rules\&quot;" title=\"Creating Allocation Rules\">Rules</a>');
tam5a246ab800c86t.add(21, 18, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Creating_Allocation_Filter_Conditions\&quot;" title=\"Creating Allocation Filter Conditions\">Filter Conditions</a>');
tam5a246ab800c86t.add(22, 18, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Creating_Allocation_Methods\&quot;" title=\"Creating Allocation Methods\">Methods</a>');
tam5a246ab800c86t.add(23, 18, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Creating_Allocation_Metrics\&quot;" title=\"Creating Allocation Metrics\">Metrics</a>');
tam5a246ab800c86t.add(24, 18, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Creating_Allocation_Groups\&quot;" title=\"Creating Allocation Groups\">Groups</a>');
tam5a246ab800c86t.add(25, 18, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Creating_Buckets\&quot;" title=\"Creating Buckets\">Buckets</a>');
tam5a246ab800c86t.add(26, 18, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Creating_Grooming_Conditions\&quot;" title=\"Creating Grooming Conditions\">Grooming Conditions</a>');
tam5a246ab800c86t.add(27, 18, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Allocating_Expenses\&quot;" title=\"Allocating Expenses\">Allocating Expenses</a>');
tam5a246ab800c86t.add(28, 18, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Using_the_Allocation_Viewer\&quot;" title=\"Using the Allocation Viewer\">Allocation Viewer</a>');
tam5a246ab800c86t.add(29, 16, 'Allocation Reference');
tam5a246ab800c86t.add(30, 29, '<strong class=\"selflink\">Allocation Method API</strong>');
tam5a246ab800c86t.add(31, 29, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Financial_Management_Example_Allocations\&quot;" title=\"Financial Management Example Allocations\">Example Allocations</a>');
tam5a246ab800c86t.add(32, 0, 'Reports and Dashboards');
tam5a246ab800c86t.add(33, 32, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Using_Financial_Management_Reports\&quot;" title=\"Using Financial Management Reports\">Financial Reports</a>');
tam5a246ab800c86t.add(34, 32, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Using_the_CIO_Dashboard\&quot;" title=\"Using the CIO Dashboard\">The CIO Dashboard</a>');

                                               document.getElementById('5a246ab800c86t').innerHTML = tam5a246ab800c86t.toString();
                                               
                                               for(i in window.tamOnload_tam5a246ab800c86t) { window.tamOnload_tam5a246ab800c86t[i](); }</script>


</td></tr>
<tr>
<th> Related Topics
</th></tr>
<tr>
<td>
<ul><li><a href="index.php%3Ftitle=Cost_Management.html" title="Cost Management">Cost Management</a></li></ul>
</td></tr>
<tr>
<th> Get the Book
</th></tr>
<tr>
<td> <center><a href="index.php%3Ftitle=Book:IT_Finance.html" title="Book:IT Finance"><img alt="Knowledge.gif" src="images/d/dd/Knowledge.gif" width="16" height="16" /></a> <a href="index.php%3Ftitle=Book:IT_Finance.html" title="Book:IT Finance">Financial Management</a></center>
</td></tr></table>
</div>
<p><br />
</p>
<h1><span class="mw-headline" id="Overview"><span class="mw-headline-number">1</span> Overview</span></h1>
<p>The Cost Allocation Method API in the <i>FinancialMethodUtils</i> <a href="index.php%3Ftitle=Script_Includes.html" title="Script Includes">script include</a> allows you to create <a href="index.php%3Ftitle=Special:Book&amp;bookcmd=add_article&amp;arttitle=Creating+Allocation+Methods&amp;oldid=0.html" title="Creating Allocation Methods">allocation methods</a>. Use these methods for customizing cost allocation methods.
</p>
<h1><span class="mw-headline" id="Method_Summary"><span class="mw-headline-number">2</span> Method Summary</span></h1>
<table cellspacing="1" cellpadding="3" border="1" width="1200px" class="sortable">

<tr>
<td bgcolor="#dfdbdc"> <b>Method Summary</b>
</td>
<td bgcolor="#dfdbdc"> <b>Description</b>
</td></tr>
<tr>
<td valign="top"> <a href="index.php%3Ftitle=Allocation_Method_API_Reference&amp;oldid=247076.html#createMethod.28itcoa_segments.2C_primary_segment.2C_amount.2C_amount_type.2C_order.29">createMethod(itcoa_segments, primary_segment, amount, amount_type, order)</a>
</td>
<td valign="top"> Creates a method with the specified values for the segments, the amount, and the amount type. The primary segment and any of the fields for the segments in the IT chart of accounts which correspond to the primary segment must contain a value. Values for other segments are optional.
</td></tr>
<tr>
<td valign="top"> <a href="index.php%3Ftitle=Allocation_Method_API_Reference&amp;oldid=247076.html#createPercentageMethod.28itcoa_segments.2C_primary_segment.2C_percentage.29">createPercentageMethod(itcoa_segments, primary_segment, percentage)</a>
</td>
<td valign="top"> Creates a weighted method with the specified values for the segments and the percentage for the allocation amount. The percentage should be greater than 0.
</td></tr>
<tr>
<td valign="top"> <a href="index.php%3Ftitle=Allocation_Method_API_Reference&amp;oldid=247076.html#getDimensionTableFromTransactionTable.28transaction_table.29">getDimensionTableFromTransactionTable(transaction_table)</a>
</td>
<td valign="top"> Retrieves dimension table for the corresponding transaction table.
</td></tr>
<tr>
<td valign="top"> <a href="index.php%3Ftitle=Allocation_Method_API_Reference&amp;oldid=247076.html#getDimension.28dimension_table.2C_sys_id.29">getDimension(dimension_table, sys_id)</a>
</td>
<td valign="top"> Retrieves dimension value for the specified sys_id in a transaction table. Returns null if the value does not exist.
</td></tr>
<tr>
<td valign="top"> <a href="index.php%3Ftitle=Allocation_Method_API_Reference&amp;oldid=247076.html#createDynamicMethod.28dm_table.2C_object_id.2C_amount.29">createDynamicMethod(dm_table, object_id, amount)</a>
</td>
<td valign="top"> Creates an allocation method given a dimension table, the object ID and the amount to allocate. Use this method if you do not know which segment to allocate to in a script.
</td></tr></table>
<p><br />
</p>
<h1><span class="mw-headline" id="Method_Details"><span class="mw-headline-number">3</span> Method Details</span></h1>
<h2><span class="mw-headline" id="createMethod.28itcoa_segments.2C_primary_segment.2C_amount.2C_amount_type.2C_order.29"><span class="mw-headline-number">3.1</span> createMethod(itcoa_segments, primary_segment, amount, amount_type, order)</span></h2>
<h3><span class="mw-headline" id="Input_Fields"><span class="mw-headline-number">3.1.1</span> Input Fields</span></h3>
<p><b>Parameters:</b> 
</p>
<ul><li>itcoa_segments: The values for the segments defined in the IT Chart of Accounts.</li>
<li>primary_segment: The primary segment to which the expense is allocated.</li>
<li>amount: The percentage or the fixed amount for this method.</li>
<li>amount_type: The way the amount is broken down: percentage or fixed.</li>
<li>order: The order number for the method. Each method must have a unique order number.</li></ul>
<h3><span class="mw-headline" id="Output_Fields"><span class="mw-headline-number">3.1.2</span> Output Fields</span></h3>
<p><b>Returns:</b> the newly created record for the cost allocation method. 
</p>
<h2><span class="mw-headline" id="createPercentageMethod.28itcoa_segments.2C_primary_segment.2C_percentage.29"><span class="mw-headline-number">3.2</span> createPercentageMethod(itcoa_segments, primary_segment, percentage)</span></h2>
<h3><span class="mw-headline" id="Input_Fields_2"><span class="mw-headline-number">3.2.1</span> Input Fields</span></h3>
<p><b>Parameters:</b>
</p>
<ul><li>itcoa_segments: The values for the segments defined in the IT Chart of Accounts.</li>
<li>primary_segment: The primary segment to which the expense is allocated.</li>
<li>percentage: The percentage of the total amount for this method. Entering a percentage value greater than zero uses the <tt>createMethod</tt> function of type percentage. If no value is specified for the percentage parameter, the <tt>createPercentageMethod</tt> creates a new cost allocation method record.</li></ul>
<h3><span class="mw-headline" id="Output_Fields_2"><span class="mw-headline-number">3.2.2</span> Output Fields</span></h3>
<p><b>Returns:</b> the new allocation method.
</p>
<h3><span class="mw-headline" id="Example"><span class="mw-headline-number">3.2.3</span> Example</span></h3>
<p>The following example uses the <i>Cost center by number of incidents called</i> metric script. This script calls the <i>FinancialMethodUtils</i> script include.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nx">createMethods</span><span class="p">();</span>
		
<span class="kd">function</span> <span class="nx">createMethods</span><span class="p">()</span> <span class="p">{</span>
	<span class="kd">var</span> <span class="nx">methodUtils</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">FinancialMethodUtils</span><span class="p">();</span>
	<span class="kd">var</span> <span class="nx">methods</span> <span class="o">=</span> <span class="p">[];</span>
	
	<span class="c1">//Query the incident table grouped by caller_id.cost_center</span>
	<span class="kd">var</span> <span class="nx">ga</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GlideAggregate</span><span class="p">(</span><span class="s1">&#39;incident&#39;</span><span class="p">);</span>
	<span class="nx">ga</span><span class="p">.</span><span class="nx">addNotNullQuery</span><span class="p">(</span><span class="s1">&#39;caller_id.cost_center&#39;</span><span class="p">);</span>
	<span class="nx">ga</span><span class="p">.</span><span class="nx">groupBy</span><span class="p">(</span><span class="s1">&#39;caller_id.cost_center&#39;</span><span class="p">);</span>
	<span class="nx">ga</span><span class="p">.</span><span class="nx">addAggregate</span><span class="p">(</span><span class="s1">&#39;COUNT&#39;</span><span class="p">);</span>
	<span class="nx">ga</span><span class="p">.</span><span class="nx">query</span><span class="p">();</span>
	
	<span class="c1">//Determine the total number of incidents</span>
	<span class="kd">var</span> <span class="nx">total</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="k">while</span><span class="p">(</span><span class="nx">ga</span><span class="p">.</span><span class="nx">next</span><span class="p">())</span>
		<span class="nx">total</span> <span class="o">+=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">ga</span><span class="p">.</span><span class="nx">getAggregate</span><span class="p">(</span><span class="s1">&#39;COUNT&#39;</span><span class="p">));</span>	
	<span class="nx">ga</span><span class="p">.</span><span class="nx">setLocation</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
	
	<span class="kd">var</span> <span class="nx">dmtable_cmn_cost_center</span> <span class="o">=</span> <span class="nx">methodUtils</span><span class="p">.</span><span class="nx">getDimensionTableFromTransactionTable</span><span class="p">(</span><span class="s1">&#39;cmn_cost_center&#39;</span><span class="p">);</span>
	<span class="c1">//Create methods weighted on number of callers per department</span>
	<span class="k">while</span><span class="p">(</span><span class="nx">ga</span><span class="p">.</span><span class="nx">next</span><span class="p">())</span> <span class="p">{</span>
		<span class="kd">var</span> <span class="nx">cmn_cost_center</span> <span class="o">=</span> <span class="nx">ga</span><span class="p">.</span><span class="nx">getValue</span><span class="p">(</span><span class="s1">&#39;caller_id.cost_center&#39;</span><span class="p">);</span>
		<span class="kd">var</span> <span class="nx">dm_cmn_cost_center</span> <span class="o">=</span> <span class="nx">methodUtils</span><span class="p">.</span><span class="nx">getDimension</span><span class="p">(</span><span class="nx">dmtable_cmn_cost_center</span><span class="p">,</span> <span class="nx">cmn_cost_center</span><span class="p">);</span>
		<span class="kd">var</span> <span class="nx">count</span> <span class="o">=</span> <span class="nx">ga</span><span class="p">.</span><span class="nx">getAggregate</span><span class="p">(</span><span class="s1">&#39;COUNT&#39;</span><span class="p">);</span>
		<span class="kd">var</span> <span class="nx">percentage</span> <span class="o">=</span> <span class="p">(</span><span class="nx">count</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span> <span class="o">/</span> <span class="nx">total</span><span class="p">;</span>

		<span class="k">if</span><span class="p">(</span><span class="nx">dm_cmn_cost_center</span><span class="p">)</span> <span class="p">{</span>
			<span class="nx">itcoa_segments</span> <span class="o">=</span> <span class="p">{</span>
				<span class="nx">segment7</span> <span class="o">:</span> <span class="nx">dm_cmn_cost_center</span>
			<span class="p">};</span>
			<span class="nx">methods</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">methodUtils</span><span class="p">.</span><span class="nx">createPercentageMethod</span><span class="p">(</span><span class="nx">itcoa_segments</span><span class="p">,</span> <span class="nx">dmtable_cmn_cost_center</span><span class="p">,</span> <span class="nx">percentage</span><span class="p">));</span>
		<span class="p">}</span>
	<span class="p">}</span>
	
	<span class="k">return</span> <span class="nx">methods</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<h2><span class="mw-headline" id="getDimensionTableFromTransactionTable.28transaction_table.29"><span class="mw-headline-number">3.3</span> getDimensionTableFromTransactionTable(transaction_table)</span></h2>
<h3><span class="mw-headline" id="Input_Fields_3"><span class="mw-headline-number">3.3.1</span> Input Fields</span></h3>
<p><b>Parameters:</b> 
</p>
<ul><li>transaction_table: The name of the transaction table.</li></ul>
<h3><span class="mw-headline" id="Output_Fields_3"><span class="mw-headline-number">3.3.2</span> Output Fields</span></h3>
<p><b>Returns:</b> the name of the corresponding dimension table. 
</p>
<h2><span class="mw-headline" id="getDimension.28dimension_table.2C_sys_id.29"><span class="mw-headline-number">3.4</span> getDimension(dimension_table, sys_id)</span></h2>
<h3><span class="mw-headline" id="Input_Fields_4"><span class="mw-headline-number">3.4.1</span> Input Fields</span></h3>
<p><b>Parameters:</b> 
</p>
<ul><li>dimension_table: The dimension table from which you want to get the value of a field.</li>
<li>sys_id: The Sys ID from the transaction table.</li></ul>
<h3><span class="mw-headline" id="Output_Fields_4"><span class="mw-headline-number">3.4.2</span> Output Fields</span></h3>
<p><b>Returns:</b> the value from the specified dimension table for the corresponding Sys ID.
</p>
<h2><span class="mw-headline" id="createDynamicMethod.28dm_table.2C_object_id.2C_amount.29"><span class="mw-headline-number">3.5</span> createDynamicMethod(dm_table, object_id, amount)</span></h2>
<p><b>Parameters:</b>
</p>
<ul><li>dm_table: The dimension table for the primary segment.</li>
<li>object_id: The ID passed with the primary segment to set its value.</li>
<li>amount: The amount of the expense.</li></ul>
<h3><span class="mw-headline" id="Output_Fields_5"><span class="mw-headline-number">3.5.1</span> Output Fields</span></h3>
<p><b>Returns:</b> the new allocation method.
</p>
<!-- 
NewPP limit report
Cached time: 20171203212056
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.184 seconds
Real time usage: 0.529 seconds
Preprocessor visited node count: 119/1000000
Preprocessor generated node count: 272/1000000
Postâ€expand include size: 1555/2097152 bytes
Template argument size: 619/2097152 bytes
Highest expansion depth: 6/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%  128.783      1 - -total
100.00%  128.783      1 - Template:Finance_Management
 90.39%  116.401      1 - Template:Topic
  6.70%    8.634      4 - Template:T
-->

<!-- Saved in parser cache with key wikidb:pcache:idhash:23667-0!*!0!1!*!5!* and timestamp 20171203212055 and revision id 247076
 -->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="index.php%3Ftitle=Allocation_Method_API_Reference&amp;oldid=247076.html">http://wiki.servicenow.com/index.php?title=Allocation_Method_API_Reference&amp;oldid=247076</a>"</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="index.php%3Ftitle=Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="index.php%3Ftitle=Special:Book&amp;bookcmd=add_category&amp;cattitle=Financial+Management.html" title="Category:Financial Management">Financial Management</a></li></ul></div><br /><hr /><a href="index.php%3Ftitle=Category:Contents.html" title="Category:Contents">Contents</a> &gt; <a href="index.php%3Ftitle=Special:Book&amp;bookcmd=add_category&amp;cattitle=Deliver.html" title="Category:Deliver">Deliver</a> &gt; <a href="index.php%3Ftitle=Special:Book&amp;bookcmd=add_category&amp;cattitle=Planning+and+Policy.html" title="Category:Planning and Policy">Planning and Policy</a> &gt; <a href="index.php%3Ftitle=Special:Book&amp;bookcmd=add_category&amp;cattitle=Financial+Management.html" title="Category:Financial Management">Financial Management</a></div>					<!-- end content -->
					<div id='mw-data-after-content'>
	<div id="rating_23667"><div class="voting-title">Was this article helpful?</div><div class="voting-box"><div class="vote-up " data-vote-id="23667" data-vote-the-vote="5" data-vote-id="23667" data-vote-action="5" data-vote-rating="0.00" data-vote-voted="0" id="rating_23667_5"><span>Yes, I found what I needed</span></div><div class="vote-down " data-vote-id="23667" data-vote-the-vote="1" data-vote-id="23667" data-vote-action="5" data-vote-rating="0.00" data-vote-voted="0" id="rating_23667_1"><span>No, I need more assistance</span></div></div></div>
</div>
					<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div id="column-one">
					<div id="p-cactions" class="portlet" role="navigation">
			<h5>Views</h5>

			<div class="pBody">
				<ul>
				<li id="ca-nstab-main" class="selected"><a href="index.php%3Ftitle=Allocation_Method_API_Reference.html" title="View the content page [c]" accesskey="c">Page</a></li>
				</ul>
							</div>
		</div>
				<div class="portlet" id="p-personal" role="navigation">
				<h5>Personal tools</h5>

				<div class="pBody">
					<ul>
													<li id="pt-createaccount"><a href="http://wiki.servicenow.com/index.php?title=Special:CreateAccount&amp;returnto=Allocation+Method+API+Reference&amp;returntoquery=oldid%3D247076" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li>
													<li id="pt-login"><a href="http://wiki.servicenow.com/index.php?title=Special:UserLogin&amp;returnto=Allocation+Method+API+Reference&amp;returntoquery=oldid%3D247076" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
											</ul>
				</div>
			</div>
			<div class="portlet" id="p-logo" role="banner">
				<a href="index.html" class="mw-wiki-logo" title="Visit the main page"></a>
			</div>
				<div class="generated-sidebar portlet" id="p-" role="navigation">
		<h3></h3>
		<div class='pBody'>
			<div class="portlet">
<h5><span class="mw-headline" id="Categories">Categories</span></h5>
<div class="pBody">
<div class="sidebarcat">
<ul><li><a href="index.php%3Ftitle=Get_Started.html" title="Get Started">Get Started</a></li>
<li><a href="index.php%3Ftitle=Special:Book&amp;bookcmd=remove_article&amp;arttitle=Use+ServiceNow&amp;oldid=0.html" title="Use ServiceNow">Use</a></li>
<li><a href="index.php%3Ftitle=Administer_ServiceNow.html" title="Administer ServiceNow">Administer</a></li>
<li><a href="index.php%3Ftitle=Script_in_ServiceNow.html" title="Script in ServiceNow">Script</a></li>
<li><a href="index.php%3Ftitle=Build.html" title="Build">Build</a></li>
<li><a href="index.php%3Ftitle=Deliver_ServiceNow.html" title="Deliver ServiceNow">Deliver</a></li>
<li><a href="index.php%3Ftitle=Integration_Overview.html" title="Integration Overview">Integrate</a></li>
<li><a href="index.php%3Ftitle=Release_Notes.html" title="Release Notes">Release Notes</a></li>
<li><a href="index.php%3Ftitle=Special:Book&amp;bookcmd=remove_article&amp;arttitle=Customer+Support&amp;oldid=0.html" title="Customer Support">Customer Support</a></li>
<li><a href="index.php%3Ftitle=Books.html" title="Books">Books</a></li>
<li><a href="index.php%3Ftitle=Special:Book&amp;bookcmd=remove_article&amp;arttitle=Video+Tutorials&amp;oldid=0.html" title="Video Tutorials">Video Tutorials</a></li>
<li><a target="_blank" rel="nofollow noreferrer noopener" class="external text" href="http://express.servicenow.com/support/">ServiceNow Express</a></li></ul>
</div>
</div>
</div>
<div class="portlet">
<h5><span class="mw-headline" id="Resources">Resources</span></h5>
<div class="pBody">
<ul><li><a href="index.php%3Ftitle=Category:Contents.html" title="Category:Contents">Site Map &#8211; Tree View</a><br /></li>
<li><a href="index.php%3Ftitle=Special:RecentChanges.html" title="Special:RecentChanges">Recent Changes</a><br /></li>
<li><a href="index.php%3Ftitle=Glossary_of_Terms.html" title="Glossary of Terms">Glossary</a><br /></li>
<li><a href="index.php%3Ftitle=Help:Getting_Started_on_the_ServiceNow_Wiki.html" title="Help:Getting Started on the ServiceNow Wiki">Wiki Help</a></li></ul>
</div>
</div>
<div class="portlet">
<h5><span class="mw-headline" id="Print">Print</span></h5>
<div class="pBody">
<ul><li><a target="_blank" rel="nofollow noreferrer noopener" class="external text" href="index.php%3Ftitle=Special:Book&amp;bookcmd=book_creator.html">Create a Book</a></li>
<li><a href="index.php%3Ftitle=Help:Books.html" title="Help:Books">Book Help</a></li>
<li><a target="_blank" rel="nofollow noreferrer noopener" class="external text" href="index.php%3Ftitle=Special:Book%252Frender_article%252F&amp;arttitle=Allocation_Method_API_Reference.html">Download Page as PDF</a></li>
<li><a target="_blank" rel="nofollow noreferrer noopener" class="external text" href="index.php%3Ftitle=Allocation_Method_API_Reference&amp;printable=yes.html">Printable Version</a></li></ul>
</div>
</div>
		</div>
		</div>
		<div class="generated-sidebar portlet" id="p-coll-print_export" role="navigation">
		<h3>Print/export</h3>
		<div class='pBody'>
							<ul>
											<li id="coll-book_creator_disable"><a href="index.php%3Ftitle=Special:Book&amp;bookcmd=stop_book_creator&amp;referer=Allocation+Method+API+Reference.html">Disable book creator</a></li>
											<li id="coll-download-as-rl"><a href="index.php%3Ftitle=Special:Book&amp;bookcmd=render_article&amp;arttitle=Allocation+Method+API+Reference&amp;returnto=Allocation+Method+API+Reference&amp;oldid=247076&amp;writer=rl.html">Download as PDF</a></li>
											<li id="t-print"><a href="index.php%3Ftitle=Allocation_Method_API_Reference&amp;printable=yes.html" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
									</ul>
					</div>
		</div>
			<div id="p-search" class="portlet" role="search">
			<h3><label for="searchInput">Search</label></h3>

			<div id="searchBody" class="pBody">
				<form action="http://wiki.servicenow.com/index.php" id="searchform">
					<input type='hidden' name="title" value="Special:Search"/>
					<input type="search" name="search" placeholder="Search" title="Search ServiceNow Wiki [f]" accesskey="f" id="searchInput"/>
					<input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchGoButton" class="searchButton"/>&#160;
						<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton"/>
				</form>

							</div>
		</div>
			<div class="portlet" id="p-tb" role="navigation">
			<h3>Toolbox</h3>

			<div class="pBody">
				<ul>
											<li id="t-whatlinkshere"><a href="index.php%3Ftitle=Special:WhatLinksHere%252FAllocation_Method_API_Reference.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here?</a></li>
											<li id="t-recentchangeslinked"><a href="http://wiki.servicenow.com/index.php?title=Special:RecentChangesLinked/Allocation_Method_API_Reference" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
											<li id="t-specialpages"><a href="index.php%3Ftitle=Special:SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
											<li id="t-permalink"><a href="index.php%3Ftitle=Allocation_Method_API_Reference&amp;oldid=247076.html" title="Permanent link to this revision of the page">Permanent link</a></li>
											<li id="t-info"><a href="index.php%3Ftitle=Allocation_Method_API_Reference&amp;action=info.html" title="More information about this page">Page information</a></li>
									</ul>
							</div>
		</div>
			</div><!-- end of the left (by default at least) column -->
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
						<div id="f-poweredbyico">
									<a href="http://www.mediawiki.org/"><img src="resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a>
							</div>
					<ul id="f-list">
									<li id="lastmod"> This page was last modified 19:26, 18 June 2015.</li>
									<li id="privacy"><a href="index.php%3Ftitle=ServiceNow_Wiki:Privacy_policy.html" title="ServiceNow Wiki:Privacy policy">Privacy policy</a></li>
									<li id="about"><a href="index.php%3Ftitle=ServiceNow_Wiki:About.html" title="ServiceNow Wiki:About">About ServiceNow Wiki</a></li>
									<li id="disclaimer"><a href="index.php%3Ftitle=ServiceNow_Wiki:General_disclaimer.html" title="ServiceNow Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
		</div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.loader.state({"user":"ready","user.groups":"ready"});mw.loader.load(["ext.treeandmenu","mediawiki.action.view.postEdit","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.collection.bookcreator"]);});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":886});});</script></body></html>
