<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8"/>
<title>Inbound Email Actions - ServiceNow Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Inbound_Email_Actions","wgTitle":"Inbound Email Actions","wgCurRevisionId":250636,"wgRevisionId":250636,"wgArticleId":1731,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Notification Administration"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Inbound_Email_Actions","wgRelevantArticleId":1731,"wgRequestId":"079686a3c513bbdced581cf1","wgIsProbablyEditable":false,"wgRestrictionEdit":["sysop"],"wgRestrictionMove":["sysop"],"wgCategoryTreePageCategoryOptions":"{\"mode\":20,\"hideprefix\":20,\"showcount\":true,\"namespaces\":false}"});mw.loader.implement("user.options",function($,jQuery,require,module){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function ( $, jQuery, require, module ) {
mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});/*@nomin*/;

});mw.loader.load(["mediawiki.page.startup","ext.voteNY"]);});</script>
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=ext.pygments%257Cmediawiki.legacy.commonPrint%252Cshared%257Cmediawiki.sectionAnchor%257Cmediawiki.skinning.content.externallinks%257Cmediawiki.skinning.interface%257Cskins.monobook.styles&amp;only=styl.css"/>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;printable=1&amp;skin=monobook.css"/>
<script async="" src="load.php%3Fdebug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;printable=1&amp;skin=monobook"></script>
<meta name="generator" content="MediaWiki 1.27.3"/>
<meta name="robots" content="noindex,follow"/>
<meta name="robots" content="index,follow,noarchive"/>
<meta name="copyright" content="ServiceNow"/>
<meta http-equiv="content-language" content="en"/>
<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
<meta name="modified" content="20170831192951"/>
<meta name="canonical" content="//wiki.servicenow.com/index.php?title=Inbound_Email_Actions"/>
<meta name="author" content="ServiceNow"/>
<meta name="twitter:card" content="@NOWsupport"/>
<meta name="twitter:title" content="Inbound Email Actions"/>
<meta name="twitter:creator" content="@NOWsupport"/>
<meta name="twitter:domain" content="servicenow.com"/>
<meta name="keywords" content="Notification Administration"/>
<meta name="category" content="Notification Administration"/>
<link rel="shortcut icon" href="favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php" title="ServiceNow Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="api.php%3Faction=rsd"/>
<link rel="alternate" type="application/atom+xml" title="ServiceNow Wiki Atom feed" href="index.php%3Ftitle=Special:RecentChanges&amp;feed=atom.html"/>
<script type="text/javascript">window.tamBaseUrl='/extensions/TreeAndMenu'</script>

<script type="text/javascript" src="extensions/TreeAndMenu/dtree.js"></script>

<link rel="canonical" href="index.php%3Ftitle=Inbound_Email_Actions.html" />

	<meta property="og:title" content="ServiceNow Wiki:Inbound Email Actions"/>

	<meta property="og:type" content="article"/>

	<meta property="og:site_name" content="ServiceNow Wiki"/>

	<meta property="modified" content="20170831192951"/>

	<meta property="article:published_time" content="20170831192951"/>

	<meta property="article:modified_time" content="20170831192951"/>

	<meta property="article:author" content="ServiceNow"/>

	<meta property="article:tag" content="Notification Administration"/>

	<meta property="og:url" content="//wiki.servicenow.com/index.php?title=Inbound_Email_Actions"/>

</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Inbound_Email_Actions rootpage-Inbound_Email_Actions skin-monobook action-view">
<div id="header">
	<div id="snc_top_toolbar" >
	<ul class="inline" id="sites">
		<li><a href="index.html">Wiki home</a></li>
		<li><a href="http://community.servicenow.com">Community</a></li>
		<li><a href="http://www.servicenow.com/services/training-and-certification.html">Training</a></li>
		<li><a href="https://www.servicenow.com/support.html">Support home</a></li>
		<li><a href="http://www.servicenow.com">Company home</a></li>
		<li><a href="http://info.servicenow.com/demonow/">Demo</a></li>
	</ul>

<!-- Start Adobe analytics staging -->
<script src="http://assets.adobedtm.com/43c21e31f00ba1c49c16c9c6a5acf67ef1e8dfa8/satelliteLib-c41330e93f48feef745e6ecb4b425db9d5da2dea.js"></script>

<!--Begin Google analytics -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-29210697-1']);
  _gaq.push(['_setDomainName', 'servicenow.com']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  _gaq.push(['_trackPageLoadTime']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<!-- End Google analytics, begin other analytics -->

<!--<script type="text/javascript" language="javascript">llactid=11051</script>
<script type="text/javascript" language="javascript" src="https://trackalyzer.com/trackalyze_secure.js"></script>
-->
<!--End analytics-->

	</div>
</div>
<div id="snc_toolbar" >
	<a href="index.html">
	<img src="https://wiki.service-now.com/images/CustomWikiLogoFixed.png" height="64px">
	</a>
<div id="googleSearchBox"> <!--Google Search box -->
<div id='cse-search-form' style='width: 100%;'>Loading</div>
<script src='http://www.google.com/jsapi' type='text/javascript'></script>


<script type='text/javascript'>

google.load('search', '1', {language: 'en', style: google.loader.themes.V2_DEFAULT, callback:loadCSE});

window.onhashchange = function() {
	var url = window.location.href;
	if(url.indexOf("gsc.q") == -1) //call only when not browsing search results.
	{
		resetUI();
	}
}

function resetUI() {
	//reset UI to standard layout. Hide search, restore page content/controls.
	var cactions = document.getElementById('p-cactions');
	var cont = document.getElementById('content');
	var sr = document.getElementById('cse');

	cactions.style.display = 'block';
	sr.style.display = 'none';
	cont.style.display = 'block';
};

function onSubmit() {
	//hide page elements when searching.
	var cactions = document.getElementById('p-cactions');
	cactions.style.display = 'none';
	var sr = document.getElementById('cse');
	sr.style.display = 'block';
	var cont = document.getElementById('content');
	cont.style.display = 'none';
};

function loadCSE() {
	var customSearchOptions = {};
	var orderByOptions = {};
	orderByOptions['keys'] = [{label: 'Relevance', key: ''} , {label: 'Date', key: 'date'}];
	customSearchOptions['enableOrderBy'] = true;
	customSearchOptions['orderByOptions'] = orderByOptions;

	var customSearchControl = new google.search.CustomSearchControl('005409823165138974380:bltnnmgfoek', customSearchOptions);
	customSearchControl.setResultSetSize(google.search.Search.FILTERED_CSE_RESULTSET);
	customSearchControl.setSearchCompleteCallback(this,onSubmit);//set onSubmit script to run when searching

	var options = new google.search.DrawOptions();
	options.setSearchFormRoot('cse-search-form');
	options.setAutoComplete(true);
	customSearchControl.draw('cse', options);
	var historyStarted = customSearchControl.startHistoryManagement();
	if(historyStarted) customSearchControl.setLinkTarget(google.search.Search.LINK_TARGET_SELF);
};

</script>

</div> <!--end Google search box-->
</div>

<div id="globalWrapper">
		<div id="column-content">
			<div id="cse"></div>
			<div id="content" class="mw-body" role="main">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">Inbound Email Actions</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="siteSub">From ServiceNow Wiki</div>
					<div id="contentSub"><!-- Text for discussion pages-->
<a href="index.html" title="Main Page">Home</a> &gt; <a href="index.php%3Ftitle=Administer_ServiceNow.html" title="Administer ServiceNow">Administer</a> &gt; <a href="index.php%3Ftitle=Service_Administration.html" title="Service Administration">Service Administration</a> &gt; <a href="index.php%3Ftitle=Notifications.html" title="Notifications">Notifications</a> &gt; Inbound Email Actions</div>
										<div id="jump-to-nav" class="mw-jump">Jump to: <a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#column-one">navigation</a>, <a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#searchInput">search</a></div>

					<!-- start content -->
					<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><table cellspacing="5" cellpadding="5" class="reproduce">

<tr>
<td scope="row" style="vertical-align:middle;"> <div class="floatleft"><a href="index.php%3Ftitle=File:Warning.gif.html" class="image" title="Note"><img alt="Note" src="images/thumb/c/c2/Warning.gif/16px-Warning.gif.png" width="16" height="16" srcset="/images/thumb/c/c2/Warning.gif/24px-Warning.gif.png 1.5x, /images/thumb/c/c2/Warning.gif/32px-Warning.gif.png 2x" /></a></div>
</td>
<td scope="row" style="vertical-align:top"> <b>Note:</b> <i>This article applies to Fuji and earlier releases. For more current information, see <a target="_blank" rel="nofollow noreferrer noopener" class="external text" href="https://docs.servicenow.com/bundle/jakarta-servicenow-platform/page/administer/notification/concept/c_InboundEmailActions.html">Inbound E-mail Actions</a> at <a target="_blank" rel="nofollow noreferrer noopener" class="external free" href="http://docs.servicenow.com">http://docs.servicenow.com</a></i>
<p><b>The ServiceNow Wiki is no longer being updated. Visit <a target="_blank" rel="nofollow noreferrer noopener" class="external free" href="http://docs.servicenow.com">http://docs.servicenow.com</a> for the latest product documentation.</b>
</p>
</td></tr></table>
<p><br />
</p>
<div class="noprint">
<table class="topicbox">

<tr>
<th> <a href="index.php%3Ftitle=Notifications.html" title="Notifications">Notifications</a>
</th></tr>
<tr>
<td> <div class='dtree' id='5a212229a7e49t'></div><script type="text/javascript">window.tamOnload_tam5a212229a7e49t=[];tree = new dTree('tam5a212229a7e49t');
                                               for (i in tree.icon) tree.icon[i] = '/extensions/TreeAndMenu/'+tree.icon[i];
                                               tree.config.useLines = false;
                                               tree.add(0,-1,'');
                                               tam5a212229a7e49t = tree;
                                               tam5a212229a7e49t.add(1, 0, 'Introduction');

tam5a212229a7e49t.add(2, 1, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=System_Mailboxes\&quot;" title=\"System Mailboxes\">System Mailboxes</a>');
tam5a212229a7e49t.add(3, 1, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Introduction_to_Email_Controls\&quot;" title=\"Introduction to Email Controls\">Email Controls</a>');
tam5a212229a7e49t.add(4, 1, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Baseline_Email_Notifications\&quot;" title=\"Baseline Email Notifications\">Baseline Email Notifications</a> ');
tam5a212229a7e49t.add(5, 0, 'Setup');
tam5a212229a7e49t.add(6, 5, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Configuring_Email\&quot;" title=\"Configuring Email\">Configuring Email</a> ');
tam5a212229a7e49t.add(7, 5, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Email_Notifications\&quot;" title=\"Email Notifications\">Email Notifications</a>');
tam5a212229a7e49t.add(8, 7, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Events_and_Email_Notification\&quot;" title=\"Events and Email Notification\">Events and Email Notification</a>');
tam5a212229a7e49t.add(9, 5, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Email_Templates\&quot;" title=\"Email Templates\">Email Templates</a>');
tam5a212229a7e49t.add(10, 5, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Constructing_an_Email_Message\&quot;" title=\"Constructing an Email Message\">Constructing an Email Message</a>');
tam5a212229a7e49t.add(11, 5, ' <a href="http://wiki.servicenow.com/\&quot;/index.php?title=Email_Properties\&quot;" title=\"Email Properties\">Email Properties</a>');
tam5a212229a7e49t.add(12, 5, ' <a href="http://wiki.servicenow.com/\&quot;/index.php?title=Email_Attachment_Limits\&quot;" title=\"Email Attachment Limits\" class=\"mw-redirect\">Email Attachment Limits</a>');
tam5a212229a7e49t.add(13, 0, 'Configuration Options');
tam5a212229a7e49t.add(14, 13, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Enabling_the_Email_Client\&quot;" title=\"Enabling the Email Client\">Enabling the Email Client</a>');
tam5a212229a7e49t.add(15, 13, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Email_Accounts\&quot;" title=\"Email Accounts\">Email Accounts</a>');
tam5a212229a7e49t.add(16, 13, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=OAuth_Email_Authentication\&quot;" title=\"OAuth Email Authentication\">OAuth Email Authentication</a>');
tam5a212229a7e49t.add(17, 13, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Email_Filters\&quot;" title=\"Email Filters\">Email Filters</a>');
tam5a212229a7e49t.add(18, 13, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Notification_Examples\&quot;" title=\"Notification Examples\">Notification Examples</a>  ');
tam5a212229a7e49t.add(19, 13, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Scripting_for_Email_Notifications\&quot;" title=\"Scripting for Email Notifications\">Scripting for Email Notifications</a>');
tam5a212229a7e49t.add(20, 0, 'Performing Tasks from Inbound Email');
tam5a212229a7e49t.add(21, 20, '<strong class=\"selflink\">Inbound Email Actions</strong>');
tam5a212229a7e49t.add(22, 20, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Order_Email_Processing\&quot;" title=\"Order Email Processing\" class=\"mw-redirect\">Order Email Processing</a>');
tam5a212229a7e49t.add(23, 20, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Examples_of_Inbound_Email_Actions\&quot;" title=\"Examples of Inbound Email Actions\">Examples of Inbound Email Actions</a>');
tam5a212229a7e49t.add(24, 0, 'Subscribing to Notifications');
tam5a212229a7e49t.add(25, 24, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Subscription_Based_Notifications\&quot;" title=\"Subscription Based Notifications\">Subscription Based Notifications</a> ');
tam5a212229a7e49t.add(26, 24, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Setting_Up_Subscription_Based_Notifications\&quot;" title=\"Setting Up Subscription Based Notifications\">Setting Up Subscription Based Notifications</a>');
tam5a212229a7e49t.add(27, 24, '<a href="http://wiki.servicenow.com/\&quot;/index.php?title=Using_Subscription_Based_Notifications\&quot;" title=\"Using Subscription Based Notifications\">Using Subscription Based Notifications</a>');

                                               document.getElementById('5a212229a7e49t').innerHTML = tam5a212229a7e49t.toString();
                                               
                                               for(i in window.tamOnload_tam5a212229a7e49t) { window.tamOnload_tam5a212229a7e49t[i](); }</script>


</td></tr>
<tr>
<th> <center><b><a href="index.php%3Ftitle=Book:Notifications.html" title="Book:Notifications"><img alt="Knowledge.gif" src="images/d/dd/Knowledge.gif" width="16" height="16" /></a> <a href="index.php%3Ftitle=Book:Notifications.html" title="Book:Notifications">Get the Book</a></b></center>
</th></tr>
<tr>
<td>
</td></tr></table>
</div>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#Overview"><span class="tocnumber">1</span> <span class="toctext">Overview</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#Creating_an_Inbound_Email_Action"><span class="tocnumber">2</span> <span class="toctext">Creating an Inbound Email Action</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#Matching_Incoming_Email_to_an_Inbound_Action_Type"><span class="tocnumber">3</span> <span class="toctext">Matching Incoming Email to an Inbound Action Type</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#Specifying_Recognized_Reply_Prefixes"><span class="tocnumber">3.1</span> <span class="toctext">Specifying Recognized Reply Prefixes</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#Specifying_Recognized_Forward_Prefixes"><span class="tocnumber">3.2</span> <span class="toctext">Specifying Recognized Forward Prefixes</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#Processing_Forwards_as_Replies"><span class="tocnumber">3.3</span> <span class="toctext">Processing Forwards as Replies</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#Matching_Incoming_Email_to_Existing_Records"><span class="tocnumber">3.4</span> <span class="toctext">Matching Incoming Email to Existing Records</span></a>
<ul>
<li class="toclevel-3 tocsection-8"><a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#Examples_of_Matching_Watermarks_in_the_Subject_Line_or_Body"><span class="tocnumber">3.4.1</span> <span class="toctext">Examples of Matching Watermarks in the Subject Line or Body</span></a></li>
<li class="toclevel-3 tocsection-9"><a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#Examples_of_Matching_Record_Numbers_in_the_Subject_Line"><span class="tocnumber">3.4.2</span> <span class="toctext">Examples of Matching Record Numbers in the Subject Line</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-10"><a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#Matching_Email_to_Existing_Users"><span class="tocnumber">4</span> <span class="toctext">Matching Email to Existing Users</span></a>
<ul>
<li class="toclevel-2 tocsection-11"><a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#Impersonating_Users_to_Run_Inbound_Actions"><span class="tocnumber">4.1</span> <span class="toctext">Impersonating Users to Run Inbound Actions</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-12"><a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#Creating_Users_from_Incoming_Email"><span class="tocnumber">5</span> <span class="toctext">Creating Users from Incoming Email</span></a>
<ul>
<li class="toclevel-2 tocsection-13"><a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#Enabling_Automatic_User_Creation"><span class="tocnumber">5.1</span> <span class="toctext">Enabling Automatic User Creation</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#Upgrading_the_User_Creation_Method_to_Use_the_Full_Email_Address"><span class="tocnumber">5.2</span> <span class="toctext">Upgrading the User Creation Method to Use the Full Email Address</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-15"><a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#Accessing_Email_Objects_with_Variables"><span class="tocnumber">6</span> <span class="toctext">Accessing Email Objects with Variables</span></a>
<ul>
<li class="toclevel-2 tocsection-16"><a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#Processing_Recipients_in_Inbound_Email"><span class="tocnumber">6.1</span> <span class="toctext">Processing Recipients in Inbound Email</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-17"><a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#Setting_Field_Values_from_the_Email_Body"><span class="tocnumber">7</span> <span class="toctext">Setting Field Values from the Email Body</span></a>
<ul>
<li class="toclevel-2 tocsection-18"><a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#Matching_the_Sender.27s_Email_Address_to_a_User"><span class="tocnumber">7.1</span> <span class="toctext">Matching the Sender's Email Address to a User</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-19"><a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#Assignment_of_Tasks_via_Email"><span class="tocnumber">8</span> <span class="toctext">Assignment of Tasks via Email</span></a></li>
<li class="toclevel-1 tocsection-20"><a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#Redirecting_Emails_to_Different_Assignment_Groups"><span class="tocnumber">9</span> <span class="toctext">Redirecting Emails to Different Assignment Groups</span></a></li>
<li class="toclevel-1 tocsection-21"><a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#Attachments"><span class="tocnumber">10</span> <span class="toctext">Attachments</span></a></li>
<li class="toclevel-1 tocsection-22"><a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#Character_Encoding"><span class="tocnumber">11</span> <span class="toctext">Character Encoding</span></a></li>
<li class="toclevel-1 tocsection-23"><a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#Setting_Maximum_Body_Size"><span class="tocnumber">12</span> <span class="toctext">Setting Maximum Body Size</span></a></li>
<li class="toclevel-1 tocsection-24"><a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#Preventing_Untrusted_Users_from_Triggering_Inbound_Actions"><span class="tocnumber">13</span> <span class="toctext">Preventing Untrusted Users from Triggering Inbound Actions</span></a></li>
<li class="toclevel-1 tocsection-25"><a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#Allowing_Locked_Out_Users_to_Trigger_Inbound_Email_Actions"><span class="tocnumber">14</span> <span class="toctext">Allowing Locked Out Users to Trigger Inbound Email Actions</span></a></li>
<li class="toclevel-1 tocsection-26"><a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#Using_sys_email"><span class="tocnumber">15</span> <span class="toctext">Using sys_email</span></a></li>
<li class="toclevel-1 tocsection-27"><a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#Troubleshooting"><span class="tocnumber">16</span> <span class="toctext">Troubleshooting</span></a>
<ul>
<li class="toclevel-2 tocsection-28"><a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#Logging"><span class="tocnumber">16.1</span> <span class="toctext">Logging</span></a></li>
</ul>
</li>
</ul>
</div>

<h1><span class="mw-headline" id="Overview"><span class="mw-headline-number">1</span> Overview</span></h1>
<p>Inbound email actions enable an administrator to define the actions ServiceNow takes when receiving email. Inbound email actions are similar to business rules, using both conditions and scripts. The inbound email action checks the email for a watermark that associates it with a task and checks for other conditions. If the conditions are met, the inbound email action runs the script.
</p><p>By default, if an email has no identifiable watermark, an inbound email action attempts to create a new incident from the message. If the email has a watermark of an existing incident, an inbound email action updates the existing incident according to the action's script. For detailed examples of email actions that interact with incidents, problems, and change requests, see <a href="index.php%3Ftitle=Examples_of_Inbound_Email_Actions.html" title="Examples of Inbound Email Actions">Examples of Inbound Email Actions</a>.
</p><p>The system ignores the domain that the inbound email action record is in when it creates a record based on the inbound email action. Keep inbound actions in the global domain. For example, if your inbound email action creates an incident, the system creates the incident in the same domain as the user in the Caller field. If that user is not in the User [sys_user] table, the incident is in the global domain.
</p>
<h1><span class="mw-headline" id="Creating_an_Inbound_Email_Action"><span class="mw-headline-number">2</span> Creating an Inbound Email Action</span></h1>
<p>To add an inbound email action:
</p>
<ol><li>Navigate to <b>System Policy  &gt; Email &gt; Inbound Actions</b>.</li>
<li>Click <b>New</b>.</li>
<li>Complete the fields on the form (see table).</li></ol>
<dl><dd><div class="thumb tleft"><div class="thumbinner" style="width:752px;"><a href="index.php%3Ftitle=File:Inbound_email_action_Eureka.png.html" class="image"><img alt="" src="images/thumb/a/a8/Inbound_email_action_Eureka.png/750px-Inbound_email_action_Eureka.png" width="750" height="320" class="thumbimage" srcset="/images/a/a8/Inbound_email_action_Eureka.png 1.5x, /images/a/a8/Inbound_email_action_Eureka.png 2x" /></a>  <div class="thumbcaption"><div class="magnify"><a href="index.php%3Ftitle=File:Inbound_email_action_Eureka.png.html" class="internal" title="Enlarge"></a></div>The Create Incident inbound action</div></div></div><br style="clear:both;" /></dd></dl>
<table cellspacing="5" cellpadding="5" class="reproduce">

<tr>
<td scope="row" style="vertical-align:middle;"> <div class="floatleft"><a href="index.php%3Ftitle=File:Warning.gif.html" class="image" title="Note"><img alt="Note" src="images/thumb/c/c2/Warning.gif/16px-Warning.gif.png" width="16" height="16" srcset="/images/thumb/c/c2/Warning.gif/24px-Warning.gif.png 1.5x, /images/thumb/c/c2/Warning.gif/32px-Warning.gif.png 2x" /></a></div>
</td>
<td scope="row" style="vertical-align:top"> <b>Note:</b> <i>You might need to <a href="index.php%3Ftitle=Personalizing_Forms.html" title="Personalizing Forms">personalize the form</a> to see all the fields below.</i>
</td></tr></table>
<table class="standard">

<tr>
<th> Field
</th>
<th> Description
</th></tr>
<tr>
<td> Name
</td>
<td> Enter a descriptive name for this email action.
</td></tr>
<tr>
<td> Target table
</td>
<td> Select the table where the action will add or update records.
</td></tr>
<tr>
<td> Type
</td>
<td> Select the message type required to run the action. The action runs only if the inbound email is of the selected type. Available types are:
<ul><li> <b>New:</b> An email that is not recognized as a reply or forward.</li>
<li> <b>Reply:</b> An email with a watermark with an In-Reply-To email header, or whose subject line begins with a recognized <a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#Specifying_Recognized_Reply_Prefixes">reply prefix</a>.</li>
<li> <b>Forward:</b> An email whose subject line begins with a recognized <a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#Specifying_Recognized_Forward_Prefixes">forward prefix</a>, even if the email also contains a watermark or In-Reply-To header.</li></ul>
<dl><dd><b>Note:</b> By default, inbound emails of the <b>Forward</b> type always generate new incidents regardless of the presence of a watermark. If this behavior does not match your business logic, you can change the recognized reply and forward prefixes to treat forwards like replies.</dd></dl>
</td></tr>
<tr>
<td> Condition
</td>
<td> [Optional] Enter a statement that determines when the inbound email action runs. If a condition is entered, the action runs only when the condition statement evaluates to true. For example: <div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nx">email</span><span class="p">.</span><span class="nx">subject</span><span class="p">.</span><span class="nx">startsWith</span><span class="p">(</span><span class="s2">&quot;chg:&quot;</span><span class="p">)</span>
</pre></div>
</td></tr>
<tr>
<td> Active
</td>
<td> Select this check box to enable the action. Clear the check box to disable the action.
</td></tr>
<tr>
<td> From
</td>
<td> [Optional] Select the user required to run the action. If a user is selected, the action runs only when the email sender matches the user name. Leave this field blank to perform the action for all users.
</td></tr>
<tr>
<td> Script
</td>
<td> Enter the script the action runs. Typically, this script uses the <i>validators</i> <a href="index.php%3Ftitle=Script_Includes.html#How_Do_I_Use_Them.3F" title="Script Includes">script include</a> and <a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#Accessing_Email_Objects_with_Variables">email variables</a>.
</td></tr>
<tr>
<td> Description
</td>
<td> Enter a detailed explanation of what this inbound email action does.
</td></tr>
<tr>
<td bgcolor="#f4f4f9" class="left" colspan="2"><b>Other fields</b>
</td></tr>
<tr>
<td> Order
</td>
<td> Enter a number to define the order in which this email action should be processed. Actions with lower numbers are processed first. For more information, see <a href="index.php%3Ftitle=Ordered_Email_Processing.html" title="Ordered Email Processing">Ordered Email Processing</a>. This field is <i>not</i> installed by the Ordered Email Processing plugin.
</td></tr></table>
<table cellspacing="5" cellpadding="5" class="reproduce">

<tr>
<td scope="row" style="vertical-align:middle;"> <div class="floatleft"><a href="index.php%3Ftitle=File:Warning.gif.html" class="image" title="Note"><img alt="Note" src="images/thumb/c/c2/Warning.gif/16px-Warning.gif.png" width="16" height="16" srcset="/images/thumb/c/c2/Warning.gif/24px-Warning.gif.png 1.5x, /images/thumb/c/c2/Warning.gif/32px-Warning.gif.png 2x" /></a></div>
</td>
<td scope="row" style="vertical-align:top"> <b>Note:</b> <i>For sample scripts, see the <a href="index.php%3Ftitle=Useful_Scripts_portal.html" title="Useful Scripts portal" class="mw-redirect">Useful Scripts portal</a>.</i>
</td></tr></table>
<p><br />
</p>
<h1><span class="mw-headline" id="Matching_Incoming_Email_to_an_Inbound_Action_Type"><span class="mw-headline-number">3</span> Matching Incoming Email to an Inbound Action Type</span></h1>
<p>ServiceNow uses the following logic to match an email to a specific inbound action type.
</p>
<div class="thumb tleft"><div class="thumbinner" style="width:786px;"><a href="index.php%3Ftitle=File:Inbound_email_action_type.png.html" class="image"><img alt="" src="images/7/77/Inbound_email_action_type.png" width="784" height="547" class="thumbimage" /></a>  <div class="thumbcaption">How ServiceNow matches email to an inbound action type</div></div></div> <br style="clear:both;" />
<table class="standard">

<tr>
<th> Inbound Email Action Type
</th>
<th> Required Matching Criteria
</th>
<th> Name of Default Action (Incident table)
</th>
<th> Result of Default Action
</th></tr>
<tr>
<td> Forward
</td>
<td> The email contains the following conditions:
<ol><li>A subject starting with a <a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#Specifying_Recognized_Forward_Prefixes">recognized forward prefix</a> (even if a watermark or an In-Reply-To header is present).</li>
<li>From &lt;user email&gt; appears anywhere in the email body.</li></ol>
</td>
<td> Create Incident (Forwarded)
</td>
<td> Create new record
</td></tr>
<tr>
<td> Reply
</td>
<td> The email contains one of the following conditions and the table specified in the email matches the table of the inbound action:
<ol><li>A valid watermark that <a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#Matching_Incoming_Email_to_Existing_Records">matches an existing record</a>.</li>
<li>An In-Reply-To email header (when no watermark is present) that <a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#Matching_Incoming_Email_to_Existing_Records">matches an existing record</a>.</li>
<li>A subject line starting with a <a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#Specifying_Recognized_Reply_Prefixes">recognized reply prefix</a>  (when neither a watermark nor an In-Reply-To header is present) and a valid record number that <a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#Matching_Incoming_Email_to_Existing_Records">matches an existing record</a>.</li></ol>
</td>
<td> Update Incident (BP)
</td>
<td> Update existing record
</td></tr>
<tr>
<td> New
</td>
<td> The email does not meet the conditions for either a reply or forward type inbound email action
</td>
<td> Create Incident
</td>
<td> Create new record
</td></tr></table>
<p>If more than one inbound action is available for a particular type, ServiceNow uses the <b>Table</b> field to <a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#Matching_Incoming_Email_to_Existing_Records">match the email to a particular table</a>. If there is also more than one action for the inbound action's table, ServiceNow uses the <b>Order</b> field to determine the <a href="index.php%3Ftitle=Ordered_Email_Processing.html" title="Ordered Email Processing">order in which the actions run</a>.
</p>
<h2><span class="mw-headline" id="Specifying_Recognized_Reply_Prefixes"><span class="mw-headline-number">3.1</span> Specifying Recognized Reply Prefixes</span></h2>
<p>When no watermark or In-Reply-To email header is present, ServiceNow recognizes email containing a prefix from the <tt>glide.email.reply_subject_prefix</tt> property as reply email. Emails with these prefixes trigger inbound email actions of the type reply. Set this property if your email system uses non-standard reply prefixes. 
</p>
<table class="standard">

<tr>
<th> Property
</th>
<th> Description
</th></tr>
<tr>
<td> glide.email.reply_subject_prefix
</td>
<td> Specifies the list of prefixes (comma-separated) in the subject line that identify an email reply.
<ul><li><b>Type:</b> string</li>
<li><b>Default value:</b> re:,aw:,r:</li>
<li><b>Location:</b> <a href="index.php%3Ftitle=Special:Book&amp;bookcmd=add_article&amp;arttitle=Adding+a+Property&amp;oldid=0.html" title="Adding a Property">Add</a> to the System Properties [sys_properties] table</li></ul>
<table cellspacing="5" cellpadding="5" class="reproduce">

<tr>
<td scope="row" style="vertical-align:middle;"> <div class="floatleft"><a href="index.php%3Ftitle=File:Warning.gif.html" class="image" title="Note"><img alt="Note" src="images/thumb/c/c2/Warning.gif/16px-Warning.gif.png" width="16" height="16" srcset="/images/thumb/c/c2/Warning.gif/24px-Warning.gif.png 1.5x, /images/thumb/c/c2/Warning.gif/32px-Warning.gif.png 2x" /></a></div>
</td>
<td scope="row" style="vertical-align:top"> <b>Note:</b> <i>Prefixes are case insensitive.</i>
</td></tr></table>
</td></tr></table>
<h2><span class="mw-headline" id="Specifying_Recognized_Forward_Prefixes"><span class="mw-headline-number">3.2</span> Specifying Recognized Forward Prefixes</span></h2>
<p>ServiceNow recognizes any email whose subject line contains a prefix from the <tt>glide.email.reply_subject_prefix</tt> property as forwarded email. Emails with these prefixes trigger inbound email actions of the type forward. Set this property if your email system uses non-standard forward prefixes or you want forwards to behave like replies.
</p>
<table class="standard">

<tr>
<th> Property
</th>
<th> Description
</th></tr>
<tr>
<td> glide.email.forward_subject_prefix
</td>
<td> Specifies the list of prefixes (comma-separated) in the subject line that identify a forwarded email.
<ul><li><b>Type:</b> string</li>
<li><b>Default value:</b> fw:,fwd:</li>
<li><b>Location:</b> <a href="index.php%3Ftitle=Special:Book&amp;bookcmd=add_article&amp;arttitle=Adding+a+Property&amp;oldid=0.html" title="Adding a Property">Add</a> to the System Properties [sys_properties] table</li></ul>
<table cellspacing="5" cellpadding="5" class="reproduce">

<tr>
<td scope="row" style="vertical-align:middle;"> <div class="floatleft"><a href="index.php%3Ftitle=File:Warning.gif.html" class="image" title="Note"><img alt="Note" src="images/thumb/c/c2/Warning.gif/16px-Warning.gif.png" width="16" height="16" srcset="/images/thumb/c/c2/Warning.gif/24px-Warning.gif.png 1.5x, /images/thumb/c/c2/Warning.gif/32px-Warning.gif.png 2x" /></a></div>
</td>
<td scope="row" style="vertical-align:top"> <b>Note:</b> <i>Prefixes are case insensitive.</i>
</td></tr></table>
</td></tr></table>
<h2><span class="mw-headline" id="Processing_Forwards_as_Replies"><span class="mw-headline-number">3.3</span> Processing Forwards as Replies</span></h2>
<p>You can force inbound actions to process forwarded mail as replied mail by modifying the subject prefix properties as follows.
</p>
<table class="standard">

<tr>
<th> Property
</th>
<th> Value Needed
</th></tr>
<tr>
<td> glide.email.reply_subject_prefix
</td>
<td> re:,aw:,r:,fw:,fwd:
</td></tr>
<tr>
<td> glide.email.forward_subject_prefix
</td>
<td> [any text that is not a forward prefix]
</td></tr></table>
<p>This causes all forwarded and replied to mail to be processed by the Update Incident inbound action.
</p><p>The <tt>glide.email.forward_subject_prefix</tt> property must contain some text in order for the forwarded email to be processed as a Reply. It can be any text except a forward prefix (that is, fw:,fwd:).
</p>
<h2><span class="mw-headline" id="Matching_Incoming_Email_to_Existing_Records"><span class="mw-headline-number">3.4</span> Matching Incoming Email to Existing Records</span></h2>
<p>To understand how the instance matching incoming email to existing records, see <a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#Matching_Incoming_Email_to_an_Inbound_Action_Type">this graphic</a>.
</p><p>The instance searches for watermarks in the email subject line first, then in the email body. If no watermark is present, the instances searches for an In-Reply-To email header that matches an existing record. If that is not found, the instances searches the subject line for a recognized reply prefix.
</p>
<table cellspacing="5" cellpadding="5" class="reproduce">

<tr>
<td scope="row" style="vertical-align:middle;"> <div class="floatleft"><a href="index.php%3Ftitle=File:Warning.gif.html" class="image" title="Note"><img alt="Note" src="images/thumb/c/c2/Warning.gif/16px-Warning.gif.png" width="16" height="16" srcset="/images/thumb/c/c2/Warning.gif/24px-Warning.gif.png 1.5x, /images/thumb/c/c2/Warning.gif/32px-Warning.gif.png 2x" /></a></div>
</td>
<td scope="row" style="vertical-align:top"> <b>Note:</b> <i>Some versions of Microsoft Exchange Server require a hotfix to support the "In-Reply-To" header when replying to email that originates from outside the organization.</i>
</td></tr></table>
<p><br />
</p>
<h3><span class="mw-headline" id="Examples_of_Matching_Watermarks_in_the_Subject_Line_or_Body"><span class="mw-headline-number">3.4.1</span> Examples of Matching Watermarks in the Subject Line or Body</span></h3>
<p>The following examples illustrate how ServiceNow matches watermarks in an email's subject line or body.
</p>
<table class="standard">

<tr>
<th> Subject Line or Body Contents
</th>
<th> Matching results
</th></tr>
<tr>
<td> Ref:MSG0000008
</td>
<td> ServiceNow recognizes this as a watermark and searches the Email Watermarks [sys_watermarks] table for a record with the number MSG0000008. If this watermark exists, ServiceNow matches the email to the associated record. If this watermark does not exist, ServiceNow uses the inbound action for new emails to create a new incident, and associates the new incident with the email.
</td></tr>
<tr>
<td> Ref:MSGWTR0000008
</td>
<td> ServiceNow recognizes this as a watermark and searches the Email Watermarks [sys_watermarks] table for a record with the number MSGWTR0000008. If this watermark exists, ServiceNow matches the email to the associated record. If this watermark does not exist, ServiceNow uses the inbound action for new emails to create a new incident, and associates the new incident with the email.
</td></tr>
<tr>
<td> Ref:WTR0000008
</td>
<td> ServiceNow recognizes this as a watermark and searches the Email Watermarks [sys_watermarks] table for a record with the number WTR0000008. If this watermark exists, ServiceNow matches the email to the associated record. If this watermark does not exist, ServiceNow uses the inbound action for new emails to create a new incident, and associates the new incident with the email.
</td></tr>
<tr>
<td> MSG0000008
</td>
<td> ServiceNow does <b>not</b> recognize this as a watermark because it does not start with the Ref: prefix. It uses the inbound action for new emails to create a new incident, and associates the new incident with the email.
</td></tr></table>
<h3><span class="mw-headline" id="Examples_of_Matching_Record_Numbers_in_the_Subject_Line"><span class="mw-headline-number">3.4.2</span> Examples of Matching Record Numbers in the Subject Line</span></h3>
<p>The following examples illustrate how ServiceNow matches record numbers in an email's subject line to an existing record when no watermark is present. 
</p>
<table class="standard">

<tr>
<th> Subject Line Contents
</th>
<th> Matching Results
</th></tr>
<tr>
<td> RE: Example INC0005574
</td>
<td> ServiceNow recognizes this subject line as a reply and recognizes the INC prefix as belonging to the incident table. ServiceNow searches the incident table for an existing record INC0005574. If this incident exists, the email is associated with this incident. If this incident record does not exist, ServiceNow uses the inbound action for new emails to create a new incident, and associates the new incident with the email.
</td></tr>
<tr>
<td> RE: Example "INC0005574" <br />
<p>RE: Example *INC0005574
</p>
</td>
<td> The instance recognizes this subject line as a reply but does recognizes the "INC prefix as belonging to the Incident table because of the quotation mark. The same error occurs for any character other than a space before the record number. The instance instead uses the inbound action for new emails to create an incident, and associates the new incident with the email.
</td></tr>
<tr>
<td> RE: "Example INC0005574" <br />
<p>RE: Example INC0005574*
</p>
</td>
<td> The instance recognizes this subject line as a reply and recognizes the INC prefix as belonging to the Incident table. The instance searches the Incident table for an existing record INC0005574", which it will not find because of the quotation mark. The same error occurs for any character other than a space at the end of the record number. The instance instead uses the inbound action for new emails to create an incident, and associates the new incident with the email.
</td></tr>
<tr>
<td> RE: CHG0008593 and INC000576
</td>
<td> ServiceNow recognizes this subject line as a reply and recognizes one, but not both, of the number prefixes. There is no way to predict which prefix ServiceNow will match first. Whichever prefix it matches, it searches the corresponding table for a matching record. If the record exists, the email is associated with the table. If the record does not exist, ServiceNow uses the inbound action for new emails to create a new incident and associates the new incident with the email.
<p><b>Note:</b> ServiceNow does not support processing email with multiple numbers in the subject line because there is no way to predict which record ServiceNow will match first. For this reason, ServiceNow does not recommend creating notifications that include more than one $number variable.
</p>
</td></tr>
<tr>
<td> FW: Example INC0005574
</td>
<td> ServiceNow recognizes this subject line as a forward because of the FW: prefix and uses the inbound action for forwarded emails to create a new incident, and associates the new incident with the email.
</td></tr>
<tr>
<td> Example INC0005574
</td>
<td> ServiceNow recognizes this subject as a new email because it does not contain a matching reply or forward prefix. It uses the inbound action for new emails to create a new incident, and associates the new incident with the email.
</td></tr></table>
<h1><span class="mw-headline" id="Matching_Email_to_Existing_Users"><span class="mw-headline-number">4</span> Matching Email to Existing Users</span></h1>
<p>When ServiceNow receives an email message, the system searches for an existing user record with the same email address as the sender. For example:
</p>
<table class="standard">

<tr>
<th> Value of email.from variable
</th>
<th> Matching User ID
</th>
<th> Email address
</th>
<th> Name
</th></tr>
<tr>
<td> michael.tossi@company.com
</td>
<td> michael.tossi@company.com
</td>
<td> michael.tossi@company.com
</td>
<td> Michael Tossi
</td></tr>
<tr>
<td> "Michael Tossi" &lt;michael.tossi@company.com&gt;
</td>
<td> michael.tossi@company.com
</td>
<td> michael.tossi@company.com
</td>
<td> Michael Tossi
</td></tr>
<tr>
<td> "Tossi, Michael" &lt;michael.tossi@company.com&gt;
</td>
<td> michael.tossi@company.com
</td>
<td> michael.tossi@company.com
</td>
<td> Michael Tossi
</td></tr>
<tr>
<td> "Tossi" &lt;mtossi@company.com&gt;
</td>
<td> mtossi@company.com
</td>
<td> mtossi@company.com
</td>
<td> Tossi
</td></tr></table>
<table cellspacing="5" cellpadding="5" class="reproduce">

<tr>
<td scope="row" style="vertical-align:middle;"> <div class="floatleft"><a href="index.php%3Ftitle=File:Warning.gif.html" class="image" title="Note"><img alt="Note" src="images/thumb/c/c2/Warning.gif/16px-Warning.gif.png" width="16" height="16" srcset="/images/thumb/c/c2/Warning.gif/24px-Warning.gif.png 1.5x, /images/thumb/c/c2/Warning.gif/32px-Warning.gif.png 2x" /></a></div>
</td>
<td scope="row" style="vertical-align:top"> <b>Note:</b> <i>This functionality requires that you <a href="index.php%3Ftitle=Activating_ServiceNow_Plugins.html" title="Activating ServiceNow Plugins">activate</a> the Email Automatic User Creation plugin.  For more information on the plugin, see <a href="index.php%3Ftitle=Inbound_Email_Actions.html#Upgrading_the_User_Creation_Method_to_Use_the_Full_Email_Address" title="Inbound Email Actions">Upgrading the User Creation Method to Use the Full Email Address</a>.</i>
</td></tr></table>
<p><br />
Inbound Email Action scripts no longer support the gs.createUser() method. Use either the automatically-generated email variables or the gs.GetUserID() method instead.
</p>
<h2><span class="mw-headline" id="Impersonating_Users_to_Run_Inbound_Actions"><span class="mw-headline-number">4.1</span> Impersonating Users to Run Inbound Actions</span></h2>
<p>If the sender of an incoming email matches an existing user, the instance <a href="index.php%3Ftitle=Impersonating_a_User.html" title="Impersonating a User">impersonates</a> the matching user to complete any inbound email actions. If the sender does not match an existing user, the instance impersonates the <b>Guest</b> user to complete any inbound email actions. If the impersonated user is <a href="index.php%3Ftitle=Managing_User_Sessions.html#Locking_out_a_User" title="Managing User Sessions">locked out</a>, the inbound email action fails.
</p>
<table cellspacing="5" cellpadding="5" class="reproduce">

<tr>
<td scope="row" style="vertical-align:middle;"> <div class="floatleft"><a href="index.php%3Ftitle=File:Warning.gif.html" class="image" title="Note"><img alt="Note" src="images/thumb/c/c2/Warning.gif/16px-Warning.gif.png" width="16" height="16" srcset="/images/thumb/c/c2/Warning.gif/24px-Warning.gif.png 1.5x, /images/thumb/c/c2/Warning.gif/32px-Warning.gif.png 2x" /></a></div>
</td>
<td scope="row" style="vertical-align:top"> <b>Note:</b> <i>If inbound email comes from an untrusted domain, the instance impersonates the <b>Guest</b> user unless you explicitly <a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#Preventing_Untrusted_Users_from_Triggering_Inbound_Actions">prevent users from untrusted domains from triggering inbound actions</a>.</i>
</td></tr></table>
<p><br />
</p>
<h1><span class="mw-headline" id="Creating_Users_from_Incoming_Email"><span class="mw-headline-number">5</span> Creating Users from Incoming Email</span></h1>
<p>ServiceNow can automatically create users from incoming email. If the search does not find a user with a matching email address, ServiceNow can create a new user with the User ID [sys_user.user_name] set to the sender's full email address.
</p>
<table class="standard">

<tr>
<th> Value of email.from variable
</th>
<th> User ID created
</th>
<th> Email address
</th>
<th> Name
</th></tr>
<tr>
<td> new.user@company.com
</td>
<td> new.user@company.com
</td>
<td> new.user@company.com
</td>
<td> New User
</td></tr>
<tr>
<td> "New User" &lt;new.user@company.com&gt;
</td>
<td> new.user@company.com
</td>
<td> new.user@company.com
</td>
<td> New User
</td></tr>
<tr>
<td> "User, New" &lt;new.user@company.com&gt;
</td>
<td> new.user@company.com
</td>
<td> new.user@company.com
</td>
<td> New User
</td></tr>
<tr>
<td> "User" &lt;nuser@company.com&gt;
</td>
<td> nuser@company.com
</td>
<td> nuser@company.com
</td>
<td> User
</td></tr></table>
<h2><span class="mw-headline" id="Enabling_Automatic_User_Creation"><span class="mw-headline-number">5.1</span> Enabling Automatic User Creation</span></h2>
<p>To enable the automatic creation of user records from email, you must set two <a href="index.php%3Ftitle=Email_Properties.html" title="Email Properties">email properties</a>.
</p>
<ol><li>Navigate to <b>System Properties &gt; Email</b>.</li>
<li>Select the check box for <b>Automatically create users for incoming email from trusted domains</b> (<tt>glide.pop3readerjob.create_caller</tt>).
<dl><dd><div class="thumb tleft"><div class="thumbinner" style="width:424px;"><a href="index.php%3Ftitle=File:Create_users_from_email.png.html" class="image"><img alt="" src="images/f/ff/Create_users_from_email.png" width="422" height="66" class="thumbimage" /></a>  <div class="thumbcaption">Enable the property to create users from email</div></div></div> <br style="clear:both;" /></dd></dl></li>
<li>Enter the list of trusted domains in <b>Trusted domains for creating users from incoming emails</b> (<tt>glide.user.trusted_domain</tt>).
<dl><dd><div class="thumb tleft"><div class="thumbinner" style="width:705px;"><a href="index.php%3Ftitle=File:Trusted_domains.png.html" class="image"><img alt="" src="images/6/67/Trusted_domains.png" width="703" height="75" class="thumbimage" /></a>  <div class="thumbcaption">List of trusted domains</div></div></div> <br style="clear:both;" /></dd></dl></li>
<li>Click <b>Save</b>.</li></ol>
<table cellspacing="5" cellpadding="5" class="reproduce">

<tr>
<td scope="row" style="vertical-align:middle;"> <div class="floatleft"><a href="index.php%3Ftitle=File:Warning.gif.html" class="image" title="Note"><img alt="Note" src="images/thumb/c/c2/Warning.gif/16px-Warning.gif.png" width="16" height="16" srcset="/images/thumb/c/c2/Warning.gif/24px-Warning.gif.png 1.5x, /images/thumb/c/c2/Warning.gif/32px-Warning.gif.png 2x" /></a></div>
</td>
<td scope="row" style="vertical-align:top"> <b>Note:</b> <i>When the property <tt>glide.pop3readerjob.create_caller</tt> is set to <b>false</b>, ServiceNow runs inbound actions from users who do not match an existing user by <a href="index.php%3Ftitle=Impersonating_a_User.html" title="Impersonating a User">impersonating</a> the <b>Guest</b> user. You may want to <a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#Preventing_Untrusted_Users_from_Triggering_Inbound_Actions">prevent untrusted users from triggering inbound actions</a> by <a href="index.php%3Ftitle=Managing_User_Sessions.html#Locking_out_a_User" title="Managing User Sessions">locking out</a> the <b>Guest</b> user.</i>
</td></tr></table>
<p><br />
</p>
<h2><span class="mw-headline" id="Upgrading_the_User_Creation_Method_to_Use_the_Full_Email_Address"><span class="mw-headline-number">5.2</span> Upgrading the User Creation Method to Use the Full Email Address</span></h2>
<p>You can upgrade the method ServiceNow uses to create users by <a href="index.php%3Ftitle=Activating_ServiceNow_Plugins.html" title="Activating ServiceNow Plugins">activating</a> the Email Automatic User Creation plugin. The plugin makes the following changes:
</p>
<ul><li> Sets the property <tt>glide.email.create_userid_from_email</tt> to <b>true</b>.</li>
<li> Increases the width of the <b>User ID</b> [sys_user.user_name] column to accommodate email addresses.</li></ul>
<p>After activating the plugin, <a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#Enabling_Automatic_User_Creation">enable automatic user creation from email</a>. 
</p>
<table cellspacing="5" cellpadding="5" style="border: 2px solid #FFCC66; width: 70%; margin-bottom: 0.5em; margin-top: 0.5em; vertical-align: top;">

<tr>
<td> <div class="floatleft"><a href="index.php%3Ftitle=File:Caution-diamond.png.html" class="image" title="Warning"><img alt="Warning" src="images/thumb/4/4f/Caution-diamond.png/30px-Caution-diamond.png" width="30" height="30" srcset="/images/thumb/4/4f/Caution-diamond.png/45px-Caution-diamond.png 1.5x, /images/4/4f/Caution-diamond.png 2x" /></a></div>
</td>
<td width="100%"> <b>Warning:</b> ServiceNow, Inc. strongly recommends reviewing your existing user records to reconcile any that contain identical email addresses. If you activate the plugin prior to reconciling email addresses, your instance cannot distinguish between users with identical email addresses and will randomly select one of the users with the matching email address.
</td></tr></table>
<h1><span class="mw-headline" id="Accessing_Email_Objects_with_Variables"><span class="mw-headline-number">6</span> Accessing Email Objects with Variables</span></h1>
<p>An inbound email action script has access to various pieces of an inbound email through script variables. 
</p>
<table class="standard">

<tr>
<th> Variable
</th>
<th> Contents
</th></tr>
<tr>
<td>  email.to
</td>
<td>  Contains a comma-separated list of email addresses in the To: and Cc: boxes.
</td></tr>
<tr>
<td>  email.direct
</td>
<td>  Contains a comma-separated list of email addresses in the To: box.
</td></tr>
<tr>
<td>  email.copied
</td>
<td>  Contains a comma-separated list of email addresses in the Cc: box.
</td></tr>
<tr>
<td>  email.body_text
</td>
<td>  Contains the body of the email as a plain text string.
</td></tr>
<tr>
<td>  email.body_html
</td>
<td>  Contains the body of the email as an HTML string.
</td></tr>
<tr>
<td>  email.from
</td>
<td>  Contains an email address according to the following conditions. If the address listed in the email <b>Headers</b> field matches an existing user's <b>Email</b> address, this variable contains the user's <b>Email</b> address. If the address listed in the email <b>Headers</b> field does <i>not</i> match an existing user's <b>Email</b> address, this variable contains the address listed in the email <b>Headers</b> field (starting with <a href="index.php%3Ftitle=Release:Eureka_Patch_5.html" title="Release:Eureka Patch 5">Eureka Patch 5</a>) or the <b>Guest</b> user's <b>Email</b> address (in versions prior to Eureka Patch 5).
</td></tr>
<tr>
<td> email.from_sys_id
</td>
<td> Contains the Sys ID of the user who sent the email to the instance.
</td></tr>
<tr>
<td>  email.origemail
</td>
<td>  Contains the email sender's address as listed in the email <b>Headers</b>.
</td></tr>
<tr>
<td>  email.subject
</td>
<td>  Contains the email's subject as a plain text string.
</td></tr>
<tr>
<td>  email.recipients
</td>
<td>  Contains a comma-separated list of recipient addresses.
</td></tr>
<tr>
<td>  email.recipients_array
</td>
<td>  Contains the recipient addresses as an array.
</td></tr>
<tr>
<td>  email.content_type
</td>
<td>  Contains the MIME content type of the email (for example, <b>text/plain; charset="us-ascii"</b> or <b>text/html; charset="us-ascii"</b>).
</td></tr>
<tr>
<td>  email.headers
</td>
<td>  Contains details about the sender, route, and receiver as a plain text string in the format of the sending email client.
</td></tr></table>
<table cellspacing="5" cellpadding="5" class="reproduce">

<tr>
<td scope="row" style="vertical-align:middle;"> <div class="floatleft"><a href="index.php%3Ftitle=File:Warning.gif.html" class="image" title="Note"><img alt="Note" src="images/thumb/c/c2/Warning.gif/16px-Warning.gif.png" width="16" height="16" srcset="/images/thumb/c/c2/Warning.gif/24px-Warning.gif.png 1.5x, /images/thumb/c/c2/Warning.gif/32px-Warning.gif.png 2x" /></a></div>
</td>
<td scope="row" style="vertical-align:top"> <b>Note:</b> <i>ServiceNow follows <a target="_blank" rel="nofollow noreferrer noopener" class="external text" href="http://www.rfc-editor.org/info/rfc2822">RFC 2822</a> (Internet Message Format), which requires multiple email addresses in a group to be separated by commas, not semicolons. ServiceNow can set the values of the <tt>email.to</tt>, <tt>email.direct</tt>, and <tt>email.copied</tt> variables only if email addressed to groups follow the expected RFC format.</i>
</td></tr></table>
<p><br />
</p>
<h2><span class="mw-headline" id="Processing_Recipients_in_Inbound_Email"><span class="mw-headline-number">6.1</span> Processing Recipients in Inbound Email</span></h2>
<p>The recipients variables allow processing of inbound email based on the email recipients: 
</p>
<ul><li><b>email.recipients:</b> returns a comma-separated list of recipient addresses as a plain text string.</li>
<li><b>email.recipients_array:</b> returns the recipient addresses as an array.</li></ul>
<p>For example, create a script to process email based on the array values:
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre> <span class="kd">var</span> <span class="nx">rarray</span> <span class="o">=</span> <span class="nx">email</span><span class="p">.</span><span class="nx">recipients_array</span><span class="p">;</span>
 <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">rarray</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
   <span class="kd">var</span> <span class="nx">recipient</span> <span class="o">=</span> <span class="nx">rarray</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
   <span class="c1">// do something with it</span>
 <span class="p">}</span>
</pre></div>
<h1><span class="mw-headline" id="Setting_Field_Values_from_the_Email_Body"><span class="mw-headline-number">7</span> Setting Field Values from the Email Body</span></h1>
<p>Values in an inbound email can set field values in a task record. Any <i>name:value</i> pair in an inbound email body gets parsed into a <i>variable/value</i> pair in the inbound email script. The name:value pair must be on its own line. Note that most email clients limit the number of characters allowed per line and may truncate excessively long name:value pairs. To populate a reference field use <tt>setDisplayValue()</tt> instead. See <a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#Redirecting_Emails_to_Different_Assignment_Groups">Redirecting Emails</a> for an example of using <tt>setDisplayValue()</tt> in an inbound email action.
</p>
<table cellspacing="5" cellpadding="5" class="reproduce">

<tr>
<td scope="row" style="vertical-align:middle;"> <div class="floatleft"><a href="index.php%3Ftitle=File:Warning.gif.html" class="image" title="Note"><img alt="Note" src="images/thumb/c/c2/Warning.gif/16px-Warning.gif.png" width="16" height="16" srcset="/images/thumb/c/c2/Warning.gif/24px-Warning.gif.png 1.5x, /images/thumb/c/c2/Warning.gif/32px-Warning.gif.png 2x" /></a></div>
</td>
<td scope="row" style="vertical-align:top"> <b>Note:</b> <i>The action always generates a lowercase variable name. Note also that this functionality does not work on reference fields.</i>
</td></tr></table>
<p><br />
For example, if an email body contains this line: 
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nx">Foo</span><span class="o">:</span><span class="nx">bar</span>
</pre></div> 
<p>The inbound email script creates the variable <b>email.body.foo</b> with the value of <b>bar</b>. You can use these variables to create conditions such as:
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre> <span class="k">if</span><span class="p">(</span><span class="nx">email</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">foo</span> <span class="o">!=</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>
   <span class="nx">current</span><span class="p">.[</span><span class="nx">field</span><span class="p">]</span> <span class="o">=</span> <span class="nx">email</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">foo</span><span class="p">;</span> 
 <span class="p">}</span>
</pre></div> 
<p>In this example, the script sets the value of <b>[field]</b> to the value <b>bar</b>.
</p>
<h2><span class="mw-headline" id="Matching_the_Sender.27s_Email_Address_to_a_User"><span class="mw-headline-number">7.1</span> Matching the Sender's Email Address to a User</span></h2>
<p>When processing an email, ServiceNow sets the current user to the user whose email address matches <b>email.from</b>. Inbound actions can then reference that current user. For example, the base system inbound action <b>Create Incident</b> sets the incident's <b>caller_id</b> to the value returned by <b>gs.getUserID</b>().
</p><p>If multiple users have the same email address, the instance first searches for an active user with the email address. The instance does not match inactive users.
</p>
<table cellspacing="5" cellpadding="5" style="border: 2px solid #FFCC66; width: 70%; margin-bottom: 0.5em; margin-top: 0.5em; vertical-align: top;">

<tr>
<td> <div class="floatleft"><a href="index.php%3Ftitle=File:Caution-diamond.png.html" class="image" title="Warning"><img alt="Warning" src="images/thumb/4/4f/Caution-diamond.png/30px-Caution-diamond.png" width="30" height="30" srcset="/images/thumb/4/4f/Caution-diamond.png/45px-Caution-diamond.png 1.5x, /images/4/4f/Caution-diamond.png 2x" /></a></div>
</td>
<td width="100%"> <b>Warning:</b> You should have a unique email addresses for each user record. Otherwise, the instance can not reliably match the email to the correct user and unpredictable matches may occur.
</td></tr></table>
<p>If providing a unique email address to each user is not possible, ServiceNow recommends only having one active user with the shared email address. This configuration guarantees that ServiceNow always matches incoming email from this address to the active user.
</p>
<table cellspacing="5" cellpadding="5" class="reproduce">

<tr>
<td scope="row" style="vertical-align:middle;"> <div class="floatleft"><a href="index.php%3Ftitle=File:Warning.gif.html" class="image" title="Note"><img alt="Note" src="images/thumb/c/c2/Warning.gif/16px-Warning.gif.png" width="16" height="16" srcset="/images/thumb/c/c2/Warning.gif/24px-Warning.gif.png 1.5x, /images/thumb/c/c2/Warning.gif/32px-Warning.gif.png 2x" /></a></div>
</td>
<td scope="row" style="vertical-align:top"> <b>Note:</b> <i>The Email Automatic User Creation plugin must be active.</i>
</td></tr></table>
<p><br />
</p>
<h1><span class="mw-headline" id="Assignment_of_Tasks_via_Email"><span class="mw-headline-number">8</span> Assignment of Tasks via Email</span></h1>
<p>The name:value example shows a useful email capability; that is, the ability to set a field in a record. For example, the <b>change.itil.approve.role</b> email template lists several fields in the outbound notification. 
</p><p><a href="index.php%3Ftitle=File:InboundEmailActions3.png.html" class="image"><img alt="InboundEmailActions3.png" src="images/c/c1/InboundEmailActions3.png" width="969" height="206" /></a>
</p><p><br style="clear:both;" />
</p><p>Notice the line in the template that shows <tt>Priority:${sysapproval.priority}</tt>. When replying to this email, the approver can change the value of the <b>Priority</b> field directly from the email. For example, the approver could set the priority to <b>4 &#8211; Low</b>:
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre> <span class="nx">Priority</span><span class="o">:</span><span class="mi">4</span>
</pre></div> 
<h1><span class="mw-headline" id="Redirecting_Emails_to_Different_Assignment_Groups"><span class="mw-headline-number">9</span> Redirecting Emails to Different Assignment Groups</span></h1>
<p>By default, the POP Reader scheduled job checks for new email every 2 minutes. It connects to the mail server and account specified in email properties. The POP Reader downloads any email waiting on the mail server and creates <tt>email.read</tt> events. After the instance processes the events, the inbound email actions run.
</p><p>The POP Reader shows the number of emails processed during the reader's last run. The message shows the number of emails the reader processed or <b>0</b> processed if no emails were available. The reader resets the status each time it runs.
</p><p>While it is not possible to specify more than one POP3 account for the instance, you can have other mailboxes forward to the designated POP3 account. Add this script to the Create Incident inbound email action to differentiate the content based on the original recipient and then set an <b>assignment_group</b> value.
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="k">if</span> <span class="p">(</span><span class="nx">email</span><span class="p">.</span><span class="nx">direct</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">&#39;facilities@anycorp.com&#39;</span><span class="p">)</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="nx">current</span><span class="p">.</span><span class="nx">assignment_group</span><span class="p">.</span><span class="nx">setDisplayValue</span><span class="p">(</span><span class="s1">&#39;Facilities Management&#39;</span><span class="p">);</span>
</pre></div>
<p>Update the email address, original recipient, and assignment group name accordingly.
</p>
<h1><span class="mw-headline" id="Attachments"><span class="mw-headline-number">10</span> Attachments</span></h1>
<p>If an inbound email contains one or more email attachments, the inbound email action adds the attachments to the first record the action produces. 
</p>
<h1><span class="mw-headline" id="Character_Encoding"><span class="mw-headline-number">11</span> Character Encoding</span></h1>
<p>ServiceNow checks the MIME type of incoming email to verify the character encoding. If the email encoding is ASCII-7 or UTF-8, inbound email actions preserve the character encoding in any associated task records they produce. If the email encoding is ISO-8859-1, the inbound email action attempts to convert the email to Windows 1252. Inbound email actions convert any other encodings (for example, Mac OS Roman) to plain text, which may or may not be readable.
</p>
<h1><span class="mw-headline" id="Setting_Maximum_Body_Size"><span class="mw-headline-number">12</span> Setting Maximum Body Size</span></h1>
<p>In some situations, an email message may contain more information in the body than the instance's data policy permits a field to write to the database. By default, an inbound email action can process only up to 16MB worth of information in the message body. If the email body exceeds this limit, the instance truncates the message body.
</p><p>A system property controls the maximum size of a message body before the instance stops processing inbound email actions. The default value is set to match the data policy write limit of 16MB. You cannot set a higher value without conflicting with the write data policy limit. If you want to set a lower limit, you can add this <a href="index.php%3Ftitle=Special:Book&amp;bookcmd=add_article&amp;arttitle=Adding+a+Property&amp;oldid=0.html" title="Adding a Property">system property</a>. Ensure the limit is well below the <a href="index.php%3Ftitle=Configuring_Email.html#Email_Size_Restrictions" title="Configuring Email">maximum total email size</a>.
</p>
<table class="standard">

<tr>
<th> Property
</th>
<th> Value
</th></tr>
<tr>
<td> <b>Name</b>
</td>
<td> com.glide.email.max_body_bytes
</td></tr>
<tr>
<td> <b>Description</b>
</td>
<td> Specify the maximum size of an email message body in bytes. The size cannot exceed the default value of 16MB.
</td></tr>
<tr>
<td> <b>Type</b>
</td>
<td> Integer
</td></tr>
<tr>
<td> <b>Value</b>
</td>
<td> 16777216
</td></tr></table>
<table cellspacing="5" cellpadding="5" class="reproduce">

<tr>
<td scope="row" style="vertical-align:middle;"> <div class="floatleft"><a href="index.php%3Ftitle=File:Warning.gif.html" class="image" title="Note"><img alt="Note" src="images/thumb/c/c2/Warning.gif/16px-Warning.gif.png" width="16" height="16" srcset="/images/thumb/c/c2/Warning.gif/24px-Warning.gif.png 1.5x, /images/thumb/c/c2/Warning.gif/32px-Warning.gif.png 2x" /></a></div>
</td>
<td scope="row" style="vertical-align:top"> <b>Note:</b> <i>Email attachments have separate size limits. For more information, see <a href="index.php%3Ftitle=Email_Attachment_Limits.html" title="Email Attachment Limits" class="mw-redirect">Email Attachment Limits</a>. </i>
</td></tr></table>
<p><br />
</p>
<h1><span class="mw-headline" id="Preventing_Untrusted_Users_from_Triggering_Inbound_Actions"><span class="mw-headline-number">13</span> Preventing Untrusted Users from Triggering Inbound Actions</span></h1>
<p>Administrators can prevent users from untrusted domains from triggering inbound actions. For example, you can prevent email from users outside your company domain from creating incidents.
</p>
<ol><li><a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#Enabling_Automatic_User_Creation">Enable automatic user creation</a> and add a list of trusted domains. For example, add your company domain <b>example.com</b>.</li>
<li>Navigate to <b>User Administration &gt; Users</b>.</li>
<li>Select the user <b>guest</b>.</li>
<li>Select the <b>Locked out</b> field to disable the guest account. <a href="index.php%3Ftitle=Managing_User_Sessions.html#Locking_out_a_User" title="Managing User Sessions">Locking out</a> a user record prevents ServiceNow from processing inbound actions.</li></ol>
<p>When a user from a trusted domain sends an email to the instance, ServiceNow either matches the email to an existing user or creates a new user. Since the incoming email matches a user record (either an existing or new one), the email can trigger an inbound action.
</p><p>When a user from an untrusted domain sends an email to the instance, ServiceNow attempts to impersonate the guest user. Since the guest user is locked out, the impersonation fails and the incoming email cannot trigger an inbound action.
</p>
<table cellspacing="5" cellpadding="5" style="border: 2px solid #FFCC66; width: 70%; margin-bottom: 0.5em; margin-top: 0.5em; vertical-align: top;">

<tr>
<td> <div class="floatleft"><a href="index.php%3Ftitle=File:Caution-diamond.png.html" class="image" title="Warning"><img alt="Warning" src="images/thumb/4/4f/Caution-diamond.png/30px-Caution-diamond.png" width="30" height="30" srcset="/images/thumb/4/4f/Caution-diamond.png/45px-Caution-diamond.png 1.5x, /images/4/4f/Caution-diamond.png 2x" /></a></div>
</td>
<td width="100%"> <b>Warning:</b> <a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#Allowing_Locked_Out_Users_to_Trigger_Inbound_Email_Actions">Allowing locked out users to trigger inbound actions</a> also allows untrusted users to trigger inbound actions.
</td></tr></table>
<h1><span class="mw-headline" id="Allowing_Locked_Out_Users_to_Trigger_Inbound_Email_Actions"><span class="mw-headline-number">14</span> Allowing Locked Out Users to Trigger Inbound Email Actions</span></h1>
<p>Administrators can allow locked out users to trigger inbound actions by setting the system property <tt>glide.pop3.process_locked_out</tt>. This allows users who need to reset their password to send an email message to an instance asking for assistance.
</p>
<table cellspacing="5" cellpadding="5" style="border: 2px solid #FFCC66; width: 70%; margin-bottom: 0.5em; margin-top: 0.5em; vertical-align: top;">

<tr>
<td> <div class="floatleft"><a href="index.php%3Ftitle=File:Caution-diamond.png.html" class="image" title="Warning"><img alt="Warning" src="images/thumb/4/4f/Caution-diamond.png/30px-Caution-diamond.png" width="30" height="30" srcset="/images/thumb/4/4f/Caution-diamond.png/45px-Caution-diamond.png 1.5x, /images/4/4f/Caution-diamond.png 2x" /></a></div>
</td>
<td width="100%"> <b>Warning:</b> Enabling this feature also enables users from <a href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html#Preventing_Untrusted_Users_from_Triggering_Inbound_Actions">untrusted domains to trigger inbound actions</a>.
</td></tr></table>
<table class="standard">

<tr>
<th> Property
</th>
<th> Description
</th></tr>
<tr>
<td> glide.pop3.process_locked_out
</td>
<td> Enables (true) or disables (false) the ability for locked out users to trigger inbound actions.
<ul><li><b>Type:</b> true | false</li>
<li><b>Default value:</b> false</li>
<li><b>Location:</b> <a href="index.php%3Ftitle=Special:Book&amp;bookcmd=add_article&amp;arttitle=Adding+a+Property&amp;oldid=0.html" title="Adding a Property">Add</a> to the System Properties [sys_properties] table</li></ul>
</td></tr></table>
<h1><span class="mw-headline" id="Using_sys_email"><span class="mw-headline-number">15</span> Using sys_email</span></h1>
<p>You can use the global variable <tt>sys_email</tt> with inbound email actions. This lets you access the received sys_email record that triggered the inbound email action. It can be used to reference fields on the email record, such as <tt>uid</tt>, <tt>sys_id</tt>, <tt>content_type</tt>, and so on.
</p>
<h1><span class="mw-headline" id="Troubleshooting"><span class="mw-headline-number">16</span> Troubleshooting</span></h1>
<p>The following solution to this common inbound email error is useful for troubleshooting email actions. For more information, open the ServiceNow Knowledge Base and access the following two articles:
</p>
<ul><li>For troubleshooting inbound email, see <a target="_blank" rel="nofollow noreferrer noopener" class="external text" href="https://hi.service-now.com/kb_view.do?sysparm_article=KB0524472">KB0524472</a>.</li>
<li>For troubleshooting outbound email, see <a target="_blank" rel="nofollow noreferrer noopener" class="external text" href="https://hi.service-now.com/kb_view.do?sysparm_article=KB0521382">KB0521382</a>.</li></ul>
<table class="standard">

<tr>
<th> Error or Symptom
</th>
<th> Solution
</th></tr>
<tr>
<td> Email from Outlook produces an empty Incident record containing an attachment named winmail.dat.
</td>
<td> Configure the local Outlook client or Exchange server to not send Rich Text formatted (RTF) data to ServiceNow instances. To prevent Windows email from containing a winmail.dat file, see <a target="_blank" rel="nofollow noreferrer noopener" class="external text" href="http://support.microsoft.com/kb/278061">Microsoft KB 278061</a> for information on configuring Outlook or <a target="_blank" rel="nofollow noreferrer noopener" class="external text" href="http://support.microsoft.com/kb/138053">Microsoft KB 138053</a> for information on configuring Exchange.
</td></tr></table>
<h2><span class="mw-headline" id="Logging"><span class="mw-headline-number">16.1</span> Logging</span></h2>
<p>See <a href="index.php%3Ftitle=Viewing_System_Logs.html#Emails" title="Viewing System Logs">the email logs</a> for a description of what you can see in the system log.
</p><p>Starting with the Dublin release, you can use these GlideSystem error messages to display messages: 
</p>
<ul><li> For an information message:
<dl><dd> gs.log("&lt;INSERT LOG MESSAGE HERE&gt;", "EMAIL." + sys_email.sys_id);</dd></dl></li>
<li> For a warning message:
<dl><dd> gs.logWarning("&lt;INSERT LOG MESSAGE HERE&gt;", "EMAIL." + sys_email.sys_id);</dd></dl></li>
<li> For an error message:
<dl><dd> gs.logError("&lt;INSERT LOG MESSAGE HERE&gt;", "EMAIL." + sys_email.sys_id);</dd></dl></li></ul>

<!-- 
NewPP limit report
Cached time: 20171201093436
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.303 seconds
Real time usage: 2.481 seconds
Preprocessor visited node count: 309/1000000
Preprocessor generated node count: 757/1000000
Post‐expand include size: 8330/2097152 bytes
Template argument size: 3570/2097152 bytes
Highest expansion depth: 5/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00% 2221.234      1 - -total
  1.75%   38.979      1 - Template:Email
  1.60%   35.448      1 - Template:Topic
  0.41%    9.202     13 - Template:Note
  0.29%    6.341      4 - Template:Warning
  0.19%    4.212      1 - Embedded:Email
  0.14%    3.155      2 - Template:T
-->

<!-- Saved in parser cache with key wikidb:pcache:idhash:1731-0!*!0!1!en!5!* and timestamp 20171201093433 and revision id 250636
 -->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="index.php%3Ftitle=Inbound_Email_Actions&amp;oldid=250636.html">http://wiki.servicenow.com/index.php?title=Inbound_Email_Actions&amp;oldid=250636</a>"</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="index.php%3Ftitle=Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="index.php%3Ftitle=Special:Book&amp;bookcmd=add_category&amp;cattitle=Notification+Administration.html" title="Category:Notification Administration">Notification Administration</a></li></ul></div><br /><hr /><a href="index.php%3Ftitle=Category:Contents.html" title="Category:Contents">Contents</a> &gt; <a href="index.php%3Ftitle=Special:Book&amp;bookcmd=add_category&amp;cattitle=Administer.html" title="Category:Administer">Administer</a> &gt; <a href="index.php%3Ftitle=Special:Book&amp;bookcmd=add_category&amp;cattitle=Service+Administration.html" title="Category:Service Administration">Service Administration</a> &gt; <a href="index.php%3Ftitle=Special:Book&amp;bookcmd=add_category&amp;cattitle=Notification+Administration.html" title="Category:Notification Administration">Notification Administration</a></div>					<!-- end content -->
					<div id='mw-data-after-content'>
	<div id="rating_1731"><div class="voting-title">Was this article helpful?</div><div class="voting-box"><div class="vote-up " data-vote-id="1731" data-vote-the-vote="5" data-vote-id="1731" data-vote-action="5" data-vote-rating="5.00" data-vote-voted="0" id="rating_1731_5"><span>Yes, I found what I needed</span></div><div class="vote-down " data-vote-id="1731" data-vote-the-vote="1" data-vote-id="1731" data-vote-action="5" data-vote-rating="5.00" data-vote-voted="0" id="rating_1731_1"><span>No, I need more assistance</span></div></div></div>
</div>
					<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div id="column-one">
					<div id="p-cactions" class="portlet" role="navigation">
			<h5>Views</h5>

			<div class="pBody">
				<ul>
				<li id="ca-nstab-main" class="selected"><a href="index.php%3Ftitle=Inbound_Email_Actions.html" title="View the content page [c]" accesskey="c">Page</a></li>
				</ul>
							</div>
		</div>
				<div class="portlet" id="p-personal" role="navigation">
				<h5>Personal tools</h5>

				<div class="pBody">
					<ul>
													<li id="pt-createaccount"><a href="index.php%3Ftitle=Special:CreateAccount&amp;returnto=Inbound+Email+Actions&amp;returntoquery=printable%253Dyes.html" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li>
													<li id="pt-login"><a href="index.php%3Ftitle=Special:UserLogin&amp;returnto=Inbound+Email+Actions&amp;returntoquery=printable%253Dyes.html" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
											</ul>
				</div>
			</div>
			<div class="portlet" id="p-logo" role="banner">
				<a href="index.html" class="mw-wiki-logo" title="Visit the main page"></a>
			</div>
				<div class="generated-sidebar portlet" id="p-" role="navigation">
		<h3></h3>
		<div class='pBody'>
			<div class="portlet">
<h5><span class="mw-headline" id="Categories">Categories</span></h5>
<div class="pBody">
<div class="sidebarcat">
<ul><li><a href="index.php%3Ftitle=Get_Started.html" title="Get Started">Get Started</a></li>
<li><a href="index.php%3Ftitle=Special:Book&amp;bookcmd=remove_article&amp;arttitle=Use+ServiceNow&amp;oldid=0.html" title="Use ServiceNow">Use</a></li>
<li><a href="index.php%3Ftitle=Administer_ServiceNow.html" title="Administer ServiceNow">Administer</a></li>
<li><a href="index.php%3Ftitle=Script_in_ServiceNow.html" title="Script in ServiceNow">Script</a></li>
<li><a href="index.php%3Ftitle=Build.html" title="Build">Build</a></li>
<li><a href="index.php%3Ftitle=Deliver_ServiceNow.html" title="Deliver ServiceNow">Deliver</a></li>
<li><a href="index.php%3Ftitle=Integration_Overview.html" title="Integration Overview">Integrate</a></li>
<li><a href="index.php%3Ftitle=Release_Notes.html" title="Release Notes">Release Notes</a></li>
<li><a href="index.php%3Ftitle=Special:Book&amp;bookcmd=remove_article&amp;arttitle=Customer+Support&amp;oldid=0.html" title="Customer Support">Customer Support</a></li>
<li><a href="index.php%3Ftitle=Books.html" title="Books">Books</a></li>
<li><a href="index.php%3Ftitle=Special:Book&amp;bookcmd=remove_article&amp;arttitle=Video+Tutorials&amp;oldid=0.html" title="Video Tutorials">Video Tutorials</a></li>
<li><a target="_blank" rel="nofollow noreferrer noopener" class="external text" href="http://express.servicenow.com/support/">ServiceNow Express</a></li></ul>
</div>
</div>
</div>
<div class="portlet">
<h5><span class="mw-headline" id="Resources">Resources</span></h5>
<div class="pBody">
<ul><li><a href="index.php%3Ftitle=Category:Contents.html" title="Category:Contents">Site Map &#8211; Tree View</a><br /></li>
<li><a href="index.php%3Ftitle=Special:RecentChanges.html" title="Special:RecentChanges">Recent Changes</a><br /></li>
<li><a href="index.php%3Ftitle=Glossary_of_Terms.html" title="Glossary of Terms">Glossary</a><br /></li>
<li><a href="index.php%3Ftitle=Help:Getting_Started_on_the_ServiceNow_Wiki.html" title="Help:Getting Started on the ServiceNow Wiki">Wiki Help</a></li></ul>
</div>
</div>
<div class="portlet">
<h5><span class="mw-headline" id="Print">Print</span></h5>
<div class="pBody">
<ul><li><a target="_blank" rel="nofollow noreferrer noopener" class="external text" href="index.php%3Ftitle=Special:Book&amp;bookcmd=book_creator.html">Create a Book</a></li>
<li><a href="index.php%3Ftitle=Help:Books.html" title="Help:Books">Book Help</a></li>
<li><a target="_blank" rel="nofollow noreferrer noopener" class="external text" href="index.php%3Ftitle=Special:Book%252Frender_article%252F&amp;arttitle=Inbound_Email_Actions.html">Download Page as PDF</a></li>
<li><a target="_blank" rel="nofollow noreferrer noopener" class="external text" href="index.php%3Ftitle=Inbound_Email_Actions&amp;printable=yes.html">Printable Version</a></li></ul>
</div>
</div>
		</div>
		</div>
		<div class="generated-sidebar portlet" id="p-coll-print_export" role="navigation">
		<h3>Print/export</h3>
		<div class='pBody'>
							<ul>
											<li id="coll-create_a_book"><a href="index.php%3Ftitle=Special:Book&amp;bookcmd=book_creator&amp;referer=Inbound+Email+Actions.html">Create a book</a></li>
											<li id="coll-download-as-rl"><a href="index.php%3Ftitle=Special:Book&amp;bookcmd=render_article&amp;arttitle=Inbound+Email+Actions&amp;returnto=Inbound+Email+Actions&amp;oldid=250636&amp;writer=rl.html">Download as PDF</a></li>
									</ul>
					</div>
		</div>
			<div id="p-search" class="portlet" role="search">
			<h3><label for="searchInput">Search</label></h3>

			<div id="searchBody" class="pBody">
				<form action="http://wiki.servicenow.com/index.php" id="searchform">
					<input type='hidden' name="title" value="Special:Search"/>
					<input type="search" name="search" placeholder="Search" title="Search ServiceNow Wiki [f]" accesskey="f" id="searchInput"/>
					<input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchGoButton" class="searchButton"/>&#160;
						<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton"/>
				</form>

							</div>
		</div>
			<div class="portlet" id="p-tb" role="navigation">
			<h3>Toolbox</h3>

			<div class="pBody">
				<ul>
											<li id="t-whatlinkshere"><a href="index.php%3Ftitle=Special:WhatLinksHere%252FInbound_Email_Actions.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here?</a></li>
											<li id="t-recentchangeslinked"><a href="index.php%3Ftitle=Special:RecentChangesLinked%252FInbound_Email_Actions.html" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
											<li id="t-specialpages"><a href="index.php%3Ftitle=Special:SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
											<li id="t-permalink"><a href="index.php%3Ftitle=Inbound_Email_Actions&amp;oldid=250636.html" title="Permanent link to this revision of the page">Permanent link</a></li>
											<li id="t-info"><a href="index.php%3Ftitle=Inbound_Email_Actions&amp;action=info.html" title="More information about this page">Page information</a></li>
									</ul>
							</div>
		</div>
			</div><!-- end of the left (by default at least) column -->
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
						<div id="f-poweredbyico">
									<a href="http://www.mediawiki.org/"><img src="resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a>
							</div>
					<ul id="f-list">
									<li id="lastmod"> This page was last modified 19:29, 31 August 2017.</li>
									<li id="privacy"><a href="index.php%3Ftitle=ServiceNow_Wiki:Privacy_policy.html" title="ServiceNow Wiki:Privacy policy">Privacy policy</a></li>
									<li id="about"><a href="index.php%3Ftitle=ServiceNow_Wiki:About.html" title="ServiceNow Wiki:About">About ServiceNow Wiki</a></li>
									<li id="disclaimer"><a href="index.php%3Ftitle=ServiceNow_Wiki:General_disclaimer.html" title="ServiceNow Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
		</div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.loader.state({"user":"ready","user.groups":"ready"});mw.loader.load(["ext.treeandmenu","mediawiki.toc","mediawiki.action.view.postEdit","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"]);});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":1124});});</script></body></html>
