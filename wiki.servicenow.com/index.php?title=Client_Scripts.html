<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8"/>
<title>Client Scripts - ServiceNow Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Client_Scripts","wgTitle":"Client Scripts","wgCurRevisionId":250206,"wgRevisionId":250206,"wgArticleId":2052,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Client Scripts"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Client_Scripts","wgRelevantArticleId":2052,"wgRequestId":"a6649a1bbdf31ada704af53d","wgIsProbablyEditable":false,"wgRestrictionEdit":["sysop"],"wgRestrictionMove":["sysop"],"wgCategoryTreePageCategoryOptions":"{\"mode\":20,\"hideprefix\":20,\"showcount\":true,\"namespaces\":false}"});mw.loader.implement("user.options",function($,jQuery,require,module){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function ( $, jQuery, require, module ) {
mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});/*@nomin*/;

});mw.loader.load(["mediawiki.page.startup","ext.voteNY"]);});</script>
<link rel="stylesheet" href="http://wiki.servicenow.com/load.php?debug=false&amp;lang=en&amp;modules=ext.pygments%7Cmediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.content.externallinks%7Cmediawiki.skinning.interface%7Cskins.monobook.styles&amp;only=styles&amp;skin=monobook"/>
<!--[if IE 6]><link rel="stylesheet" href="/skins/MonoBook/IE60Fixes.css?303" media="screen"/><![endif]--><!--[if IE 7]><link rel="stylesheet" href="/skins/MonoBook/IE70Fixes.css?303" media="screen"/><![endif]-->
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=monobook.css"/>
<script async="" src="load.php%3Fdebug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=monobook"></script>
<meta name="generator" content="MediaWiki 1.27.3"/>
<meta name="robots" content="index,follow,noarchive"/>
<meta name="copyright" content="ServiceNow"/>
<meta http-equiv="content-language" content="en"/>
<meta http-equiv="content-type" content="text/html;charset=utf-8"/>
<meta name="modified" content="20170817151300"/>
<meta name="canonical" content="//wiki.servicenow.com/index.php?title=Client_Scripts"/>
<meta name="author" content="ServiceNow"/>
<meta name="twitter:card" content="@NOWsupport"/>
<meta name="twitter:title" content="Client Scripts"/>
<meta name="twitter:creator" content="@NOWsupport"/>
<meta name="twitter:domain" content="servicenow.com"/>
<meta name="keywords" content="Client Scripts"/>
<meta name="category" content="Client Scripts"/>
<link rel="shortcut icon" href="favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php" title="ServiceNow Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="api.php%3Faction=rsd"/>
<link rel="alternate" type="application/atom+xml" title="ServiceNow Wiki Atom feed" href="index.php%3Ftitle=Special:RecentChanges&amp;feed=atom.html"/>
<script type="text/javascript">window.tamBaseUrl='/extensions/TreeAndMenu'</script>

<script type="text/javascript" src="extensions/TreeAndMenu/dtree.js"></script>

<link rel="canonical" href="index.php%3Ftitle=Client_Scripts.html" />

	<meta property="og:title" content="ServiceNow Wiki:Client Scripts"/>

	<meta property="og:type" content="article"/>

	<meta property="og:site_name" content="ServiceNow Wiki"/>

	<meta property="modified" content="20170817151300"/>

	<meta property="article:published_time" content="20170817151300"/>

	<meta property="article:modified_time" content="20170817151300"/>

	<meta property="article:author" content="ServiceNow"/>

	<meta property="article:tag" content="Client Scripts"/>

	<meta property="og:url" content="//wiki.servicenow.com/index.php?title=Client_Scripts"/>

</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Client_Scripts rootpage-Client_Scripts skin-monobook action-view">
<div id="header">
	<div id="snc_top_toolbar" >
	<ul class="inline" id="sites">
		<li><a href="index.html">Wiki home</a></li>
		<li><a href="http://community.servicenow.com">Community</a></li>
		<li><a href="http://www.servicenow.com/services/training-and-certification.html">Training</a></li>
		<li><a href="https://www.servicenow.com/support.html">Support home</a></li>
		<li><a href="http://www.servicenow.com">Company home</a></li>
		<li><a href="http://info.servicenow.com/demonow/">Demo</a></li>
	</ul>

<!-- Start Adobe analytics staging -->
<script src="http://assets.adobedtm.com/43c21e31f00ba1c49c16c9c6a5acf67ef1e8dfa8/satelliteLib-c41330e93f48feef745e6ecb4b425db9d5da2dea.js"></script>

<!--Begin Google analytics -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-29210697-1']);
  _gaq.push(['_setDomainName', 'servicenow.com']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);
  _gaq.push(['_trackPageLoadTime']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<!-- End Google analytics, begin other analytics -->

<!--<script type="text/javascript" language="javascript">llactid=11051</script>
<script type="text/javascript" language="javascript" src="https://trackalyzer.com/trackalyze_secure.js"></script>
-->
<!--End analytics-->

	</div>
</div>
<div id="snc_toolbar" >
	<a href="index.html">
	<img src="https://wiki.service-now.com/images/CustomWikiLogoFixed.png" height="64px">
	</a>
<div id="googleSearchBox"> <!--Google Search box -->
<div id='cse-search-form' style='width: 100%;'>Loading</div>
<script src='http://www.google.com/jsapi' type='text/javascript'></script>


<script type='text/javascript'>

google.load('search', '1', {language: 'en', style: google.loader.themes.V2_DEFAULT, callback:loadCSE});

window.onhashchange = function() {
	var url = window.location.href;
	if(url.indexOf("gsc.q") == -1) //call only when not browsing search results.
	{
		resetUI();
	}
}

function resetUI() {
	//reset UI to standard layout. Hide search, restore page content/controls.
	var cactions = document.getElementById('p-cactions');
	var cont = document.getElementById('content');
	var sr = document.getElementById('cse');

	cactions.style.display = 'block';
	sr.style.display = 'none';
	cont.style.display = 'block';
};

function onSubmit() {
	//hide page elements when searching.
	var cactions = document.getElementById('p-cactions');
	cactions.style.display = 'none';
	var sr = document.getElementById('cse');
	sr.style.display = 'block';
	var cont = document.getElementById('content');
	cont.style.display = 'none';
};

function loadCSE() {
	var customSearchOptions = {};
	var orderByOptions = {};
	orderByOptions['keys'] = [{label: 'Relevance', key: ''} , {label: 'Date', key: 'date'}];
	customSearchOptions['enableOrderBy'] = true;
	customSearchOptions['orderByOptions'] = orderByOptions;

	var customSearchControl = new google.search.CustomSearchControl('005409823165138974380:bltnnmgfoek', customSearchOptions);
	customSearchControl.setResultSetSize(google.search.Search.FILTERED_CSE_RESULTSET);
	customSearchControl.setSearchCompleteCallback(this,onSubmit);//set onSubmit script to run when searching

	var options = new google.search.DrawOptions();
	options.setSearchFormRoot('cse-search-form');
	options.setAutoComplete(true);
	customSearchControl.draw('cse', options);
	var historyStarted = customSearchControl.startHistoryManagement();
	if(historyStarted) customSearchControl.setLinkTarget(google.search.Search.LINK_TARGET_SELF);
};

</script>

</div> <!--end Google search box-->
</div>

<div id="globalWrapper">
		<div id="column-content">
			<div id="cse"></div>
			<div id="content" class="mw-body" role="main">
				<a id="top"></a>
				
				<div class="mw-indicators">
</div>
				<h1 id="firstHeading" class="firstHeading" lang="en">Client Scripts</h1>
				
				<div id="bodyContent" class="mw-body-content">
					<div id="siteSub">From ServiceNow Wiki</div>
					<div id="contentSub"><!-- Text for discussion pages-->
<a href="index.html" title="Main Page">Home</a> &gt; <a href="index.php%3Ftitle=Script_in_ServiceNow.html" title="Script in ServiceNow">Script</a> &gt; <strong class="selflink">Client Scripts</strong> &gt; Client Scripts</div>
										<div id="jump-to-nav" class="mw-jump">Jump to: <a href="index.php%3Ftitle=Client_Scripts.html#column-one">navigation</a>, <a href="index.php%3Ftitle=Client_Scripts.html#searchInput">search</a></div>

					<!-- start content -->
					<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><table cellspacing="5" cellpadding="5" class="reproduce">

<tr>
<td scope="row" style="vertical-align:middle;"> <div class="floatleft"><a href="index.php%3Ftitle=File:Warning.gif.html" class="image" title="Note"><img alt="Note" src="images/thumb/c/c2/Warning.gif/16px-Warning.gif.png" width="16" height="16" srcset="/images/thumb/c/c2/Warning.gif/24px-Warning.gif.png 1.5x, /images/thumb/c/c2/Warning.gif/32px-Warning.gif.png 2x" /></a></div>
</td>
<td scope="row" style="vertical-align:top"> <b>Note:</b> <i>This article applies to Fuji. For more current information, see <a target="_blank" rel="nofollow noreferrer noopener" class="external text" href="https://docs.servicenow.com/bundle/jakarta-servicenow-platform/page/script/client-scripts/concept/client-scripts.html">Client Scripts</a> at <a target="_blank" rel="nofollow noreferrer noopener" class="external free" href="http://docs.servicenow.com">http://docs.servicenow.com</a></i>
<p><b>The ServiceNow Wiki is no longer being updated. Visit <a target="_blank" rel="nofollow noreferrer noopener" class="external free" href="http://docs.servicenow.com">http://docs.servicenow.com</a> for the latest product documentation.</b>
</p>
</td></tr></table>
<p><br />
</p>
<div class="noprint">
<table class="topicbox">

<tr>
<th> <strong class="selflink">Client Scripting</strong>
</th></tr>
<tr>
<td>
<ul><li><strong class="selflink">Client Scripts</strong></li>
<li><a href="index.php%3Ftitle=Client_Script_Best_Practices.html" title="Client Script Best Practices">Client Script Best Practices</a></li>
<li><a href="index.php%3Ftitle=Display_Field_Messages.html" title="Display Field Messages">Display Field Messages</a></li>
<li><a href="index.php%3Ftitle=Sleeps,_Delays,_or_Waits_in_Client_Scripts.html" title="Sleeps, Delays, or Waits in Client Scripts">Sleeps, Delays, or Waits in Client Scripts</a></li>
<li><a href="index.php%3Ftitle=Mobile_Client_GlideForm_(g_form)_Scripting.html" title="Mobile Client GlideForm (g form) Scripting">Mobile Client GlideForm (g form) Scripting</a></li>
<li>Client-side API
<ul><li><a href="index.php%3Ftitle=GlideForm_(g_form).html" title="GlideForm (g form)">GlideForm (g form)</a></li>
<li><a href="index.php%3Ftitle=Mobile_GlideForm_(g_form)_API_Reference.html" title="Mobile GlideForm (g form) API Reference"> Mobile GlideForm (g form)</a></li>
<li><a href="index.php%3Ftitle=GlideUser_(g_user).html" title="GlideUser (g user)">GlideUser (g user)</a></li>
<li><a href="index.php%3Ftitle=GlideAjax.html" title="GlideAjax">GlideAjax</a></li>
<li><a href="index.php%3Ftitle=GlideMenu_(g_menu_and_g_item).html" title="GlideMenu (g menu and g item)">GlideMenu (g menu and g item)</a></li>
<li><a href="index.php%3Ftitle=GlideList2_(g_list).html" title="GlideList2 (g list)">GlideList2 (g_list)</a></li></ul></li></ul>
</td></tr>
<tr>
<th> Related Topics
</th></tr>
<tr>
<td>
<ul><li><a href="index.php%3Ftitle=Creating_a_Catalog_Client_Script.html" title="Creating a Catalog Client Script">Catalog Client Scripts</a> </li>
<li><a href="index.php%3Ftitle=Client_Script_Access_to_Variable_Fields_on_Task_Records.html" title="Client Script Access to Variable Fields on Task Records">Client Script Access to Variable Fields on Task Records</a></li></ul>
</td></tr></table>
</div><div class="toclimit-2"><div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="index.php%3Ftitle=Client_Scripts.html#Overview"><span class="tocnumber">1</span> <span class="toctext">Overview</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="index.php%3Ftitle=Client_Scripts.html#Client_Script_Form"><span class="tocnumber">2</span> <span class="toctext">Client Script Form</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="index.php%3Ftitle=Client_Scripts.html#Client_Script_Types"><span class="tocnumber">3</span> <span class="toctext">Client Script Types</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="index.php%3Ftitle=Client_Scripts.html#onLoad.28.29_Scripts"><span class="tocnumber">3.1</span> <span class="toctext">onLoad() Scripts</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="index.php%3Ftitle=Client_Scripts.html#onSubmit.28.29_Scripts"><span class="tocnumber">3.2</span> <span class="toctext">onSubmit() Scripts</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="index.php%3Ftitle=Client_Scripts.html#onChange.28.29_Scripts"><span class="tocnumber">3.3</span> <span class="toctext">onChange() Scripts</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="index.php%3Ftitle=Client_Scripts.html#onCellEdit.28.29_Scripts"><span class="tocnumber">3.4</span> <span class="toctext">onCellEdit() Scripts</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-8"><a href="index.php%3Ftitle=Client_Scripts.html#Client_Script_FAQ"><span class="tocnumber">4</span> <span class="toctext">Client Script FAQ</span></a>
<ul>
<li class="toclevel-2 tocsection-9"><a href="index.php%3Ftitle=Client_Scripts.html#Why_do_I_have_to_name_scripts_like_that.3F"><span class="tocnumber">4.1</span> <span class="toctext">Why do I have to name scripts like that?</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="index.php%3Ftitle=Client_Scripts.html#Can_I_have_more_than_one_function_listening_to_the_same_thing.3F"><span class="tocnumber">4.2</span> <span class="toctext">Can I have more than one function listening to the same thing?</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="index.php%3Ftitle=Client_Scripts.html#How_do_I_reference_a_field_on_the_form.3F"><span class="tocnumber">4.3</span> <span class="toctext">How do I reference a field on the form?</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="index.php%3Ftitle=Client_Scripts.html#How_do_I_cancel_a_form_submission.3F"><span class="tocnumber">4.4</span> <span class="toctext">How do I cancel a form submission?</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="index.php%3Ftitle=Client_Scripts.html#How_do_I_confirm_a_field_value_with_the_user.3F"><span class="tocnumber">4.5</span> <span class="toctext">How do I confirm a field value with the user?</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="index.php%3Ftitle=Client_Scripts.html#How_do_I_force_a_Save_and_Stay.3F"><span class="tocnumber">4.6</span> <span class="toctext">How do I force a Save and Stay?</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="index.php%3Ftitle=Client_Scripts.html#How_do_I_call_a_business_rule_from_a_client_script.3F"><span class="tocnumber">4.7</span> <span class="toctext">How do I call a business rule from a client script?</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="index.php%3Ftitle=Client_Scripts.html#What_are_some_of_the_available_helper_functions.3F"><span class="tocnumber">4.8</span> <span class="toctext">What are some of the available helper functions?</span></a>
<ul>
<li class="toclevel-3 tocsection-17"><a href="index.php%3Ftitle=Client_Scripts.html#Hide_or_show_a_field"><span class="tocnumber">4.8.1</span> <span class="toctext">Hide or show a field</span></a></li>
<li class="toclevel-3 tocsection-18"><a href="index.php%3Ftitle=Client_Scripts.html#Make_a_field_mandatory"><span class="tocnumber">4.8.2</span> <span class="toctext">Make a field mandatory</span></a></li>
<li class="toclevel-3 tocsection-19"><a href="index.php%3Ftitle=Client_Scripts.html#Make_a_field_read-only"><span class="tocnumber">4.8.3</span> <span class="toctext">Make a field read-only</span></a></li>
<li class="toclevel-3 tocsection-20"><a href="index.php%3Ftitle=Client_Scripts.html#Get_a_field_value"><span class="tocnumber">4.8.4</span> <span class="toctext">Get a field value</span></a></li>
<li class="toclevel-3 tocsection-21"><a href="index.php%3Ftitle=Client_Scripts.html#Set_a_field_value"><span class="tocnumber">4.8.5</span> <span class="toctext">Set a field value</span></a>
<ul>
<li class="toclevel-4 tocsection-22"><a href="index.php%3Ftitle=Client_Scripts.html#Set_a_glide_list_field_value"><span class="tocnumber">4.8.5.1</span> <span class="toctext">Set a glide_list field value</span></a></li>
</ul>
</li>
<li class="toclevel-3 tocsection-23"><a href="index.php%3Ftitle=Client_Scripts.html#Add_an_Option_to_the_end_of_a_choice_list"><span class="tocnumber">4.8.6</span> <span class="toctext">Add an Option to the end of a choice list</span></a></li>
<li class="toclevel-3 tocsection-24"><a href="index.php%3Ftitle=Client_Scripts.html#Add_an_Option_at_a_specific_point_on_a_choice_list"><span class="tocnumber">4.8.7</span> <span class="toctext">Add an Option at a specific point on a choice list</span></a></li>
<li class="toclevel-3 tocsection-25"><a href="index.php%3Ftitle=Client_Scripts.html#Remove_an_option_from_a_choice_list"><span class="tocnumber">4.8.8</span> <span class="toctext">Remove an option from a choice list</span></a></li>
<li class="toclevel-3 tocsection-26"><a href="index.php%3Ftitle=Client_Scripts.html#Remove_ALL_options_from_a_choice_list"><span class="tocnumber">4.8.9</span> <span class="toctext">Remove ALL options from a choice list</span></a></li>
<li class="toclevel-3 tocsection-27"><a href="index.php%3Ftitle=Client_Scripts.html#Get_the_label_for_a_choice_list_value"><span class="tocnumber">4.8.10</span> <span class="toctext">Get the label for a choice list value</span></a></li>
<li class="toclevel-3 tocsection-28"><a href="index.php%3Ftitle=Client_Scripts.html#Show_or_hide_an_action_button_depending_on_the_form_view"><span class="tocnumber">4.8.11</span> <span class="toctext">Show or hide an action button depending on the form view</span></a></li>
<li class="toclevel-3 tocsection-29"><a href="index.php%3Ftitle=Client_Scripts.html#Look_up_the_value_of_a_reference_field"><span class="tocnumber">4.8.12</span> <span class="toctext">Look up the value of a reference field</span></a></li>
<li class="toclevel-3 tocsection-30"><a href="index.php%3Ftitle=Client_Scripts.html#Get_the_current_user_name"><span class="tocnumber">4.8.13</span> <span class="toctext">Get the current user name</span></a></li>
<li class="toclevel-3 tocsection-31"><a href="index.php%3Ftitle=Client_Scripts.html#Get_the_value_of_a_parameter"><span class="tocnumber">4.8.14</span> <span class="toctext">Get the value of a parameter</span></a></li>
<li class="toclevel-3 tocsection-32"><a href="index.php%3Ftitle=Client_Scripts.html#Test_if_the_current_user_has_a_role"><span class="tocnumber">4.8.15</span> <span class="toctext">Test if the current user has a role</span></a></li>
<li class="toclevel-3 tocsection-33"><a href="index.php%3Ftitle=Client_Scripts.html#Determine_what_submit_button_was_clicked"><span class="tocnumber">4.8.16</span> <span class="toctext">Determine what submit button was clicked</span></a></li>
<li class="toclevel-3 tocsection-34"><a href="index.php%3Ftitle=Client_Scripts.html#Determine_if_any_fields_on_the_form_have_changed"><span class="tocnumber">4.8.17</span> <span class="toctext">Determine if any fields on the form have changed</span></a></li>
<li class="toclevel-3 tocsection-35"><a href="index.php%3Ftitle=Client_Scripts.html#Using_GlideRecord_query_from_client"><span class="tocnumber">4.8.18</span> <span class="toctext">Using GlideRecord query from client</span></a></li>
<li class="toclevel-3 tocsection-36"><a href="index.php%3Ftitle=Client_Scripts.html#Check_if_order_guide_is_loaded_for_the_first_time"><span class="tocnumber">4.8.19</span> <span class="toctext">Check if order guide is loaded for the first time</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-37"><a href="index.php%3Ftitle=Client_Scripts.html#Enhancements"><span class="tocnumber">5</span> <span class="toctext">Enhancements</span></a>
<ul>
<li class="toclevel-2 tocsection-38"><a href="index.php%3Ftitle=Client_Scripts.html#Fuji"><span class="tocnumber">5.1</span> <span class="toctext">Fuji</span></a></li>
</ul>
</li>
</ul>
</div>
</div>
<h1><span class="mw-headline" id="Overview"><span class="mw-headline-number">1</span> Overview</span></h1>
<p>Client scripts are shipped to the client (the browser) and run there instead of on the server. Users who know JavaScript can define scripts to run in the client browser. Several types of scripts are supported: 
</p>
<table class="standard">

<tr>
<th> Script type
</th>
<th> Runs when
</th></tr>
<tr>
<td> onLoad()
</td>
<td> The system loads a form
</td></tr>
<tr>
<td> onChange()
</td>
<td>
<ul><li> The system loads a form loads and no field values have changed</li>
<li> A field value changes</li></ul>
</td></tr>
<tr>
<td> onSubmit()
</td>
<td> A user saves the form
</td></tr>
<tr>
<td> onCellEdit()
</td>
<td> A list cell value changes
</td></tr></table>
<table cellspacing="5" cellpadding="5" class="reproduce">

<tr>
<td scope="row" style="vertical-align:middle;"> <div class="floatleft"><a href="index.php%3Ftitle=File:Warning.gif.html" class="image" title="Note"><img alt="Note" src="images/thumb/c/c2/Warning.gif/16px-Warning.gif.png" width="16" height="16" srcset="/images/thumb/c/c2/Warning.gif/24px-Warning.gif.png 1.5x, /images/thumb/c/c2/Warning.gif/32px-Warning.gif.png 2x" /></a></div>
</td>
<td scope="row" style="vertical-align:top"> <b>Note:</b> 
<ul><li>For optimal performance, <a href="index.php%3Ftitle=Client_Script_Best_Practice.html" title="Client Script Best Practice" class="mw-redirect">the recommended best practice</a> is to limit the amount of code sent to the client. Consider the impact on the client when adding client scripts.</li>
<li>Client scripts are not supported on search screens.</li></ul>
</td></tr></table>
<p><br />
<br /> 
</p>
<table cellspacing="5" cellpadding="5" style="border: 2px solid #FFCC66; width: 70%; margin-bottom: 0.5em; margin-top: 0.5em; vertical-align: top;">

<tr>
<td> <div class="floatleft"><a href="index.php%3Ftitle=File:Caution-diamond.png.html" class="image" title="Warning"><img alt="Warning" src="images/thumb/4/4f/Caution-diamond.png/30px-Caution-diamond.png" width="30" height="30" srcset="/images/thumb/4/4f/Caution-diamond.png/45px-Caution-diamond.png 1.5x, /images/4/4f/Caution-diamond.png 2x" /></a></div>
</td>
<td width="100%"> <b>Warning:</b> With the exception of onCellEdit client scripts, UI policies and client scripts apply to forms only. If you create UI policies or client scripts for fields on a form, you must use another method to ensure that data in those fields is similarly controlled in a list. You can:
<ul><li><a href="index.php%3Ftitle=Administering_the_List_Editor.html" title="Administering the List Editor">Disable list editing</a> for the table.</li>
<li>Create appropriate business rules or access controls for list editing.</li>
<li>Create <a href="index.php%3Ftitle=Data_Policy.html" title="Data Policy">data policies</a>.</li>
<li>Create a separate <a href="index.php%3Ftitle=Client_Scripts.html#onCellEdit.28.29_Scripts"><i>onCellEdit</i> client script</a>.</li></ul>
<p>See <a href="index.php%3Ftitle=Setting_Field_Values_in_Forms_and_Lists.html" title="Setting Field Values in Forms and Lists">Setting Field Values in Forms and Lists</a> for a comparison of client scripts and business rules.
</p>
</td></tr></table>
<h1><span class="mw-headline" id="Client_Script_Form"><span class="mw-headline-number">2</span> Client Script Form</span></h1>
<p>To define a client script, navigate to <b>System Definition &gt; Client Scripts</b> and create or edit a record (see table for field descriptions).
</p>
<dl><dd>You can add client scripts only on tables that are <a href="index.php%3Ftitle=Special:Book&amp;bookcmd=remove_article&amp;arttitle=Applications&amp;oldid=0.html#Application_Scope" title="Applications">in the same scope</a> as the client script (starting with the <a href="index.php%3Ftitle=Fuji_Release_Notes.html" title="Fuji Release Notes">Fuji release</a>).</dd></dl>
<p><a href="index.php%3Ftitle=File:Client_script.png.html" class="image" title="Image:client_script.png"><img alt="Image:client_script.png" src="images/9/98/Client_script.png" width="850" height="554" /></a> 
</p>
<table class="standard">

<tr>
<th> Field
</th>
<th> Description
</th></tr>
<tr>
<td> Name
</td>
<td> Unique, descriptive name for this script.
</td></tr>
<tr>
<td> Application
</td>
<td> Application that contains this client script (starting with the <a href="index.php%3Ftitle=Fuji_Release_Notes.html" title="Fuji Release Notes">Fuji release</a>).
</td></tr>
<tr>
<td> Active
</td>
<td> Indicator of whether the script active.
</td></tr>
<tr>
<td> Global
</td>
<td> Indicator of whether the script applies to all views. When <b>Global</b> is selected, the script runs regardless of what view is being displayed. When <b>Global</b> is not selected, the script runs only if the current view matches the value in the <b>View</b> field.
</td></tr>
<tr>
<td> View
</td>
<td> View the script applies to. This option is available only if <b>Global</b> is not selected.
</td></tr>
<tr>
<td> Type
</td>
<td> Indicator of when the script runs. Select one of the following types:
<ul><li><b>onLoad():</b> when a form is first loaded. </li>
<li><b>onSubmit():</b> when a form is submitted. This type allows you to cancel the submission, if necessary. </li>
<li><b>onChange():</b> when a particular field on the form changes value or when a form is first loaded and no fields have changed values.</li>
<li><b>onCellEdit():</b> when a user interacts with a specified field in a list.</li></ul>
</td></tr>
<tr>
<td> Table
</td>
<td> Table or database view this script applies to, such as Incident or Change Request.
<p><br />
</p>
<table cellspacing="5" cellpadding="5" class="reproduce">

<tr>
<td scope="row" style="vertical-align:middle;"> <div class="floatleft"><a href="index.php%3Ftitle=File:Warning.gif.html" class="image" title="Note"><img alt="Note" src="images/thumb/c/c2/Warning.gif/16px-Warning.gif.png" width="16" height="16" srcset="/images/thumb/c/c2/Warning.gif/24px-Warning.gif.png 1.5x, /images/thumb/c/c2/Warning.gif/32px-Warning.gif.png 2x" /></a></div>
</td>
<td scope="row" style="vertical-align:top"> <b>Note:</b> <i>The list shows only tables and database views that are <a href="index.php%3Ftitle=Special:Book&amp;bookcmd=remove_article&amp;arttitle=Applications&amp;oldid=0.html#Application_Scope" title="Applications">in the same scope</a> as the client script (starting with the Fuji release).</i>
</td></tr></table>
</td></tr>
<tr>
<td> Inherited
</td>
<td> Indicator of whether the script applies to extended tables. For example, if the script is active on the task table, selecting <b>Inherited</b> runs this script on the incident, change_request, and problem tables, as well.
</td></tr>
<tr>
<td> Field name
</td>
<td> Field the script applies to. This option is available only if the <b>Type</b> is set to <b>onChange()</b>
</td></tr>
<tr>
<td> Description
</td>
<td> Detailed description of the client script.
</td></tr>
<tr>
<td> Messages
</td>
<td> Text strings available to the client script. Enter one string per line using <tt>getMessage(msg)</tt> syntax. You can use these strings in the client script as localized messages without an AJAX call, which allows for the internationalization of messages without a round trip to the server. As an example, if the <b>Message</b> field has the line <b>Please populate the Reason field</b>, and an entry exists in the sys_ui_message table for their language with that key, then the client script could have the following line: <br />
<dl><dd><tt>alert(getMessage(Please populate the Reason field));</tt> <br /></dd></dl>
<p>and the user would see it in their language.
</p>
</td></tr>
<tr>
<td> Script
</td>
<td> Script that executes when the client script is triggered.
</td></tr>
<tr>
<td> UI Type
</td>
<td> Target UI this script applies to: <b>Desktop</b>, <b>Mobile</b>, or <b>Both</b> (starting with the <a href="index.php%3Ftitle=Dublin_Release_Notes.html" title="Dublin Release Notes">Dublin release</a>).
</td></tr>
<tr>
<th colspan="2">Related lists on the form view:
</th></tr>
<tr>
<td>Versions
</td>
<td>All versions of the client script. Use this list to compare versions or to revert to a previous version. See <a href="index.php%3Ftitle=Versions.html" title="Versions">Versions</a>.
</td></tr></table>
<h1><span class="mw-headline" id="Client_Script_Types"><span class="mw-headline-number">3</span> Client Script Types</span></h1>
<h2><span class="mw-headline" id="onLoad.28.29_Scripts"><span class="mw-headline-number">3.1</span> onLoad() Scripts</span></h2>
<p>An <i>onLoad()</i> script runs when a form is first drawn and before control is given to the user to begin typing. Typically, you use an <i>onLoad()</i> script to perform some client side manipulation of the document on screen. 
</p><p>An <i>onLoad()</i> script <b>must</b> contain a function named <b>onLoad()</b>. Otherwise, it is entirely up to you what your script does after it gets to the client. 
</p><p>For example, here is a trivial <i>onLoad()</i> script that displays a message box that says "Loading ..." while the page loads. 
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="kd">function</span> <span class="nx">onLoad</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Loading ...&#39;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div> <br /> 
<h2><span class="mw-headline" id="onSubmit.28.29_Scripts"><span class="mw-headline-number">3.2</span> onSubmit() Scripts</span></h2>
<p>An <i>onSubmit()</i> script runs when a form is submitted. Typically, you use an <i>onSubmit()</i> script to validate things on the form and ensure that the submission makes sense. As such, <i>onSubmit()</i> scripts can potentially <i>cancel</i> a submission by returning <b>false</b>. 
</p><p>An <i>onSubmit()</i> script <b>must</b> contain a function named <b>onSubmit()</b>. 
</p><p>For example, here is an <i>onSubmit()</i> script that prompts the user to confirm that a priority one ticket should really be submitted. If the user clicks <b>Cancel</b> in the confirmation dialog box, the submission is canceled. 
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="kd">function</span> <span class="nx">onSubmit</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">priority</span> <span class="o">=</span> <span class="nx">g_form</span><span class="p">.</span><span class="nx">getValue</span><span class="p">(</span><span class="s1">&#39;priority&#39;</span><span class="p">);</span>   
  <span class="k">if</span> <span class="p">(</span><span class="nx">priority</span> <span class="o">&amp;&amp;</span> <span class="nx">priority</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span>
  <span class="k">return</span> <span class="nx">confirm</span><span class="p">(</span><span class="s1">&#39;Are you sure you want to submit a priority one ticket? The CIO will be notified!&#39;</span><span class="p">);}</span>
<span class="p">}</span>
</pre></div> 
<p>The important thing to remember here is: to stop form submission, return <b>false</b> from your <i>onSubmit()</i> script.
</p>
<h2><span class="mw-headline" id="onChange.28.29_Scripts"><span class="mw-headline-number">3.3</span> onChange() Scripts</span></h2>
<p>An <i>onChange()</i> script can run when a particular field changes value or when the form is first drawn and no fields have changed value from previous script actions. As such, <i>onChange</i> scripts can potentially act as <i>onLoad</i> scripts with extra conditions.
</p><p>An <i>onChange()</i> script <b>must</b> contain a function named <b>onChange()</b>. 
</p><p>All <i>onChange()</i> scripts are called with several parameters: 
</p>
<ul><li><b>control</b> - the field whose value changed if any. </li>
<li><b>oldValue</b> - the value of this widget when the record was loaded into the form.</li>
<li><b>newValue</b> - the value of this widget after the change, or when the isLoading parameter is true, the same value as the oldValue parameter. </li>
<li><b>isLoading</b> - identifies whether the form is loading and also indicates that no fields have changed value. This parameter can only be true when the form is loading and no values have changed.</li>
<li><b>isTemplate</b> - identifies whether the change occurs as part of a template load or not.</li></ul>
<p>For example, here is an <i>onChange()</i> script that notifies the user whenever the short description field on a form changes. 
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="kd">function</span> <span class="nx">onChange</span><span class="p">(</span><span class="nx">control</span><span class="p">,</span> <span class="nx">oldValue</span><span class="p">,</span> <span class="nx">newValue</span><span class="p">,</span> <span class="nx">isLoading</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;you changed short description from &#39;</span> <span class="o">+</span> <span class="nx">oldValue</span> <span class="o">+</span> <span class="s1">&#39; to &#39;</span> <span class="o">+</span> <span class="nx">newValue</span><span class="p">);</span>
<span class="p">}</span>
</pre></div> 
<p>To prevent an <i>onChange()</i> script from running when the form loads, add the following condition to the top of the script. 
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="k">if</span> <span class="p">(</span><span class="nx">isLoading</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<h2><span class="mw-headline" id="onCellEdit.28.29_Scripts"><span class="mw-headline-number">3.4</span> onCellEdit() Scripts</span></h2>
<p>Scripts can be defined as <i>onCellEdit</i> to run on the client side when <a href="index.php%3Ftitle=Special:Book&amp;bookcmd=remove_article&amp;arttitle=Editing+Lists&amp;oldid=0.html#Using_the_List_Editor" title="Editing Lists">the list editor</a> interacts with a cell.
</p>
<table cellspacing="5" cellpadding="5" class="reproduce">

<tr>
<td scope="row" style="vertical-align:middle;"> <div class="floatleft"><a href="index.php%3Ftitle=File:Warning.gif.html" class="image" title="Note"><img alt="Note" src="images/thumb/c/c2/Warning.gif/16px-Warning.gif.png" width="16" height="16" srcset="/images/thumb/c/c2/Warning.gif/24px-Warning.gif.png 1.5x, /images/thumb/c/c2/Warning.gif/32px-Warning.gif.png 2x" /></a></div>
</td>
<td scope="row" style="vertical-align:top"> <b>Note:</b> <i>onCellEdit scripts do not apply to <a href="index.php%3Ftitle=Creating_Widgets.html#Creating_a_List_Widget" title="Creating Widgets">list widgets</a> on homepages or dashboards.</i>
</td></tr></table>
<p><br />
An <i>onCellEdit()</i> script <b>must</b> contain a function named <b>onCellEdit()</b>. 
</p><p>An <i>onCellEdit()</i> script takes the following parameters:
</p>
<ul><li><b>sysIDs</b> - An array of the sys_ids for all items being edited.</li>
<li><b>table</b> - The table of the items being edited.</li>
<li><b>oldValues</b> - The old values of the cells being edited.</li>
<li><b>newValue</b> - The new value for the cells being edited.</li>
<li><b>callback</b> - A callback that continues the execution of any other related cell edit scripts. If 'true' is passed as a parameter, the other scripts are executed or the change is committed if there are no more scripts. If 'false' is passed as a parameter, any further scripts are not executed and the change is not committed.</li></ul>
<p>Example:
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="kd">function</span> <span class="nx">onCellEdit</span><span class="p">(</span><span class="nx">sysIDs</span><span class="p">,</span> <span class="nx">table</span><span class="p">,</span> <span class="nx">oldValues</span><span class="p">,</span> <span class="nx">newValue</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">hasDifferentValues</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">oldValues</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">oldValue</span> <span class="o">=</span> <span class="nx">oldValues</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">oldValue</span> <span class="o">!=</span> <span class="nx">newValue</span><span class="p">){</span>
      <span class="nx">hasDifferentValues</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="k">break</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">success</span> <span class="o">=</span> <span class="nx">hasDifferentValues</span> <span class="o">&amp;&amp;</span> <span class="nx">performSomeFurtherValidation</span><span class="p">(</span><span class="nx">sysIDs</span><span class="p">,</span> <span class="nx">table</span><span class="p">,</span> <span class="nx">oldValues</span><span class="p">,</span> <span class="nx">newValue</span><span class="p">);</span> 
  <span class="nx">callback</span><span class="p">(</span><span class="nx">success</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
<h1><span class="mw-headline" id="Client_Script_FAQ"><span class="mw-headline-number">4</span> Client Script FAQ</span></h1>
<h2><span class="mw-headline" id="Why_do_I_have_to_name_scripts_like_that.3F"><span class="mw-headline-number">4.1</span> Why do I have to name scripts like that?</span></h2>
<p>The client code needs to know which function to attach to the document. Hence, it requires that you follow our naming convention with functions. Note that you can have more than one function on a client side script and have your <i>onSubmit()</i> function, for example, call other functions. The requirement is that the <b>primary</b> function follow our naming convention. 
</p>
<h2><span class="mw-headline" id="Can_I_have_more_than_one_function_listening_to_the_same_thing.3F"><span class="mw-headline-number">4.2</span> Can I have more than one function listening to the same thing?</span></h2>
<p>You can, but there is no guarantee of sequencing. You cannot predict what order your event handlers will run.
</p>
<h2><span class="mw-headline" id="How_do_I_reference_a_field_on_the_form.3F"><span class="mw-headline-number">4.3</span> How do I reference a field on the form?</span></h2>
<p>To reference the actual HTML element of the priority field on the incident form: 
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="kd">var</span> <span class="nx">priority_field</span> <span class="o">=</span> <span class="nx">g_form</span><span class="p">.</span><span class="nx">getControl</span><span class="p">(</span><span class="s1">&#39;priority&#39;</span><span class="p">);</span>
</pre></div> 
<p>The easiest way to reference a field's value is to use the built-in <tt>g_form</tt> helper variable: 
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="kd">var</span> <span class="nx">value_of_priority</span> <span class="o">=</span> <span class="nx">g_form</span><span class="p">.</span><span class="nx">getValue</span><span class="p">(</span><span class="s1">&#39;priority&#39;</span><span class="p">);</span>
</pre></div>
<h2><span class="mw-headline" id="How_do_I_cancel_a_form_submission.3F"><span class="mw-headline-number">4.4</span> How do I cancel a form submission?</span></h2>
<p>Have your <i>onSubmit()</i> function return <b>false</b>. For example the following snippet of code disallows <b>all</b> form submission. 
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="kd">function</span> <span class="nx">onSubmit</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">}</span>
</pre></div> <br /> 
<h2><span class="mw-headline" id="How_do_I_confirm_a_field_value_with_the_user.3F"><span class="mw-headline-number">4.5</span> How do I confirm a field value with the user?</span></h2>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="kd">function</span> <span class="nx">onSubmit</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">//This allows you to access fields from the referenced record</span>
  <span class="kd">var</span> <span class="nx">assignedTo</span> <span class="o">=</span> <span class="nx">g_form</span><span class="p">.</span><span class="nx">getReference</span><span class="p">(</span><span class="s1">&#39;assigned_to&#39;</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">answer</span> <span class="o">=</span> <span class="nx">confirm</span><span class="p">(</span><span class="s2">&quot;The Assigned to is &quot;</span> <span class="o">+</span> <span class="nx">assignedTo</span><span class="p">.</span><span class="nx">user_name</span> <span class="o">+</span> <span class="s2">&quot;. Is this correct?&quot;</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">answer</span> <span class="o">==</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div> <br />
<h2><span class="mw-headline" id="How_do_I_force_a_Save_and_Stay.3F"><span class="mw-headline-number">4.6</span> How do I force a Save and Stay?</span></h2>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="c1">// onChange event on Incident table using Field name &quot;Caller&quot;</span>
<span class="kd">function</span> <span class="nx">onChange</span><span class="p">(</span><span class="nx">control</span><span class="p">,</span> <span class="nx">oldValue</span><span class="p">,</span> <span class="nx">newValue</span><span class="p">,</span> <span class="nx">isLoading</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Setting the control value prevents against an infinite loop </span>
  <span class="c1">// Change caller_id to the field the change event reacts to</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">control</span><span class="p">.</span><span class="nx">caller_id</span> <span class="o">!=</span> <span class="nx">newValue</span> <span class="o">&amp;&amp;</span> <span class="nx">control</span><span class="p">.</span><span class="nx">caller_id</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span> 
    <span class="c1">//do any comparisons you want </span>
    <span class="c1">//</span>
    <span class="c1">// . . .</span>
    <span class="c1">//</span>
    <span class="c1">//does an update and stay</span>
    <span class="nx">gsftSubmit</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;sysverb_update_and_stay&#39;</span><span class="p">));</span>
  <span class="p">}</span>
  <span class="c1">// Change caller_id to the field the change event reacts to </span>
  <span class="nx">control</span><span class="p">.</span><span class="nx">caller_id</span> <span class="o">=</span> <span class="nx">newValue</span><span class="p">;</span> 
<span class="p">}</span>
</pre></div> <br /> 
<h2><span class="mw-headline" id="How_do_I_call_a_business_rule_from_a_client_script.3F"><span class="mw-headline-number">4.7</span> How do I call a business rule from a client script?</span></h2>
<p>To call a business rule from a client script, use <a href="index.php%3Ftitle=GlideAjax.html" title="GlideAjax">GlideAjax</a>.
</p>
<h2><span class="mw-headline" id="What_are_some_of_the_available_helper_functions.3F"><span class="mw-headline-number">4.8</span> What are some of the available helper functions?</span></h2>
<p>There is a global object that ServiceNow automatically creates called <tt>g_form</tt> that references the currently active form. You can use the <tt>g_form</tt> object in your scripts to simplify certain common programming tasks. 
</p><p>A second global object, called <tt>g_user</tt>, references the currently active user. Just like <tt>g_form</tt>, you can use <tt>g_user</tt> in your scripts to react based on the current user (and that user's roles). 
</p>
<h3><span class="mw-headline" id="Hide_or_show_a_field"><span class="mw-headline-number">4.8.1</span> Hide or show a field</span></h3>
<p>While you can use client scripting to hide or show a field, you can usually accomplish the same thing without scripting via <a href="index.php%3Ftitle=Creating_a_UI_Policy.html" title="Creating a UI Policy">UI policies</a>. 
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nx">g_form</span><span class="p">.</span><span class="nx">setVisible</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">fieldname</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="nx">value</span><span class="o">&gt;</span><span class="p">);</span>
</pre></div> 
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="kd">function</span> <span class="nx">onChange</span><span class="p">(</span><span class="nx">control</span><span class="p">,</span> <span class="nx">oldValue</span><span class="p">,</span> <span class="nx">newValue</span><span class="p">,</span> <span class="nx">isLoading</span><span class="p">)</span> <span class="p">{</span>         
  <span class="kd">var</span> <span class="nx">index</span> <span class="o">=</span> <span class="nx">newValue</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">&#39;Change&#39;</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">index</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// hide it</span>
    <span class="nx">g_form</span><span class="p">.</span><span class="nx">setVisible</span><span class="p">(</span><span class="s1">&#39;field&#39;</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// unhide it</span>
    <span class="nx">g_form</span><span class="p">.</span><span class="nx">setVisible</span><span class="p">(</span><span class="s1">&#39;field&#39;</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<h3><span class="mw-headline" id="Make_a_field_mandatory"><span class="mw-headline-number">4.8.2</span> Make a field mandatory</span></h3>
<p>While you can use client scripting to make a field mandatory, you can usually accomplish the same thing without scripting via <a href="index.php%3Ftitle=Creating_a_UI_Policy.html" title="Creating a UI Policy">UI policies</a>. 
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nx">g_form</span><span class="p">.</span><span class="nx">setMandatory</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">fieldname</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="nx">value</span><span class="o">&gt;</span><span class="p">);</span>
</pre></div> 
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="kd">function</span> <span class="nx">onChange</span><span class="p">(</span><span class="nx">control</span><span class="p">,</span> <span class="nx">oldValue</span><span class="p">,</span> <span class="nx">newValue</span><span class="p">,</span> <span class="nx">isLoading</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">oldValue</span> <span class="o">==</span> <span class="nx">newValue</span><span class="p">)</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="nx">g_form</span><span class="p">.</span><span class="nx">setMandatory</span><span class="p">(</span><span class="s1">&#39;short_description&#39;</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
<span class="p">}</span>
</pre></div> 
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre>  <span class="kd">function</span> <span class="nx">onChange</span><span class="p">(</span><span class="nx">control</span><span class="p">,</span> <span class="nx">oldValue</span><span class="p">,</span> <span class="nx">newValue</span><span class="p">,</span> <span class="nx">isLoading</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">isLoading</span><span class="p">)</span>
      <span class="k">return</span><span class="p">;</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">newValue</span> <span class="o">==</span> <span class="s2">&quot;Critical&quot;</span><span class="p">)</span>
      <span class="nx">g_form</span><span class="p">.</span><span class="nx">setMandatory</span><span class="p">(</span><span class="s1">&#39;u_due_date&#39;</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
    <span class="k">else</span>
      <span class="nx">g_form</span><span class="p">.</span><span class="nx">setMandatory</span><span class="p">(</span><span class="s1">&#39;u_due_date&#39;</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
<h3><span class="mw-headline" id="Make_a_field_read-only"><span class="mw-headline-number">4.8.3</span> Make a field read-only</span></h3>
<p>While you can use client scripting to make a field read-only, you can usually accomplish the same thing without scripting by using <a href="index.php%3Ftitle=Creating_a_UI_Policy.html" title="Creating a UI Policy">UI policies</a>.
</p><p>In order to make a field read-only, the field must be present on the form, though it may be hidden. The following example makes the <b>incident_state</b> field read-only on the Incident form upon load: 
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="kd">function</span> <span class="nx">onLoad</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">g_form</span><span class="p">.</span><span class="nx">setReadonly</span><span class="p">(</span><span class="s1">&#39;incident_state&#39;</span><span class="p">,</span><span class="kc">true</span><span class="p">);</span>
<span class="p">}</span>
</pre></div> <br /> To do the same thing for a derived field (e.g., the Caller's phone number field if it has been added to the Incident form), you can use the following: 
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="kd">function</span> <span class="nx">onLoad</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">g_form</span><span class="p">.</span><span class="nx">setReadonly</span><span class="p">(</span><span class="s1">&#39;caller_id.phone&#39;</span><span class="p">,</span> <span class="kc">true</span><span class="p">)</span>
<span class="p">}</span>
</pre></div> 
<h3><span class="mw-headline" id="Get_a_field_value"><span class="mw-headline-number">4.8.4</span> Get a field value</span></h3>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nx">g_form</span><span class="p">.</span><span class="nx">getValue</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">fieldName</span><span class="o">&gt;</span><span class="p">);</span>
</pre></div> 
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="kd">function</span> <span class="nx">onChange</span><span class="p">(</span><span class="nx">control</span><span class="p">,</span> <span class="nx">oldValue</span><span class="p">,</span> <span class="nx">newValue</span><span class="p">,</span> <span class="nx">isLoading</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">alert</span><span class="p">(</span><span class="nx">g_form</span><span class="p">.</span><span class="nx">getValue</span><span class="p">(</span><span class="s1">&#39;short_description&#39;</span><span class="p">));</span>
<span class="p">}</span>
</pre></div> 
<h3><span class="mw-headline" id="Set_a_field_value"><span class="mw-headline-number">4.8.5</span> Set a field value</span></h3>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nx">g_form</span><span class="p">.</span><span class="nx">setValue</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">fieldName</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="nx">value</span><span class="o">&gt;</span><span class="p">);</span>
</pre></div> 
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="kd">function</span> <span class="nx">onChange</span><span class="p">(</span><span class="nx">control</span><span class="p">,</span> <span class="nx">oldValue</span><span class="p">,</span> <span class="nx">newValue</span><span class="p">,</span> <span class="nx">isLoading</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">g_form</span><span class="p">.</span><span class="nx">setValue</span><span class="p">(</span><span class="s1">&#39;short_description&#39;</span><span class="p">,</span> <span class="s1">&#39;hello world&#39;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div> 
<h4><span class="mw-headline" id="Set_a_glide_list_field_value"><span class="mw-headline-number">4.8.5.1</span> Set a glide_list field value</span></h4>
<p>You can pass one argument or two. For reference values, passing both the sys_id and the display value is more efficient because the client does not have to look up the display values for you. However, if you do not want to pass the display value, the client will do an AJAX call to find the value, which takes time. 
</p><p>Example: reset to no values:
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nx">g_form</span><span class="p">.</span><span class="nx">setValue</span><span class="p">(</span><span class="s2">&quot;watch_list&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">);</span>
</pre></div> <br /> Example: Set to two references, passing the display values to avoid an AJAX call 
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="kd">var</span> <span class="nx">valueArray</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="s2">&quot;46d44a23a9fe19810012d100cca80666&quot;</span><span class="p">,</span> <span class="s2">&quot;46c6f9efa9fe198101ddf5eed9adf6e7&quot;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">labelArray</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="s2">&quot;Beth Anglin&quot;</span><span class="p">,</span> <span class="s2">&quot;Bud Richman&quot;</span><span class="p">);</span>
<span class="nx">g_form</span><span class="p">.</span><span class="nx">setValue</span><span class="p">(</span><span class="s2">&quot;watch_list&quot;</span><span class="p">,</span> <span class="nx">valueArray</span><span class="p">,</span> <span class="nx">labelArray</span><span class="p">);</span>
</pre></div> <br /> Example: Set arbitrary email address (for a sys_user glide list) <div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nx">g_form</span><span class="p">.</span><span class="nx">setValue</span><span class="p">(</span><span class="s2">&quot;watch_list&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;you@you.com&quot;</span><span class="p">);</span>
</pre></div> <br /> Example: Set references and emails, passing the display values to avoid an AJAX call <div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="kd">var</span> <span class="nx">valueArray</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="s2">&quot;46d44a23a9fe19810012d100cca80666&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;46c6f9efa9fe198101ddf5eed9adf6e7&quot;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">labelArray</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="s2">&quot;Beth Anglin&quot;</span><span class="p">,</span> <span class="s2">&quot;me@me.com&quot;</span><span class="p">,</span> <span class="s2">&quot;Bud Richman&quot;</span><span class="p">);</span>
<span class="nx">g_form</span><span class="p">.</span><span class="nx">setValue</span><span class="p">(</span><span class="s2">&quot;watch_list&quot;</span><span class="p">,</span> <span class="nx">valueArray</span><span class="p">,</span> <span class="nx">labelArray</span><span class="p">);</span>
</pre></div> <br /> Example: Set references and emails, but use AJAX to obtain display values for references (this is a bit less efficient as the server must be contacted for the display values) <br /> <div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="kd">var</span> <span class="nx">valueArray</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="s2">&quot;46d44a23a9fe19810012d100cca80666&quot;</span><span class="p">,</span> <span class="s2">&quot;me@me.com&quot;</span><span class="p">,</span> <span class="s2">&quot;46c6f9efa9fe198101ddf5eed9adf6e7&quot;</span><span class="p">);</span>
<span class="nx">g_form</span><span class="p">.</span><span class="nx">setValue</span><span class="p">(</span><span class="s2">&quot;watch_list&quot;</span><span class="p">,</span> <span class="nx">valueArray</span><span class="p">);</span>
</pre></div> <br /> Example: Set references and emails using a comma separated string, but use AJAX to obtain display values for references (this is a bit less efficient as the server must be contacted for the display values) <div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nx">g_form</span><span class="p">.</span><span class="nx">setValue</span><span class="p">(</span><span class="s2">&quot;watch_list&quot;</span><span class="p">,</span> <span class="s2">&quot;46d44a23a9fe19810012d100cca80666,me@me.com,46c6f9efa9fe198101ddf5eed9adf6e7&quot;</span><span class="p">);</span>
</pre></div> 
<h3><span class="mw-headline" id="Add_an_Option_to_the_end_of_a_choice_list"><span class="mw-headline-number">4.8.6</span> Add an Option to the end of a choice list</span></h3>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nx">g_form</span><span class="p">.</span><span class="nx">addOption</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">fieldName</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="nx">choiceValue</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="nx">choiceLabel</span><span class="o">&gt;</span><span class="p">);</span>
</pre></div> 
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="kd">function</span> <span class="nx">onChange</span><span class="p">(</span><span class="nx">control</span><span class="p">,</span> <span class="nx">oldValue</span><span class="p">,</span> <span class="nx">newValue</span><span class="p">,</span> <span class="nx">isLoading</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">g_form</span><span class="p">.</span><span class="nx">addOption</span><span class="p">(</span><span class="s1">&#39;priority&#39;</span><span class="p">,</span> <span class="s1">&#39;6&#39;</span><span class="p">,</span> <span class="s1">&#39;6 - Really Low&#39;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
<h3><span class="mw-headline" id="Add_an_Option_at_a_specific_point_on_a_choice_list"><span class="mw-headline-number">4.8.7</span> Add an Option at a specific point on a choice list</span></h3>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nx">g_form</span><span class="p">.</span><span class="nx">addOption</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">fieldName</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="nx">choiceValue</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="nx">choiceLabel</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="nx">targetIndex</span><span class="o">&gt;</span><span class="p">);</span>
</pre></div> 
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="kd">function</span> <span class="nx">onChange</span><span class="p">(</span><span class="nx">control</span><span class="p">,</span> <span class="nx">oldValue</span><span class="p">,</span> <span class="nx">newValue</span><span class="p">,</span> <span class="nx">isLoading</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">g_form</span><span class="p">.</span><span class="nx">addOption</span><span class="p">(</span><span class="s1">&#39;priority&#39;</span><span class="p">,</span> <span class="s1">&#39;2.5&#39;</span><span class="p">,</span> <span class="s1">&#39;2.5 - Really Low&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
<span class="p">}</span>
</pre></div> 
<p>Note that an insert happens at the location you specify on a <b>zero based array</b>. Existing options will all shift up one level. For example, given: 
</p><p>[A, B, C, D] 
</p><p>Insert E at 0 
</p><p>[<b>E</b>, A, B, C, D] 
</p><p>Insert E at 2 
</p><p>[A, B, <b>E</b>, C, D]
</p>
<h3><span class="mw-headline" id="Remove_an_option_from_a_choice_list"><span class="mw-headline-number">4.8.8</span> Remove an option from a choice list</span></h3>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nx">g_form</span><span class="p">.</span><span class="nx">removeOption</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">fieldName</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="nx">choiceValue</span><span class="o">&gt;</span><span class="p">);</span>
</pre></div> 
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="kd">function</span> <span class="nx">onChange</span><span class="p">(</span><span class="nx">control</span><span class="p">,</span> <span class="nx">oldValue</span><span class="p">,</span> <span class="nx">newValue</span><span class="p">,</span> <span class="nx">isLoading</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">g_form</span><span class="p">.</span><span class="nx">removeOption</span><span class="p">(</span><span class="s1">&#39;priority&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div> 
<p>Remove the <b>Closed</b> state option if the user is not an admin: 
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="kd">function</span> <span class="nx">onLoad</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">isAdmin</span> <span class="o">=</span> <span class="nx">g_user</span><span class="p">.</span><span class="nx">hasRole</span><span class="p">(</span><span class="s1">&#39;admin&#39;</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">state</span> <span class="o">=</span> <span class="nx">g_form</span><span class="p">.</span><span class="nx">getValue</span><span class="p">(</span><span class="s1">&#39;state&#39;</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">isAdmin</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">state</span> <span class="o">!=</span> <span class="mi">7</span><span class="p">)){</span>
    <span class="c1">//alert(&#39;Current user is not an admin&#39;);</span>
    <span class="nx">g_form</span><span class="p">.</span><span class="nx">removeOption</span><span class="p">(</span><span class="s1">&#39;state&#39;</span><span class="p">,</span> <span class="s1">&#39;7&#39;</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div> 
<h3><span class="mw-headline" id="Remove_ALL_options_from_a_choice_list"><span class="mw-headline-number">4.8.9</span> Remove ALL options from a choice list</span></h3>
<p>The <b>Category</b> choice list, for example: 
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="nx">g_form</span><span class="p">.</span><span class="nx">getControl</span><span class="p">(</span><span class="s1">&#39;category&#39;</span><span class="p">).</span><span class="nx">options</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</pre></div>
<h3><span class="mw-headline" id="Get_the_label_for_a_choice_list_value"><span class="mw-headline-number">4.8.10</span> Get the label for a choice list value</span></h3>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="kd">var</span> <span class="nx">choiceValue</span> <span class="o">=</span> <span class="nx">g_form</span><span class="p">.</span><span class="nx">getValue</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">fieldName</span><span class="o">&gt;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">choiceLabel</span> <span class="o">=</span> <span class="nx">g_form</span><span class="p">.</span><span class="nx">getOption</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">fieldName</span><span class="o">&gt;</span><span class="p">,</span> <span class="nx">choiceValue</span><span class="p">).</span><span class="nx">text</span><span class="p">;</span>
</pre></div> 
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="kd">function</span> <span class="nx">onChange</span><span class="p">(</span><span class="nx">control</span><span class="p">,</span> <span class="nx">oldValue</span><span class="p">,</span> <span class="nx">newValue</span><span class="p">,</span> <span class="nx">isLoading</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">choiceValue</span> <span class="o">=</span> <span class="nx">g_form</span><span class="p">.</span><span class="nx">getValue</span><span class="p">(</span><span class="s1">&#39;category&#39;</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">choiceLabel</span> <span class="o">=</span> <span class="nx">g_form</span><span class="p">.</span><span class="nx">getOption</span><span class="p">(</span><span class="s1">&#39;category&#39;</span><span class="p">,</span> <span class="nx">choiceValue</span><span class="p">).</span><span class="nx">text</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
<h3><span class="mw-headline" id="Show_or_hide_an_action_button_depending_on_the_form_view"><span class="mw-headline-number">4.8.11</span> Show or hide an action button depending on the form view</span></h3>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="kd">function</span> <span class="nx">onLoad</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">objView</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;sysparm_view&#39;</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">strView</span> <span class="o">=</span> <span class="nx">objView</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s1">&#39;value&#39;</span><span class="p">);</span> 
  <span class="k">if</span> <span class="p">(</span><span class="nx">strView</span> <span class="o">==</span> <span class="s1">&#39;ess&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">objCloseButton</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;close_incident&#39;</span><span class="p">);</span>
    <span class="nx">objCloseButton</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">display</span> <span class="o">=</span> <span class="s1">&#39;none&#39;</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div> 
<h3><span class="mw-headline" id="Look_up_the_value_of_a_reference_field"><span class="mw-headline-number">4.8.12</span> Look up the value of a reference field</span></h3>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="kd">var</span> <span class="nx">gr</span> <span class="o">=</span> <span class="nx">g_form</span><span class="p">.</span><span class="nx">getReference</span><span class="p">(</span><span class="s1">&#39;fieldName&#39;</span><span class="p">);</span>
</pre></div> 
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="kd">function</span> <span class="nx">onChange</span><span class="p">(</span><span class="nx">control</span><span class="p">,</span> <span class="nx">oldValue</span><span class="p">,</span> <span class="nx">newValue</span><span class="p">,</span> <span class="nx">isLoading</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">caller</span> <span class="o">=</span> <span class="nx">g_form</span><span class="p">.</span><span class="nx">getReference</span><span class="p">(</span><span class="s1">&#39;caller_id&#39;</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">caller</span><span class="p">.</span><span class="nx">vip</span> <span class="o">==</span> <span class="s1">&#39;true&#39;</span><span class="p">)</span>
    <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Caller is a VIP!&#39;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div> 
<table cellspacing="5" cellpadding="5" class="reproduce">

<tr>
<td scope="row" style="vertical-align:middle;"> <div class="floatleft"><a href="index.php%3Ftitle=File:Warning.gif.html" class="image" title="Note"><img alt="Note" src="images/thumb/c/c2/Warning.gif/16px-Warning.gif.png" width="16" height="16" srcset="/images/thumb/c/c2/Warning.gif/24px-Warning.gif.png 1.5x, /images/thumb/c/c2/Warning.gif/32px-Warning.gif.png 2x" /></a></div>
</td>
<td scope="row" style="vertical-align:top"> <b>Note:</b> <i>When setting values, use the <b>storage</b> value instead of the <b>display</b> value.</i>
</td></tr></table>
<p><br />
</p>
<h3><span class="mw-headline" id="Get_the_current_user_name"><span class="mw-headline-number">4.8.13</span> Get the current user name</span></h3>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="kd">var</span> <span class="nx">myVariable</span> <span class="o">=</span> <span class="nx">g_user</span><span class="p">.</span><span class="nx">userName</span><span class="p">;</span>
</pre></div> 
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="kd">function</span> <span class="nx">onLoad</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">userName</span> <span class="o">=</span> <span class="nx">g_user</span><span class="p">.</span><span class="nx">userName</span><span class="p">;</span>
  <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Current user = &#39;</span> <span class="o">+</span> <span class="nx">userName</span><span class="p">);</span>
<span class="p">}</span>
</pre></div> 
<h3><span class="mw-headline" id="Get_the_value_of_a_parameter"><span class="mw-headline-number">4.8.14</span> Get the value of a parameter</span></h3>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="kd">var</span> <span class="nx">currentView</span> <span class="o">=</span> <span class="nx">g_form</span><span class="p">.</span><span class="nx">getParameter</span><span class="p">(</span><span class="s1">&#39;view&#39;</span><span class="p">);</span>
</pre></div> 
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="kd">function</span> <span class="nx">onLoad</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">view</span> <span class="o">=</span> <span class="nx">g_form</span><span class="p">.</span><span class="nx">getParameter</span><span class="p">(</span><span class="s1">&#39;view&#39;</span><span class="p">);</span>
  <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Current view = &#39;</span> <span class="o">+</span> <span class="nx">view</span><span class="p">);</span>
<span class="p">}</span>
</pre></div> 
<h3><span class="mw-headline" id="Test_if_the_current_user_has_a_role"><span class="mw-headline-number">4.8.15</span> Test if the current user has a role</span></h3>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="kd">var</span> <span class="nx">myRole</span> <span class="o">=</span> <span class="nx">g_user</span><span class="p">.</span><span class="nx">hasRole</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">role</span><span class="o">&gt;</span><span class="p">);</span>
</pre></div> 
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="kd">function</span> <span class="nx">onLoad</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">isAdmin</span> <span class="o">=</span> <span class="nx">g_user</span><span class="p">.</span><span class="nx">hasRole</span><span class="p">(</span><span class="s1">&#39;admin&#39;</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">isAdmin</span><span class="p">)</span>
    <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Current user is an admin&#39;</span><span class="p">);</span>
  <span class="k">else</span>
    <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Current user is NOT an admin&#39;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div> 
<h3><span class="mw-headline" id="Determine_what_submit_button_was_clicked"><span class="mw-headline-number">4.8.16</span> Determine what submit button was clicked</span></h3>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="kd">function</span> <span class="nx">onSubmit</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">action</span> <span class="o">=</span> <span class="nx">g_form</span><span class="p">.</span><span class="nx">getActionName</span><span class="p">();</span>
  <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;You pressed &#39;</span> <span class="o">+</span> <span class="nx">action</span><span class="p">);</span>
<span class="p">}</span>
</pre></div> 
<h3><span class="mw-headline" id="Determine_if_any_fields_on_the_form_have_changed"><span class="mw-headline-number">4.8.17</span> Determine if any fields on the form have changed</span></h3>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="kd">function</span> <span class="nx">onSubmit</span><span class="p">()</span> <span class="p">{</span> 
  <span class="kd">var</span> <span class="nx">field1</span> <span class="o">=</span> <span class="nx">g_form</span><span class="p">.</span><span class="nx">getControl</span><span class="p">(</span><span class="s1">&#39;caller_id&#39;</span><span class="p">);</span>
 
  <span class="c1">//See if the &#39;changed&#39; attribute is true</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">field1</span><span class="p">.</span><span class="nx">changed</span><span class="p">){</span>
    <span class="k">return</span> <span class="nx">confirm</span><span class="p">(</span><span class="s2">&quot;The Caller field has changed.\nDo you really want to save this record?&quot;</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<h3><span class="mw-headline" id="Using_GlideRecord_query_from_client"><span class="mw-headline-number">4.8.18</span> Using GlideRecord query from client</span></h3>
<p>There is a lightweight GlideRecord object on the client side that can be used to query the server from within client scripts. For details, see <a href="index.php%3Ftitle=Special:Book&amp;bookcmd=add_article&amp;arttitle=Client+Side+GlideRecord&amp;oldid=0.html" title="Client Side GlideRecord">Client-side GlideRecord</a>. The following are some common methods that are available. 
</p>
<ul><li><tt>addQuery()</tt></li>
<li><tt>get()</tt></li>
<li><tt>hasNext()</tt></li>
<li><tt>next()</tt></li>
<li><tt>orderBy()</tt></li>
<li><tt>query()</tt></li></ul>
<p>One limitation is that the <tt>addOrCondition()</tt> method is not available. You can work around this by setting the GlideRecord <tt>encodedQuery</tt> property with an encoded query string. 
</p><p>Example: 
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="kd">var</span> <span class="nx">cat</span> <span class="o">=</span> <span class="nx">g_form</span><span class="p">.</span><span class="nx">getValue</span><span class="p">(</span><span class="s1">&#39;category&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">subcat</span> <span class="o">=</span> <span class="nx">g_form</span><span class="p">.</span><span class="nx">getValue</span><span class="p">(</span><span class="s1">&#39;subcategory&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">lookup</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GlideRecord</span><span class="p">(</span><span class="s1">&#39;u_assignment_lookup&#39;</span><span class="p">);</span>
<span class="nx">strQuery</span> <span class="o">=</span> <span class="s2">&quot;u_type=Incident^ORu_type=All&quot;</span><span class="p">;</span>
<span class="nx">strQuery</span> <span class="o">=</span> <span class="nx">strQuery</span> <span class="o">+</span> <span class="s2">&quot;^u_category=&quot;</span> <span class="o">+</span> <span class="nx">cat</span><span class="p">;</span>
<span class="nx">strQuery</span> <span class="o">=</span> <span class="nx">strQuery</span> <span class="o">+</span> <span class="s2">&quot;^u_subcategory=&quot;</span> <span class="o">+</span> <span class="nx">subcat</span><span class="p">;</span>
<span class="nx">strQuery</span> <span class="o">=</span> <span class="nx">strQuery</span> <span class="o">+</span> <span class="s2">&quot;^EQ&quot;</span><span class="p">;</span>
<span class="nx">lookup</span><span class="p">.</span><span class="nx">encodedQuery</span> <span class="o">=</span> <span class="nx">strQuery</span><span class="p">;</span>
<span class="nx">lookup</span><span class="p">.</span><span class="nx">query</span><span class="p">();</span>
</pre></div>
<h3><span class="mw-headline" id="Check_if_order_guide_is_loaded_for_the_first_time"><span class="mw-headline-number">4.8.19</span> Check if order guide is loaded for the first time</span></h3>
<p>It can be helpful for a catalog client script to know whether the user has just started an order guide or is going back to the guide using the <b>Describe Needs</b> button from the item page. 
</p>
<div class="mw-highlight mw-content-ltr" dir="ltr"><pre><span class="c1">// onload catalog script</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">g_form</span><span class="p">.</span><span class="nx">getParameter</span><span class="p">(</span><span class="s1">&#39;cart_edit&#39;</span><span class="p">)</span><span class="o">!=</span><span class="s1">&#39;guide_serial&#39;</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// this stuff only runs if the guide is reloaded after initial submit</span>
  <span class="c1">// it will not run on initial load of the guide</span>
<span class="p">}</span>
</pre></div>
<h1><span class="mw-headline" id="Enhancements"><span class="mw-headline-number">5</span> Enhancements</span></h1>
<h2><span class="mw-headline" id="Fuji"><span class="mw-headline-number">5.1</span> Fuji</span></h2>
<ul><li> These changes support <a href="index.php%3Ftitle=Special:Book&amp;bookcmd=remove_article&amp;arttitle=Applications&amp;oldid=0.html#Application_Scope" title="Applications">developing scoped applications</a>:
<ul><li> The <b>Table</b> field shows only tables and database views that are in the same scope as the client script.</li>
<li> The <b>Application</b> field is added on the form view.</li></ul></li></ul>

<!-- 
NewPP limit report
Cached time: 20171130094359
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.672 seconds
Real time usage: 17.319 seconds
Preprocessor visited node count: 676/1000000
Preprocessor generated node count: 1505/1000000
Post‐expand include size: 5614/2097152 bytes
Template argument size: 2524/2097152 bytes
Highest expansion depth: 5/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00% 13501.686      1 - -total
  0.27%   36.900      1 - Template:Client_Script
  0.22%   30.038      1 - Template:Topic
  0.08%   10.985      1 - Template:TableScopeNote
  0.06%    8.555      5 - Template:Note
  0.06%    7.693      1 - Template:LimitedTOC
  0.05%    6.252      1 - Template:Warning
  0.04%    6.010      2 - Template:T
  0.04%    4.993      1 - Embedded:Client_Script
-->

<!-- Saved in parser cache with key wikidb:pcache:idhash:2052-0!*!0!1!en!5!* and timestamp 20171130094342 and revision id 250206
 -->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="index.php%3Ftitle=Client_Scripts&amp;oldid=250206.html">http://wiki.servicenow.com/index.php?title=Client_Scripts&amp;oldid=250206</a>"</div>
					<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="index.php%3Ftitle=Special:Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="index.php%3Ftitle=Special:Book&amp;bookcmd=add_category&amp;cattitle=Client+Scripts.html" title="Category:Client Scripts">Client Scripts</a></li></ul></div><br /><hr /><a href="index.php%3Ftitle=Category:Contents.html" title="Category:Contents">Contents</a> &gt; <a href="index.php%3Ftitle=Special:Book&amp;bookcmd=add_category&amp;cattitle=Script.html" title="Category:Script">Script</a> &gt; <a href="index.php%3Ftitle=Special:Book&amp;bookcmd=add_category&amp;cattitle=Client+Scripts.html" title="Category:Client Scripts">Client Scripts</a></div>					<!-- end content -->
					<div id='mw-data-after-content'>
	<div id="rating_2052"><div class="voting-title">Was this article helpful?</div><div class="voting-box"><div class="vote-up " data-vote-id="2052" data-vote-the-vote="5" data-vote-id="2052" data-vote-action="5" data-vote-rating="5.00" data-vote-voted="0" id="rating_2052_5"><span>Yes, I found what I needed</span></div><div class="vote-down " data-vote-id="2052" data-vote-the-vote="1" data-vote-id="2052" data-vote-action="5" data-vote-rating="5.00" data-vote-voted="0" id="rating_2052_1"><span>No, I need more assistance</span></div></div></div>
</div>
					<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div id="column-one">
					<div id="p-cactions" class="portlet" role="navigation">
			<h5>Views</h5>

			<div class="pBody">
				<ul>
				<li id="ca-nstab-main" class="selected"><a href="index.php%3Ftitle=Client_Scripts.html" title="View the content page [c]" accesskey="c">Page</a></li>
				</ul>
							</div>
		</div>
				<div class="portlet" id="p-personal" role="navigation">
				<h5>Personal tools</h5>

				<div class="pBody">
					<ul>
													<li id="pt-createaccount"><a href="index.php%3Ftitle=Special:CreateAccount&amp;returnto=Client+Scripts.html" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li>
													<li id="pt-login"><a href="index.php%3Ftitle=Special:UserLogin&amp;returnto=Client+Scripts.html" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
											</ul>
				</div>
			</div>
			<div class="portlet" id="p-logo" role="banner">
				<a href="index.html" class="mw-wiki-logo" title="Visit the main page"></a>
			</div>
				<div class="generated-sidebar portlet" id="p-" role="navigation">
		<h3></h3>
		<div class='pBody'>
			<div class="portlet">
<h5><span class="mw-headline" id="Categories">Categories</span></h5>
<div class="pBody">
<div class="sidebarcat">
<ul><li><a href="index.php%3Ftitle=Get_Started.html" title="Get Started">Get Started</a></li>
<li><a href="index.php%3Ftitle=Special:Book&amp;bookcmd=remove_article&amp;arttitle=Use+ServiceNow&amp;oldid=0.html" title="Use ServiceNow">Use</a></li>
<li><a href="index.php%3Ftitle=Administer_ServiceNow.html" title="Administer ServiceNow">Administer</a></li>
<li><a href="index.php%3Ftitle=Script_in_ServiceNow.html" title="Script in ServiceNow">Script</a></li>
<li><a href="index.php%3Ftitle=Build.html" title="Build">Build</a></li>
<li><a href="index.php%3Ftitle=Deliver_ServiceNow.html" title="Deliver ServiceNow">Deliver</a></li>
<li><a href="index.php%3Ftitle=Integration_Overview.html" title="Integration Overview">Integrate</a></li>
<li><a href="index.php%3Ftitle=Release_Notes.html" title="Release Notes">Release Notes</a></li>
<li><a href="index.php%3Ftitle=Special:Book&amp;bookcmd=remove_article&amp;arttitle=Customer+Support&amp;oldid=0.html" title="Customer Support">Customer Support</a></li>
<li><a href="index.php%3Ftitle=Books.html" title="Books">Books</a></li>
<li><a href="index.php%3Ftitle=Special:Book&amp;bookcmd=remove_article&amp;arttitle=Video+Tutorials&amp;oldid=0.html" title="Video Tutorials">Video Tutorials</a></li>
<li><a target="_blank" rel="nofollow noreferrer noopener" class="external text" href="http://express.servicenow.com/support/">ServiceNow Express</a></li></ul>
</div>
</div>
</div>
<div class="portlet">
<h5><span class="mw-headline" id="Resources">Resources</span></h5>
<div class="pBody">
<ul><li><a href="index.php%3Ftitle=Category:Contents.html" title="Category:Contents">Site Map &#8211; Tree View</a><br /></li>
<li><a href="index.php%3Ftitle=Special:RecentChanges.html" title="Special:RecentChanges">Recent Changes</a><br /></li>
<li><a href="index.php%3Ftitle=Glossary_of_Terms.html" title="Glossary of Terms">Glossary</a><br /></li>
<li><a href="index.php%3Ftitle=Help:Getting_Started_on_the_ServiceNow_Wiki.html" title="Help:Getting Started on the ServiceNow Wiki">Wiki Help</a></li></ul>
</div>
</div>
<div class="portlet">
<h5><span class="mw-headline" id="Print">Print</span></h5>
<div class="pBody">
<ul><li><a target="_blank" rel="nofollow noreferrer noopener" class="external text" href="index.php%3Ftitle=Special:Book&amp;bookcmd=book_creator.html">Create a Book</a></li>
<li><a href="index.php%3Ftitle=Help:Books.html" title="Help:Books">Book Help</a></li>
<li><a target="_blank" rel="nofollow noreferrer noopener" class="external text" href="index.php%3Ftitle=Special:Book%252Frender_article%252F&amp;arttitle=Client_Scripts.html">Download Page as PDF</a></li>
<li><a target="_blank" rel="nofollow noreferrer noopener" class="external text" href="index.php%3Ftitle=Client_Scripts&amp;printable=yes.html">Printable Version</a></li></ul>
</div>
</div>
		</div>
		</div>
		<div class="generated-sidebar portlet" id="p-coll-print_export" role="navigation">
		<h3>Print/export</h3>
		<div class='pBody'>
							<ul>
											<li id="coll-create_a_book"><a href="index.php%3Ftitle=Special:Book&amp;bookcmd=book_creator&amp;referer=Client+Scripts.html">Create a book</a></li>
											<li id="coll-download-as-rl"><a href="index.php%3Ftitle=Special:Book&amp;bookcmd=render_article&amp;arttitle=Client+Scripts&amp;returnto=Client+Scripts&amp;oldid=250206&amp;writer=rl.html">Download as PDF</a></li>
											<li id="t-print"><a href="index.php%3Ftitle=Client_Scripts&amp;printable=yes.html" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
									</ul>
					</div>
		</div>
			<div id="p-search" class="portlet" role="search">
			<h3><label for="searchInput">Search</label></h3>

			<div id="searchBody" class="pBody">
				<form action="http://wiki.servicenow.com/index.php" id="searchform">
					<input type='hidden' name="title" value="Special:Search"/>
					<input type="search" name="search" placeholder="Search" title="Search ServiceNow Wiki [f]" accesskey="f" id="searchInput"/>
					<input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchGoButton" class="searchButton"/>&#160;
						<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton"/>
				</form>

							</div>
		</div>
			<div class="portlet" id="p-tb" role="navigation">
			<h3>Toolbox</h3>

			<div class="pBody">
				<ul>
											<li id="t-whatlinkshere"><a href="index.php%3Ftitle=Special:WhatLinksHere%252FClient_Scripts.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here?</a></li>
											<li id="t-recentchangeslinked"><a href="index.php%3Ftitle=Special:RecentChangesLinked%252FClient_Scripts.html" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
											<li id="t-specialpages"><a href="index.php%3Ftitle=Special:SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
											<li id="t-permalink"><a href="index.php%3Ftitle=Client_Scripts&amp;oldid=250206.html" title="Permanent link to this revision of the page">Permanent link</a></li>
											<li id="t-info"><a href="index.php%3Ftitle=Client_Scripts&amp;action=info.html" title="More information about this page">Page information</a></li>
									</ul>
							</div>
		</div>
			</div><!-- end of the left (by default at least) column -->
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
						<div id="f-poweredbyico">
									<a href="http://www.mediawiki.org/"><img src="resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a>
							</div>
					<ul id="f-list">
									<li id="lastmod"> This page was last modified 15:13, 17 August 2017.</li>
									<li id="privacy"><a href="index.php%3Ftitle=ServiceNow_Wiki:Privacy_policy.html" title="ServiceNow Wiki:Privacy policy">Privacy policy</a></li>
									<li id="about"><a href="index.php%3Ftitle=ServiceNow_Wiki:About.html" title="ServiceNow Wiki:About">About ServiceNow Wiki</a></li>
									<li id="disclaimer"><a href="index.php%3Ftitle=ServiceNow_Wiki:General_disclaimer.html" title="ServiceNow Wiki:General disclaimer">Disclaimers</a></li>
							</ul>
		</div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.loader.state({"user":"ready","user.groups":"ready"});mw.loader.load(["ext.treeandmenu","mediawiki.toc","mediawiki.action.view.postEdit","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"]);});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":1137});});</script></body></html>
